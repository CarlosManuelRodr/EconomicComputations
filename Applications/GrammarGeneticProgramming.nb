(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[         0,          0]
NotebookDataLength[    398301,       8901]
NotebookOptionsPosition[    382777,       8621]
NotebookOutlinePosition[    383111,       8636]
CellTagsIndexPosition[    383068,       8633]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{

Cell[CellGroupData[{
Cell["Grammar-based genetic programming", "Title",
 CellChangeTimes->{{3.790378058447762*^9, 3.790378064008601*^9}, 
   3.790607023610754*^9},ExpressionUUID->"231a28b8-24e8-4850-bed2-\
97e28e2feb38"],

Cell[BoxData[
 RowBox[{"Needs", "[", 
  RowBox[{"\"\<AdvancedMapping`\>\"", ",", 
   RowBox[{"FileNameJoin", "[", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"ParentDirectory", "@", 
       RowBox[{"NotebookDirectory", "[", "]"}]}], ",", "\"\<Extra\>\"", ",", 
      "\"\<AdvancedMapping.wl\>\""}], "}"}], "]"}]}], "]"}]], "Input",
 InitializationCell->True,
 CellLabel->"In[1]:=",ExpressionUUID->"142d95eb-353b-4049-a24d-671362ea0652"],

Cell[CellGroupData[{

Cell["Grammar definition and parsing", "Section",
 CellChangeTimes->{{3.7903780755573807`*^9, 
  3.790378079944899*^9}},ExpressionUUID->"082e424d-3c6e-4a29-ab66-\
8f49caa9d4f7"],

Cell[CellGroupData[{

Cell["Trading grammar description and possible terminals set", "Subsection",
 CellChangeTimes->{{3.7907763954308863`*^9, 3.79077640579045*^9}, 
   3.790778087948701*^9},ExpressionUUID->"b7222f7a-e6c8-4478-a4dc-\
40f00af64404"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"GrammarPrettifyRule", "[", "rule_", "]"}], ":=", 
   RowBox[{
    RowBox[{"Style", "[", 
     RowBox[{
      RowBox[{"rule", "[", "\"\<From\>\"", "]"}], ",", "Bold"}], "]"}], "->", 
    
    RowBox[{"ReplaceAll", "[", 
     RowBox[{
      RowBox[{"rule", "[", "\"\<To\>\"", "]"}], ",", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{
         RowBox[{"NonTerm", "[", "arg_", "]"}], "\[RuleDelayed]", 
         RowBox[{"Style", "[", 
          RowBox[{"arg", ",", "Bold"}], "]"}]}], ",", 
        RowBox[{
         RowBox[{"Term", "[", "arg_", "]"}], "\[RuleDelayed]", 
         RowBox[{"Style", "[", 
          RowBox[{"arg", ",", "Italic"}], "]"}]}]}], "}"}]}], "]"}]}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"GrammarPrettify", "[", "grammar_", "]"}], ":=", 
   RowBox[{"Column", "[", 
    RowBox[{"Map", "[", 
     RowBox[{"GrammarPrettifyRule", ",", "grammar"}], "]"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"grammar", " ", "=", " ", 
   RowBox[{"{", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"<|", 
      RowBox[{
       RowBox[{"\"\<From\>\"", "\[Rule]", "\"\<cond\>\""}], ",", 
       RowBox[{"\"\<To\>\"", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"Term", "[", "\"\<logicOp\>\"", "]"}], ",", 
          RowBox[{"NonTerm", "[", "\"\<cond\>\"", "]"}], ",", 
          RowBox[{"NonTerm", "[", "\"\<cond\>\"", "]"}]}], "}"}]}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"\"\<Value\>\"", "\[Rule]", 
        RowBox[{
         RowBox[{
          RowBox[{"Term", "[", "\"\<logicOp\>\"", "]"}], "[", "\"\<Value\>\"",
           "]"}], "[", 
         RowBox[{
          RowBox[{
           RowBox[{"NonTerm", "[", "\"\<cond\>\"", "]"}], "[", 
           "\"\<Value\>\"", "]"}], ",", 
          RowBox[{
           RowBox[{"NonTerm", "[", "\"\<cond\>\"", "]"}], "[", 
           "\"\<Value\>\"", "]"}]}], "]"}]}]}], "|>"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"<|", 
      RowBox[{
       RowBox[{"\"\<From\>\"", "\[Rule]", "\"\<cond\>\""}], ",", 
       RowBox[{"\"\<To\>\"", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"Term", "[", "\"\<not\>\"", "]"}], ",", 
          RowBox[{"NonTerm", "[", "\"\<cond\>\"", "]"}]}], "}"}]}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"\"\<Value\>\"", "\[Rule]", 
        RowBox[{"Not", "[", 
         RowBox[{
          RowBox[{"NonTerm", "[", "\"\<cond\>\"", "]"}], "[", "\"\<Value\>\"",
           "]"}], "]"}]}]}], "|>"}], ",", "\[IndentingNewLine]", 
     RowBox[{"<|", 
      RowBox[{
       RowBox[{"\"\<From\>\"", "\[Rule]", "\"\<cond\>\""}], ",", 
       RowBox[{"\"\<To\>\"", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"Term", "[", "\"\<numOp\>\"", "]"}], ",", 
          RowBox[{"NonTerm", "[", "\"\<numQuant\>\"", "]"}], ",", 
          RowBox[{"NonTerm", "[", "\"\<numQuant\>\"", "]"}]}], "}"}]}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"\"\<Value\>\"", "\[Rule]", 
        RowBox[{
         RowBox[{
          RowBox[{"Term", "[", "\"\<numOp\>\"", "]"}], "[", "\"\<Value\>\"", 
          "]"}], "[", 
         RowBox[{
          RowBox[{
           RowBox[{"NonTerm", "[", "\"\<numQuant\>\"", "]"}], "[", 
           "\"\<Value\>\"", "]"}], ",", 
          RowBox[{
           RowBox[{"NonTerm", "[", "\"\<numQuant\>\"", "]"}], "[", 
           "\"\<Value\>\"", "]"}]}], "]"}]}]}], "|>"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"<|", 
      RowBox[{
       RowBox[{"\"\<From\>\"", "\[Rule]", "\"\<numQuant\>\""}], ",", 
       RowBox[{"\"\<To\>\"", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"Term", "[", "\"\<factor\>\"", "]"}], ",", 
          RowBox[{"NonTerm", "[", "\"\<expression\>\"", "]"}]}], "}"}]}], ",",
        "\[IndentingNewLine]", 
       RowBox[{"\"\<Value\>\"", "\[Rule]", 
        RowBox[{"Times", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"Term", "[", "\"\<factor\>\"", "]"}], "[", "\"\<Value\>\"",
            "]"}], ",", 
          RowBox[{
           RowBox[{"NonTerm", "[", "\"\<expression\>\"", "]"}], "[", 
           "\"\<Value\>\"", "]"}]}], "]"}]}]}], "|>"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"<|", 
      RowBox[{
       RowBox[{"\"\<From\>\"", "\[Rule]", "\"\<numQuant\>\""}], ",", 
       RowBox[{"\"\<To\>\"", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{"NonTerm", "[", "\"\<expression\>\"", "]"}], "}"}]}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"\"\<Value\>\"", "\[Rule]", 
        RowBox[{
         RowBox[{"NonTerm", "[", "\"\<expression\>\"", "]"}], "[", 
         "\"\<Value\>\"", "]"}]}]}], "|>"}], ",", "\[IndentingNewLine]", 
     RowBox[{"<|", 
      RowBox[{
       RowBox[{"\"\<From\>\"", "\[Rule]", "\"\<expression\>\""}], ",", 
       RowBox[{"\"\<To\>\"", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"Term", "[", "\"\<techInd\>\"", "]"}], ",", 
          RowBox[{"Term", "[", "\"\<observable\>\"", "]"}], ",", 
          RowBox[{"Term", "[", "\"\<window\>\"", "]"}]}], "}"}]}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"\"\<Value\>\"", "\[Rule]", 
        RowBox[{
         RowBox[{
          RowBox[{"Term", "[", "\"\<techInd\>\"", "]"}], "[", "\"\<Value\>\"",
           "]"}], "[", 
         RowBox[{
          RowBox[{
           RowBox[{"Term", "[", "\"\<observable\>\"", "]"}], "[", 
           "\"\<Value\>\"", "]"}], ",", 
          RowBox[{
           RowBox[{"Term", "[", "\"\<window\>\"", "]"}], "[", "\"\<Value\>\"",
            "]"}]}], "]"}]}]}], "|>"}], ",", "\[IndentingNewLine]", 
     RowBox[{"<|", 
      RowBox[{
       RowBox[{"\"\<From\>\"", "\[Rule]", "\"\<expression\>\""}], ",", 
       RowBox[{"\"\<To\>\"", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"Term", "[", "\"\<lag\>\"", "]"}], ",", 
          RowBox[{"Term", "[", "\"\<observable\>\"", "]"}]}], "}"}]}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"\"\<Value\>\"", "\[Rule]", 
        RowBox[{"Prev", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"Term", "[", "\"\<observable\>\"", "]"}], "[", 
           "\"\<Value\>\"", "]"}], ",", 
          RowBox[{
           RowBox[{"Term", "[", "\"\<lag\>\"", "]"}], "[", "\"\<Value\>\"", 
           "]"}]}], "]"}]}]}], "|>"}], ",", "\[IndentingNewLine]", 
     RowBox[{"<|", 
      RowBox[{
       RowBox[{"\"\<From\>\"", "\[Rule]", "\"\<expression\>\""}], ",", 
       RowBox[{"\"\<To\>\"", "\[Rule]", 
        RowBox[{"{", 
         RowBox[{"Term", "[", "\"\<observable\>\"", "]"}], "}"}]}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"\"\<Value\>\"", "\[Rule]", 
        RowBox[{
         RowBox[{"Term", "[", "\"\<observable\>\"", "]"}], "[", 
         "\"\<Value\>\"", "]"}]}]}], "|>"}]}], "\[IndentingNewLine]", "}"}]}],
   ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"terminalSet", " ", "=", " ", 
   RowBox[{"{", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"Term", "[", 
      RowBox[{"\"\<logicOp\>\"", ",", "\"\<And\>\""}], "]"}], ",", 
     RowBox[{"Term", "[", 
      RowBox[{"\"\<logicOp\>\"", ",", "\"\<Or\>\""}], "]"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"Term", "[", 
      RowBox[{"\"\<numOp\>\"", ",", "\"\<Greater\>\""}], "]"}], ",", 
     RowBox[{"Term", "[", 
      RowBox[{"\"\<numOp\>\"", ",", "\"\<GreaterEqual\>\""}], "]"}], ",", 
     RowBox[{"Term", "[", 
      RowBox[{"\"\<numOp\>\"", ",", "\"\<Less\>\""}], "]"}], ",", 
     RowBox[{"Term", "[", 
      RowBox[{"\"\<numOp\>\"", ",", "\"\<LessEqual\>\""}], "]"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"Term", "[", 
      RowBox[{"\"\<observable\>\"", ",", "\"\<Open\>\""}], "]"}], ",", 
     RowBox[{"Term", "[", 
      RowBox[{"\"\<observable\>\"", ",", "\"\<Low\>\""}], "]"}], ",", 
     RowBox[{"Term", "[", 
      RowBox[{"\"\<observable\>\"", ",", "\"\<High\>\""}], "]"}], ",", 
     RowBox[{"Term", "[", 
      RowBox[{"\"\<observable\>\"", ",", "\"\<Close\>\""}], "]"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"Term", "[", 
      RowBox[{"\"\<lag\>\"", ",", "\"\<1\>\""}], "]"}], ",", 
     RowBox[{"Term", "[", 
      RowBox[{"\"\<lag\>\"", ",", "\"\<2\>\""}], "]"}], ",", 
     RowBox[{"Term", "[", 
      RowBox[{"\"\<lag\>\"", ",", "\"\<3\>\""}], "]"}], ",", 
     RowBox[{"Term", "[", 
      RowBox[{"\"\<lag\>\"", ",", "\"\<4\>\""}], "]"}], ",", 
     RowBox[{"Term", "[", 
      RowBox[{"\"\<lag\>\"", ",", "\"\<5\>\""}], "]"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"Term", "[", 
      RowBox[{"\"\<window\>\"", ",", "\"\<10\>\""}], "]"}], ",", 
     RowBox[{"Term", "[", 
      RowBox[{"\"\<window\>\"", ",", "\"\<20\>\""}], "]"}], ",", 
     RowBox[{"Term", "[", 
      RowBox[{"\"\<window\>\"", ",", "\"\<30\>\""}], "]"}], ",", 
     RowBox[{"Term", "[", 
      RowBox[{"\"\<window\>\"", ",", "\"\<40\>\""}], "]"}], ",", 
     RowBox[{"Term", "[", 
      RowBox[{"\"\<window\>\"", ",", "\"\<50\>\""}], "]"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"Term", "[", 
      RowBox[{"\"\<factor\>\"", ",", "\"\<0.5\>\""}], "]"}], ",", 
     RowBox[{"Term", "[", 
      RowBox[{"\"\<factor\>\"", ",", "\"\<0.7\>\""}], "]"}], ",", 
     RowBox[{"Term", "[", 
      RowBox[{"\"\<factor\>\"", ",", "\"\<0.9\>\""}], "]"}], ",", 
     RowBox[{"Term", "[", 
      RowBox[{"\"\<factor\>\"", ",", "\"\<1.1\>\""}], "]"}], ",", 
     RowBox[{"Term", "[", 
      RowBox[{"\"\<factor\>\"", ",", "\"\<1.3\>\""}], "]"}], ",", 
     RowBox[{"Term", "[", 
      RowBox[{"\"\<factor\>\"", ",", "\"\<1.5\>\""}], "]"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"Term", "[", 
      RowBox[{"\"\<techInd\>\"", ",", "\"\<SMA\>\""}], "]"}], ",", 
     RowBox[{"Term", "[", 
      RowBox[{"\"\<techInd\>\"", ",", "\"\<EMA\>\""}], "]"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{"Term", "[", 
      RowBox[{"\"\<not\>\"", ",", "\"\<Not\>\""}], "]"}]}], 
    "\[IndentingNewLine]", "}"}]}], ";"}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.790342676060285*^9, 3.7903426885314093`*^9}, {
   3.790343698923114*^9, 3.790343748806674*^9}, {3.7903438021747093`*^9, 
   3.790343817320533*^9}, {3.790343854406949*^9, 3.790343877049046*^9}, {
   3.7903439287357388`*^9, 3.7903440809966803`*^9}, {3.7903441689180727`*^9, 
   3.790344178864008*^9}, {3.790344228535228*^9, 3.7903442378968363`*^9}, {
   3.7903442692084713`*^9, 3.7903443140245523`*^9}, {3.7903443545003633`*^9, 
   3.790344439466031*^9}, {3.7903444715377493`*^9, 3.790344488158393*^9}, 
   3.7903445540805817`*^9, {3.790347791009404*^9, 3.7903478714993563`*^9}, {
   3.790348397816537*^9, 3.790348440027976*^9}, {3.790459453943384*^9, 
   3.790459454497119*^9}, {3.790468466938444*^9, 3.7904686138366833`*^9}, {
   3.790468671244553*^9, 3.790468739000846*^9}, {3.7904687718900633`*^9, 
   3.790468773607869*^9}, {3.790468880751397*^9, 3.79046890211629*^9}, {
   3.790469360080749*^9, 3.790469454683938*^9}, {3.7905448494803953`*^9, 
   3.790544865764814*^9}, {3.790545342207829*^9, 3.790545348589766*^9}, {
   3.7908022651320057`*^9, 3.790802265400721*^9}, {3.790803347412579*^9, 
   3.790803394234735*^9}, {3.790803553118783*^9, 3.790803553340231*^9}},
 CellLabel->"In[71]:=",ExpressionUUID->"2596c319-046c-4a6c-a461-990c8cd0bff1"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"GrammarPrettify", "[", "grammar", "]"}]], "Input",
 CellChangeTimes->{3.7904594634186697`*^9},
 CellLabel->
  "In[185]:=",ExpressionUUID->"effdc811-5ed1-4747-a52b-de866aec4d5c"],

Cell[BoxData[
 TagBox[GridBox[{
    {
     RowBox[{
      StyleBox["\<\"cond\"\>",
       StripOnInput->False,
       FontWeight->Bold], "\[Rule]", 
      RowBox[{"{", 
       RowBox[{
        StyleBox["\<\"logicOp\"\>",
         StripOnInput->False,
         FontSlant->Italic], ",", 
        StyleBox["\<\"cond\"\>",
         StripOnInput->False,
         FontWeight->Bold], ",", 
        StyleBox["\<\"cond\"\>",
         StripOnInput->False,
         FontWeight->Bold]}], "}"}]}]},
    {
     RowBox[{
      StyleBox["\<\"cond\"\>",
       StripOnInput->False,
       FontWeight->Bold], "\[Rule]", 
      RowBox[{"{", 
       RowBox[{
        StyleBox["\<\"not\"\>",
         StripOnInput->False,
         FontSlant->Italic], ",", 
        StyleBox["\<\"cond\"\>",
         StripOnInput->False,
         FontWeight->Bold]}], "}"}]}]},
    {
     RowBox[{
      StyleBox["\<\"cond\"\>",
       StripOnInput->False,
       FontWeight->Bold], "\[Rule]", 
      RowBox[{"{", 
       RowBox[{
        StyleBox["\<\"numOp\"\>",
         StripOnInput->False,
         FontSlant->Italic], ",", 
        StyleBox["\<\"numQuant\"\>",
         StripOnInput->False,
         FontWeight->Bold], ",", 
        StyleBox["\<\"numQuant\"\>",
         StripOnInput->False,
         FontWeight->Bold]}], "}"}]}]},
    {
     RowBox[{
      StyleBox["\<\"numQuant\"\>",
       StripOnInput->False,
       FontWeight->Bold], "\[Rule]", 
      RowBox[{"{", 
       RowBox[{
        StyleBox["\<\"factor\"\>",
         StripOnInput->False,
         FontSlant->Italic], ",", 
        StyleBox["\<\"expression\"\>",
         StripOnInput->False,
         FontWeight->Bold]}], "}"}]}]},
    {
     RowBox[{
      StyleBox["\<\"numQuant\"\>",
       StripOnInput->False,
       FontWeight->Bold], "\[Rule]", 
      RowBox[{"{", 
       StyleBox["\<\"expression\"\>",
        StripOnInput->False,
        FontWeight->Bold], "}"}]}]},
    {
     RowBox[{
      StyleBox["\<\"expression\"\>",
       StripOnInput->False,
       FontWeight->Bold], "\[Rule]", 
      RowBox[{"{", 
       RowBox[{
        StyleBox["\<\"techInd\"\>",
         StripOnInput->False,
         FontSlant->Italic], ",", 
        StyleBox["\<\"observable\"\>",
         StripOnInput->False,
         FontSlant->Italic], ",", 
        StyleBox["\<\"window\"\>",
         StripOnInput->False,
         FontSlant->Italic]}], "}"}]}]},
    {
     RowBox[{
      StyleBox["\<\"expression\"\>",
       StripOnInput->False,
       FontWeight->Bold], "\[Rule]", 
      RowBox[{"{", 
       RowBox[{
        StyleBox["\<\"lag\"\>",
         StripOnInput->False,
         FontSlant->Italic], ",", 
        StyleBox["\<\"observable\"\>",
         StripOnInput->False,
         FontSlant->Italic]}], "}"}]}]},
    {
     RowBox[{
      StyleBox["\<\"expression\"\>",
       StripOnInput->False,
       FontWeight->Bold], "\[Rule]", 
      RowBox[{"{", 
       StyleBox["\<\"observable\"\>",
        StripOnInput->False,
        FontSlant->Italic], "}"}]}]}
   },
   DefaultBaseStyle->"Column",
   GridBoxAlignment->{"Columns" -> {{Left}}},
   GridBoxItemSize->{"Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}],
  "Column"]], "Output",
 CellChangeTimes->{3.790459463729195*^9, 3.7904706638105707`*^9},
 CellLabel->
  "Out[185]=",ExpressionUUID->"e39b8d9b-d591-4ff2-9df0-992f6f1ae4b5"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"GrammarGraph", "[", "grammar_", "]"}], ":=", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"graphData", ",", "allSymbols", ",", "colorStyle"}], "}"}], ",",
      "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"graphData", " ", "=", " ", 
       RowBox[{"DeleteDuplicates", "[", 
        RowBox[{"Flatten", "[", 
         RowBox[{"Map", "[", 
          RowBox[{"Thread", ",", 
           RowBox[{"Map", "[", 
            RowBox[{
             RowBox[{
              RowBox[{"(", 
               RowBox[{
                RowBox[{"NonTerm", "[", 
                 RowBox[{"#", "[", "\"\<From\>\"", "]"}], "]"}], "\[Rule]", 
                RowBox[{"#", "[", "\"\<To\>\"", "]"}]}], ")"}], "&"}], ",", 
             "grammar"}], "]"}]}], "]"}], "]"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"allSymbols", " ", "=", " ", 
       RowBox[{"DeleteDuplicates", "[", 
        RowBox[{"Flatten", "[", 
         RowBox[{"Map", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"{", 
             RowBox[{
              RowBox[{"NonTerm", "[", 
               RowBox[{"#", "[", "\"\<From\>\"", "]"}], "]"}], ",", 
              RowBox[{"#", "[", "\"\<To\>\"", "]"}]}], "}"}], "&"}], ",", 
           "grammar"}], "]"}], "]"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"colorStyle", " ", "=", " ", 
       RowBox[{"Join", "[", 
        RowBox[{
         RowBox[{"Thread", "[", 
          RowBox[{
           RowBox[{"Cases", "[", 
            RowBox[{"allSymbols", ",", "_NonTerm"}], "]"}], "\[Rule]", 
           "Blue"}], "]"}], ",", 
         RowBox[{"Thread", "[", 
          RowBox[{
           RowBox[{"Cases", "[", 
            RowBox[{"allSymbols", ",", "_Term"}], "]"}], "\[Rule]", "Red"}], 
          "]"}]}], "]"}]}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"Graph", "[", 
       RowBox[{"graphData", ",", 
        RowBox[{"VertexLabels", "\[Rule]", "\"\<Name\>\""}], ",", 
        RowBox[{"VertexStyle", "\[Rule]", "colorStyle"}], ",", 
        RowBox[{"ImageSize", "\[Rule]", "800"}]}], "]"}]}]}], 
    "\[IndentingNewLine]", "]"}]}], ";"}]], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.7904595790269337`*^9, 3.7904595793402443`*^9}},
 CellLabel->"In[6]:=",ExpressionUUID->"dbcee70f-0ecd-408e-9a7c-2a6b3a243902"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"GrammarGraph", "[", "grammar", "]"}]], "Input",
 CellChangeTimes->{3.790459593834159*^9},
 CellLabel->
  "In[280]:=",ExpressionUUID->"407eac81-0c5d-4ce8-a328-cbba96d15565"],

Cell[BoxData[
 GraphicsBox[
  NamespaceBox["NetworkGraphics",
   DynamicModuleBox[{Typeset`graph = HoldComplete[
     Graph[{
       $CellContext`NonTerm["cond"], 
       $CellContext`Term["logicOp"], 
       $CellContext`Term["not"], 
       $CellContext`Term["numOp"], 
       $CellContext`NonTerm["numQuant"], 
       $CellContext`Term["factor"], 
       $CellContext`NonTerm["expression"], 
       $CellContext`Term["techInd"], 
       $CellContext`Term["observable"], 
       $CellContext`Term["lag"]}, {{{1, 2}, {1, 1}, {1, 3}, {1, 4}, {1, 5}, {
       5, 6}, {5, 7}, {7, 8}, {7, 9}, {7, 10}}, Null}, {
      ImageSize -> 800, VertexLabels -> {"Name"}, 
       VertexStyle -> {$CellContext`Term["factor"] -> 
         RGBColor[1, 0, 0], $CellContext`NonTerm["expression"] -> 
         RGBColor[0, 0, 1], $CellContext`NonTerm["numQuant"] -> 
         RGBColor[0, 0, 1], $CellContext`Term["observable"] -> 
         RGBColor[1, 0, 0], $CellContext`Term["techInd"] -> 
         RGBColor[1, 0, 0], $CellContext`Term["not"] -> 
         RGBColor[1, 0, 0], $CellContext`NonTerm["cond"] -> 
         RGBColor[0, 0, 1], $CellContext`Term["logicOp"] -> 
         RGBColor[1, 0, 0], $CellContext`Term["numOp"] -> 
         RGBColor[1, 0, 0], $CellContext`Term["lag"] -> 
         RGBColor[1, 0, 0]}}]]}, 
    TagBox[GraphicsGroupBox[{
       {Hue[0.6, 0.7, 0.5], Opacity[0.7], Arrowheads[Medium], 
        ArrowBox[{{0., 3.}, {-1., 2.}}, 0.03700564971751412], 
        ArrowBox[{{0., 3.}, {0., 2.}}, 0.03700564971751412], 
        ArrowBox[{{0., 3.}, {1., 2.}}, 0.03700564971751412], 
        ArrowBox[{{0., 3.}, {2., 2.}}, 0.03700564971751412], 
        ArrowBox[BezierCurveBox[{{0., 3.}, {-0.2863681171350719, 
         3.080294279021607}, {-0.4101469105751911, 
         3.34514363295201}, {-0.3566538340963171, 3.5360234393818075`}, {
         0.1688460408244838, 3.621300329502731}, {0.2799555238063517, 
         3.457131841279949}, {0.24628136934128025`, 3.166731391376878}, {0., 
         3.}},
         SplineDegree->7], 0.03700564971751412], 
        ArrowBox[{{2., 2.}, {1., 1.}}, 0.03700564971751412], 
        ArrowBox[{{2., 2.}, {2., 1.}}, 0.03700564971751412], 
        ArrowBox[{{2., 1.}, {1., 0.}}, 0.03700564971751412], 
        ArrowBox[{{2., 1.}, {2., 0.}}, 0.03700564971751412], 
        ArrowBox[{{2., 1.}, {3., 0.}}, 0.03700564971751412]}, 
       {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[0.7]}], {
         {RGBColor[0, 0, 1], DiskBox[{0., 3.}, 0.03700564971751412]}, InsetBox[
          RowBox[{"NonTerm", "(", "\<\"cond\"\>", ")"}], 
          Offset[{2, 2}, {0.03700564971751412, 3.037005649717514}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         {RGBColor[1, 0, 0], DiskBox[{-1., 2.}, 0.03700564971751412]}, 
         InsetBox[
          RowBox[{"Term", "(", "\<\"logicOp\"\>", ")"}], 
          Offset[{2, 2}, {-0.9629943502824859, 2.037005649717514}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         {RGBColor[1, 0, 0], DiskBox[{0., 2.}, 0.03700564971751412]}, InsetBox[
          RowBox[{"Term", "(", "\<\"not\"\>", ")"}], 
          Offset[{2, 2}, {0.03700564971751412, 2.037005649717514}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         {RGBColor[1, 0, 0], DiskBox[{1., 2.}, 0.03700564971751412]}, InsetBox[
          RowBox[{"Term", "(", "\<\"numOp\"\>", ")"}], 
          Offset[{2, 2}, {1.0370056497175142, 2.037005649717514}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         {RGBColor[0, 0, 1], DiskBox[{2., 2.}, 0.03700564971751412]}, InsetBox[
          RowBox[{"NonTerm", "(", "\<\"numQuant\"\>", ")"}], 
          Offset[{2, 2}, {2.037005649717514, 2.037005649717514}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         {RGBColor[1, 0, 0], DiskBox[{1., 1.}, 0.03700564971751412]}, InsetBox[
          RowBox[{"Term", "(", "\<\"factor\"\>", ")"}], 
          Offset[{2, 2}, {1.0370056497175142, 1.0370056497175142}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         {RGBColor[0, 0, 1], DiskBox[{2., 1.}, 0.03700564971751412]}, InsetBox[
          RowBox[{"NonTerm", "(", "\<\"expression\"\>", ")"}], 
          Offset[{2, 2}, {2.037005649717514, 1.0370056497175142}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         {RGBColor[1, 0, 0], DiskBox[{1., 0.}, 0.03700564971751412]}, InsetBox[
          RowBox[{"Term", "(", "\<\"techInd\"\>", ")"}], 
          Offset[{2, 2}, {1.0370056497175142, 0.03700564971751412}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         {RGBColor[1, 0, 0], DiskBox[{2., 0.}, 0.03700564971751412]}, InsetBox[
          RowBox[{"Term", "(", "\<\"observable\"\>", ")"}], 
          Offset[{2, 2}, {2.037005649717514, 0.03700564971751412}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         {RGBColor[1, 0, 0], DiskBox[{3., 0.}, 0.03700564971751412]}, InsetBox[
          RowBox[{"Term", "(", "\<\"lag\"\>", ")"}], 
          Offset[{2, 2}, {3.037005649717514, 0.03700564971751412}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}}}],
     MouseAppearanceTag["NetworkGraphics"]],
    AllowKernelInitialization->False]],
  DefaultBaseStyle->{
   "NetworkGraphics", FrontEnd`GraphicsHighlightColor -> Hue[0.8, 1., 0.6]},
  FormatType->TraditionalForm,
  FrameTicks->None,
  ImageSize->{548., Automatic}]], "Output",
 CellChangeTimes->{3.790459594187018*^9},
 CellLabel->
  "Out[280]=",ExpressionUUID->"a30814f3-ec89-4bc8-a2d6-a1df53b63b0c"]
}, Open  ]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Expression tree synthesization", "Subsection",
 CellChangeTimes->{{3.790776426685184*^9, 
  3.7907764418199377`*^9}},ExpressionUUID->"feb899df-d67b-4dea-bf41-\
d439169cadf8"],

Cell["Separate head from arguments", "Text",
 CellChangeTimes->{{3.790776538943063*^9, 
  3.790776543576302*^9}},ExpressionUUID->"b273e77e-9253-49d7-9c51-\
15476533a67f"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"GetComponents", "[", 
    RowBox[{"expr_", "/;", 
     RowBox[{
      RowBox[{"Depth", "[", "expr", "]"}], "<", "3"}]}], "]"}], ":=", 
   RowBox[{"{", "expr", "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"GetComponents", "[", 
    RowBox[{"expr_", "/;", 
     RowBox[{
      RowBox[{"Depth", "[", "expr", "]"}], "\[Equal]", "3"}]}], "]"}], ":=", 
   RowBox[{"Prepend", "[", 
    RowBox[{
     RowBox[{"Level", "[", 
      RowBox[{"expr", ",", 
       RowBox[{"{", "1", "}"}]}], "]"}], ",", 
     RowBox[{"Head", "[", "expr", "]"}]}], "]"}]}], ";"}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.79035714595779*^9, 3.7903572493874207`*^9}, {
  3.7903572801192503`*^9, 3.790357312880403*^9}, {3.790359091130979*^9, 
  3.790359092294668*^9}, {3.790360996664217*^9, 3.790361054211101*^9}, {
  3.790361116761746*^9, 3.790361118356138*^9}, {3.7903615802666683`*^9, 
  3.790361587082275*^9}, {3.79036173894415*^9, 3.790361750751802*^9}, {
  3.790361949004196*^9, 3.790361949243352*^9}, {3.790455525533889*^9, 
  3.790455527163363*^9}, {3.790455610599532*^9, 3.790455610874358*^9}, {
  3.7904571522889023`*^9, 3.790457184725666*^9}, {3.790457275631034*^9, 
  3.790457292503612*^9}, {3.790457331959938*^9, 3.7904573508431883`*^9}, {
  3.790458457881886*^9, 3.7904585876572237`*^9}, {3.790458635325519*^9, 
  3.790458638150556*^9}, {3.790776451079596*^9, 3.790776453433712*^9}},
 CellLabel->"In[7]:=",ExpressionUUID->"48a50991-ced2-49a9-8324-4b430a7ed712"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"GetComponents", "[", 
  RowBox[{"Less", "[", 
   RowBox[{"\"\<Close\>\"", ",", 
    RowBox[{"Prev", "[", 
     RowBox[{"3", ",", "\"\<Open\>\""}], "]"}]}], "]"}], "]"}]], "Input",
 CellChangeTimes->{{3.790776468691166*^9, 3.790776507496887*^9}},
 CellLabel->"In[63]:=",ExpressionUUID->"1e66c574-3eb2-486e-9734-ed6239db7fdd"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"Less", ",", "\<\"Close\"\>", ",", 
   RowBox[{"Prev", "[", 
    RowBox[{"3", ",", "\<\"Open\"\>"}], "]"}]}], "}"}]], "Output",
 CellChangeTimes->{3.790776473350361*^9, 3.790776507737318*^9},
 CellLabel->"Out[63]=",ExpressionUUID->"9453bbe9-fd99-43f4-99e4-0aa66e2c5c97"]
}, Open  ]],

Cell["Rebuild expression from components", "Text",
 CellChangeTimes->{{3.7907765719821568`*^9, 
  3.79077657880576*^9}},ExpressionUUID->"b98958a0-7bd8-449e-827b-\
76a5e5542a90"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"ExprFromComponents", "[", 
    RowBox[{"components_", " ", "/;", 
     RowBox[{
      RowBox[{"Length", "[", "components", "]"}], "\[LessEqual]", "1"}]}], 
    "]"}], ":=", 
   RowBox[{"First", "[", "components", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ExprFromComponents", "[", 
    RowBox[{"components_", " ", "/;", 
     RowBox[{
      RowBox[{"Length", "[", "components", "]"}], ">", "1"}]}], "]"}], ":=", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"head", ",", "rest"}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{
       RowBox[{"{", 
        RowBox[{"head", ",", "rest"}], "}"}], " ", "=", " ", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"First", "[", "components", "]"}], ",", 
         RowBox[{"Rest", "[", "components", "]"}]}], "}"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"Apply", "[", 
       RowBox[{"head", ",", "rest"}], "]"}]}]}], "\[IndentingNewLine]", 
    "]"}]}], ";"}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.79035714595779*^9, 3.7903572493874207`*^9}, {
   3.7903572801192503`*^9, 3.790357312880403*^9}, {3.790359091130979*^9, 
   3.790359092294668*^9}, {3.790360996664217*^9, 3.790361054211101*^9}, {
   3.790361116761746*^9, 3.790361118356138*^9}, {3.7903615802666683`*^9, 
   3.790361587082275*^9}, {3.79036173894415*^9, 3.790361750751802*^9}, {
   3.790361949004196*^9, 3.790361949243352*^9}, {3.790455525533889*^9, 
   3.790455527163363*^9}, {3.790455610599532*^9, 3.790455610874358*^9}, {
   3.7904571522889023`*^9, 3.790457184725666*^9}, {3.790457275631034*^9, 
   3.790457292503612*^9}, {3.790457331959938*^9, 3.7904573508431883`*^9}, {
   3.790458457881886*^9, 3.7904585876572237`*^9}, {3.790458635325519*^9, 
   3.790458638150556*^9}, {3.790776451079596*^9, 3.790776453433712*^9}, 
   3.790776548078702*^9},
 CellLabel->"In[9]:=",ExpressionUUID->"26a985c5-ad62-4a7e-84cd-f01450dbbee4"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"ExprFromComponents", "[", 
   RowBox[{"{", 
    RowBox[{"Less", ",", "\"\<Close\>\"", ",", 
     RowBox[{"Prev", "[", 
      RowBox[{"3", ",", "\"\<Open\>\""}], "]"}]}], "}"}], "]"}], " ", "//", 
  " ", "FullForm"}]], "Input",
 CellChangeTimes->{{3.7907765575510073`*^9, 3.790776567247357*^9}},
 CellLabel->"In[65]:=",ExpressionUUID->"b7ff66d6-6c24-449c-ae02-c8a2c91f5538"],

Cell[BoxData[
 TagBox[
  StyleBox[
   RowBox[{"Less", "[", 
    RowBox[{"\"\<Close\>\"", ",", 
     RowBox[{"Prev", "[", 
      RowBox[{"3", ",", "\"\<Open\>\""}], "]"}]}], "]"}],
   ShowSpecialCharacters->False,
   ShowStringCharacters->True,
   NumberMarks->True],
  FullForm]], "Output",
 CellChangeTimes->{{3.790776559071225*^9, 3.790776567534006*^9}},
 CellLabel->
  "Out[65]//FullForm=",ExpressionUUID->"97c81dcb-f7e6-45d7-b90f-e38fb1186942"]
}, Open  ]],

Cell["\<\
Find the positions of values to be synthesized on the synthesizations list\
\>", "Text",
 CellChangeTimes->{{3.790776983939028*^9, 
  3.790777035834339*^9}},ExpressionUUID->"468bfd98-d3f2-49d0-84f7-\
9bc08eb51f7b"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"GetValue", "[", 
    RowBox[{"treeSymbol_", ",", "grammar_"}], "]"}], ":=", 
   RowBox[{"ReplaceAll", "[", 
    RowBox[{"treeSymbol", ",", 
     RowBox[{
      RowBox[{"NonTerm", "[", 
       RowBox[{"_", ",", "rule_"}], "]"}], "\[RuleDelayed]", 
      RowBox[{
       RowBox[{"grammar", "[", 
        RowBox[{"[", "rule", "]"}], "]"}], "[", "\"\<Value\>\"", "]"}]}]}], 
    "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"MatchPositions", "[", 
    RowBox[{"expr_", ",", "synthesizations_"}], "]"}], ":=", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"pos", ",", "newSynth", ",", "recursive"}], "}"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"pos", " ", "=", " ", 
       RowBox[{"FirstPosition", "[", 
        RowBox[{"synthesizations", ",", 
         RowBox[{"First", "[", "expr", "]"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"pos", " ", "=!=", 
         RowBox[{"Missing", "[", "\"\<NotFound\>\"", "]"}]}], ",", 
        "\[IndentingNewLine]", 
        RowBox[{"newSynth", " ", "=", " ", 
         RowBox[{"ReplacePart", "[", 
          RowBox[{"synthesizations", ",", 
           RowBox[{
            RowBox[{"First", "[", "pos", "]"}], "\[Rule]", "Found"}]}], 
          "]"}]}], ",", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"newSynth", " ", "=", " ", "synthesizations"}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"pos", " ", "=", " ", 
          RowBox[{"{", "}"}]}], ";"}]}], "\[IndentingNewLine]", "]"}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"recursive", " ", "=", " ", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"Rest", "[", "expr", "]"}], "\[NotEqual]", 
          RowBox[{"{", "}"}]}], ",", 
         RowBox[{"MatchPositions", "[", 
          RowBox[{
           RowBox[{"Rest", "[", "expr", "]"}], ",", "newSynth"}], "]"}], ",", 
         
         RowBox[{"{", "}"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"Transpose", "@", 
       RowBox[{"{", 
        RowBox[{"Flatten", "@", 
         RowBox[{"Join", "[", 
          RowBox[{"pos", ",", "recursive"}], "]"}]}], "}"}]}]}]}], 
    "\[IndentingNewLine]", "]"}]}], ";"}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.79035714595779*^9, 3.7903572493874207`*^9}, {
   3.7903572801192503`*^9, 3.790357312880403*^9}, {3.790359091130979*^9, 
   3.790359092294668*^9}, {3.790360996664217*^9, 3.790361054211101*^9}, {
   3.790361116761746*^9, 3.790361118356138*^9}, {3.7903615802666683`*^9, 
   3.790361587082275*^9}, {3.79036173894415*^9, 3.790361750751802*^9}, {
   3.790361949004196*^9, 3.790361949243352*^9}, {3.790455525533889*^9, 
   3.790455527163363*^9}, {3.790455610599532*^9, 3.790455610874358*^9}, {
   3.7904571522889023`*^9, 3.790457184725666*^9}, {3.790457275631034*^9, 
   3.790457292503612*^9}, {3.790457331959938*^9, 3.7904573508431883`*^9}, {
   3.790458457881886*^9, 3.7904585876572237`*^9}, {3.790458635325519*^9, 
   3.790458638150556*^9}, {3.790776451079596*^9, 3.790776453433712*^9}, 
   3.790776548078702*^9, 3.7907765897318087`*^9, {3.79077695070119*^9, 
   3.790776951097415*^9}, {3.790777325925509*^9, 3.790777328253358*^9}, {
   3.790777688929077*^9, 3.790777690413739*^9}},
 CellLabel->"In[11]:=",ExpressionUUID->"0e439146-86f7-4090-951a-3a17c2091f94"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"synthValue", " ", "=", " ", 
  RowBox[{"GetValue", "[", 
   RowBox[{
    RowBox[{"NonTerm", "[", 
     RowBox[{"\"\<expression\>\"", ",", "8"}], "]"}], ",", "grammar"}], 
   "]"}]}]], "Input",
 CellChangeTimes->{{3.790776966876132*^9, 3.7907769693712873`*^9}},
 CellLabel->
  "In[124]:=",ExpressionUUID->"e567a967-12f2-49a3-98cc-692f7bf0d6ee"],

Cell[BoxData[
 RowBox[{
  RowBox[{"Term", "[", "\<\"observable\"\>", "]"}], "[", "\<\"Value\"\>", 
  "]"}]], "Output",
 CellChangeTimes->{3.79077697113416*^9, 3.790777648205731*^9},
 CellLabel->
  "Out[124]=",ExpressionUUID->"52fde800-d02f-4666-b9fa-ae1c94f3f4d5"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"MatchPositions", "[", 
  RowBox[{
   RowBox[{"GetComponents", "[", "synthValue", "]"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{
      RowBox[{"Term", "[", "\"\<observable\>\"", "]"}], "[", "\"\<Value\>\"", 
      "]"}], ",", 
     RowBox[{
      RowBox[{"Term", "[", "\"\<numOp\>\"", "]"}], "[", "\"\<Value\>\"", 
      "]"}], ",", 
     RowBox[{
      RowBox[{"Term", "[", "\"\<logicOp\>\"", "]"}], "[", "\"\<Value\>\"", 
      "]"}]}], "}"}]}], "]"}]], "Input",
 CellChangeTimes->{
  3.790776980379313*^9, {3.790777704167728*^9, 3.790777708444209*^9}},
 CellLabel->
  "In[132]:=",ExpressionUUID->"0affb693-e8c1-4476-a5e8-70594106ba9a"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"{", "1", "}"}], "}"}]], "Output",
 CellChangeTimes->{3.790776980860283*^9, 3.790777330192474*^9, 
  3.790777654689259*^9, 3.790777708970964*^9},
 CellLabel->
  "Out[132]=",ExpressionUUID->"d93f9302-6cec-46e2-9fad-dfcad5cfa837"]
}, Open  ]],

Cell[TextData[{
 "Synthesize the value of the current components from the list of ",
 StyleBox["synthValues",
  FontSlant->"Italic"],
 "."
}], "Text",
 CellChangeTimes->{{3.790777887023322*^9, 
  3.79077791119915*^9}},ExpressionUUID->"01c8388a-e994-46ee-a645-\
d3e79ad70cd8"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"Synthesize", "[", 
    RowBox[{"exprComponents_", ",", "synthValues_"}], "]"}], ":=", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"positions", ",", "lastPos", ",", 
       RowBox[{"tmpSynthValues", " ", "=", " ", "synthValues"}], ",", 
       RowBox[{"tmpExprComponents", " ", "=", " ", "exprComponents"}]}], 
      "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"Do", "[", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{
         RowBox[{"positions", " ", "=", " ", 
          RowBox[{"Position", "[", 
           RowBox[{
            RowBox[{"tmpSynthValues", "[", 
             RowBox[{"[", 
              RowBox[{"All", ",", "1"}], "]"}], "]"}], ",", 
            RowBox[{"tmpExprComponents", "[", 
             RowBox[{"[", "i", "]"}], "]"}]}], "]"}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"positions", "\[NotEqual]", " ", 
            RowBox[{"{", "}"}]}], ",", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"lastPos", " ", "=", " ", 
             RowBox[{"First", "@", 
              RowBox[{"Last", "@", "positions"}]}]}], ";", 
            "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{"tmpExprComponents", "[", 
              RowBox[{"[", "i", "]"}], "]"}], " ", "=", " ", 
             RowBox[{"Replace", "[", 
              RowBox[{
               RowBox[{"tmpExprComponents", "[", 
                RowBox[{"[", "i", "]"}], "]"}], ",", 
               RowBox[{"Part", "[", 
                RowBox[{"tmpSynthValues", ",", "lastPos"}], "]"}]}], "]"}]}], 
            ";", "\[IndentingNewLine]", 
            RowBox[{"tmpSynthValues", " ", "=", " ", 
             RowBox[{"Delete", "[", 
              RowBox[{"tmpSynthValues", ",", "lastPos"}], "]"}]}], ";"}]}], 
          "\[IndentingNewLine]", "]"}], ";"}], "\[IndentingNewLine]", ",", 
        RowBox[{"{", 
         RowBox[{"i", ",", "1", ",", 
          RowBox[{"Length", "[", "tmpExprComponents", "]"}]}], "}"}]}], 
       "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"ExprFromComponents", "@", "tmpExprComponents"}]}]}], 
    "\[IndentingNewLine]", "]"}]}], ";"}]], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.79035714595779*^9, 3.7903572493874207`*^9}, {
   3.7903572801192503`*^9, 3.790357312880403*^9}, {3.790359091130979*^9, 
   3.790359092294668*^9}, {3.790360996664217*^9, 3.790361054211101*^9}, {
   3.790361116761746*^9, 3.790361118356138*^9}, {3.7903615802666683`*^9, 
   3.790361587082275*^9}, {3.79036173894415*^9, 3.790361750751802*^9}, {
   3.790361949004196*^9, 3.790361949243352*^9}, {3.790455525533889*^9, 
   3.790455527163363*^9}, {3.790455610599532*^9, 3.790455610874358*^9}, {
   3.7904571522889023`*^9, 3.790457184725666*^9}, {3.790457275631034*^9, 
   3.790457292503612*^9}, {3.790457331959938*^9, 3.7904573508431883`*^9}, {
   3.790458457881886*^9, 3.7904585876572237`*^9}, {3.790458635325519*^9, 
   3.790458638150556*^9}, {3.790776451079596*^9, 3.790776453433712*^9}, 
   3.790776548078702*^9, 3.7907765897318087`*^9},
 CellLabel->"In[13]:=",ExpressionUUID->"36f28f7a-cd07-459e-8029-00f9b517a1ee"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"GetComponents", "[", "synthValue", "]"}]], "Input",
 CellLabel->
  "In[146]:=",ExpressionUUID->"f9577640-e46a-48fb-bbc4-2baa1b2e99b7"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"Term", "[", "\<\"observable\"\>", "]"}], "[", "\<\"Value\"\>", 
   "]"}], "}"}]], "Output",
 CellChangeTimes->{3.7907778794405622`*^9},
 CellLabel->
  "Out[146]=",ExpressionUUID->"21ec6823-3f66-43bf-a139-501bf4c04d36"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Synthesize", "[", "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"GetComponents", "[", "synthValue", "]"}], ",", 
   "\[IndentingNewLine]", 
   RowBox[{"Extract", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{
        RowBox[{
         RowBox[{"Term", "[", "\"\<observable\>\"", "]"}], "[", 
         "\"\<Value\>\"", "]"}], "\[Rule]", "\"\<High\>\""}], ",", 
       RowBox[{
        RowBox[{
         RowBox[{"Term", "[", "\"\<numOp\>\"", "]"}], "[", "\"\<Value\>\"", 
         "]"}], "\[Rule]", "\"\<Greater\>\""}], ",", 
       RowBox[{
        RowBox[{
         RowBox[{"Term", "[", "\"\<logicOp\>\"", "]"}], "[", "\"\<Value\>\"", 
         "]"}], "\[Rule]", "\"\<And\>\""}]}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"{", "1", "}"}], "}"}]}], "]"}]}], "\[IndentingNewLine]", 
  "]"}]], "Input",
 CellLabel->
  "In[133]:=",ExpressionUUID->"5d9b7b03-bf38-4ea4-90d6-aaa4a2215e32"],

Cell[BoxData["\<\"High\"\>"], "Output",
 CellChangeTimes->{3.790777395614747*^9, 3.790777722215321*^9},
 CellLabel->
  "Out[133]=",ExpressionUUID->"1c9d680e-2f01-4b88-8452-6d9f619b1712"]
}, Open  ]],

Cell["Synthesize terminals and nonterminals.", "Text",
 CellChangeTimes->{{3.7907780395947533`*^9, 
  3.7907780458587837`*^9}},ExpressionUUID->"7d818255-aa55-4d33-b1e6-\
8a996aeb1a51"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"SynthesizeNonTerm", "[", 
     RowBox[{"treeSymbol_", ",", "grammar_", ",", "synthesizations_"}], "]"}],
     ":=", 
    RowBox[{"Block", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
       "val", ",", "components", ",", "eval", ",", "matchPos", ",", 
        "newSynth", ",", "newSynthLabel"}], "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"val", " ", "=", " ", 
        RowBox[{"GetValue", "[", 
         RowBox[{"treeSymbol", ",", "grammar"}], "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"components", " ", "=", " ", 
        RowBox[{"GetComponents", "[", "val", "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"matchPos", " ", "=", " ", 
        RowBox[{"MatchPositions", "[", 
         RowBox[{"components", ",", 
          RowBox[{"synthesizations", "[", 
           RowBox[{"[", 
            RowBox[{"All", ",", "1"}], "]"}], "]"}]}], "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"eval", " ", "=", " ", 
        RowBox[{"Synthesize", "[", 
         RowBox[{"components", ",", 
          RowBox[{"Extract", "[", 
           RowBox[{"synthesizations", ",", "matchPos"}], "]"}]}], "]"}]}], 
       ";", "\[IndentingNewLine]", 
       RowBox[{"newSynth", " ", "=", " ", 
        RowBox[{"Delete", "[", 
         RowBox[{"synthesizations", ",", "matchPos"}], "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"newSynthLabel", " ", "=", " ", 
        RowBox[{"ReplaceAll", "[", 
         RowBox[{"treeSymbol", ",", 
          RowBox[{
           RowBox[{"NonTerm", "[", 
            RowBox[{"x_", ",", "_"}], "]"}], "\[RuleDelayed]", 
           RowBox[{
            RowBox[{"NonTerm", "[", "x", "]"}], "[", "\"\<Value\>\"", 
            "]"}]}]}], "]"}]}], ";", "\[IndentingNewLine]", 
       "\[IndentingNewLine]", 
       RowBox[{"Prepend", "[", 
        RowBox[{"newSynth", ",", 
         RowBox[{"newSynthLabel", "\[Rule]", "eval"}]}], "]"}]}]}], 
     "\[IndentingNewLine]", "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"SynthesizeTerm", "[", 
    RowBox[{"treeSymbol_", ",", "synthesizations_"}], "]"}], ":=", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"eval", ",", "new"}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{"(*", " ", 
      RowBox[{
      "Label", " ", "the", " ", "value", " ", "of", " ", "a", " ", 
       "Terminal"}], " ", "*)"}], "\[IndentingNewLine]", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"Length", "[", "treeSymbol", "]"}], "\[Equal]", "2"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"Prepend", "[", 
        RowBox[{"synthesizations", ",", " ", 
         RowBox[{"ReplaceAll", "[", 
          RowBox[{"treeSymbol", ",", 
           RowBox[{
            RowBox[{"Term", "[", 
             RowBox[{"termName_", ",", "value_"}], "]"}], "\[RuleDelayed]", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{
               RowBox[{"Term", "[", "termName", "]"}], "[", "\"\<Value\>\"", 
               "]"}], "\[Rule]", "value"}], ")"}]}]}], "]"}]}], "]"}], ",", 
       "\[IndentingNewLine]", "synthesizations"}], "\[IndentingNewLine]", 
      "]"}]}], "\[IndentingNewLine]", "]"}]}], ";"}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.7608259159282923`*^9, 3.7608261293502274`*^9}, {
   3.760993804648603*^9, 3.760993818856369*^9}, {3.760993962206794*^9, 
   3.760993964499547*^9}, {3.762464072031178*^9, 3.762464112064948*^9}, {
   3.7624643045761833`*^9, 3.762464390148593*^9}, 3.762464423827539*^9, {
   3.7624644673167963`*^9, 3.762464468165412*^9}, 3.762465283151471*^9, 
   3.764024512651712*^9, {3.7640248091439734`*^9, 3.7640248341747427`*^9}, {
   3.7640250122955647`*^9, 3.764025024633459*^9}, {3.790345193352819*^9, 
   3.7903452035879908`*^9}, {3.7903458981323557`*^9, 3.790345901525694*^9}, 
   3.790346083565462*^9, {3.790346123580125*^9, 3.7903461305744133`*^9}, {
   3.790346319902143*^9, 3.790346385673501*^9}, {3.790349639650073*^9, 
   3.7903496495171623`*^9}, {3.7903497153306837`*^9, 3.790349727390431*^9}, {
   3.7903770273002872`*^9, 3.7903770296095753`*^9}, {3.790377086666507*^9, 
   3.790377145004786*^9}, {3.790377183424777*^9, 3.790377241196746*^9}, {
   3.79037728699023*^9, 3.790377287556652*^9}, {3.790377836058153*^9, 
   3.7903778436886177`*^9}, {3.79037853144715*^9, 3.790378531604763*^9}, {
   3.7904552735877943`*^9, 3.790455312297996*^9}, {3.790456171067285*^9, 
   3.790456181776188*^9}, {3.790776667773497*^9, 3.790776683164989*^9}, {
   3.7907769533335333`*^9, 3.790776953645836*^9}},
 CellLabel->"In[14]:=",ExpressionUUID->"eb1b2b68-d657-4bb4-87c4-41912d2b4be6"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"SynthesizeNonTerm", "[", 
  RowBox[{
   RowBox[{"NonTerm", "[", 
    RowBox[{"\"\<expression\>\"", ",", "8"}], "]"}], ",", "grammar", ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"Term", "[", "\"\<observable\>\"", "]"}], "[", "\"\<Value\>\"",
        "]"}], "\[Rule]", "\"\<High\>\""}], ",", 
     RowBox[{
      RowBox[{
       RowBox[{"Term", "[", "\"\<numOp\>\"", "]"}], "[", "\"\<Value\>\"", 
       "]"}], "\[Rule]", "\"\<Greater\>\""}], ",", 
     RowBox[{
      RowBox[{
       RowBox[{"Term", "[", "\"\<logicOp\>\"", "]"}], "[", "\"\<Value\>\"", 
       "]"}], "\[Rule]", "\"\<And\>\""}]}], "}"}]}], "]"}]], "Input",
 CellLabel->
  "In[144]:=",ExpressionUUID->"bf9a6269-49c0-4b2f-a2ed-8647fe8e3022"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{
    RowBox[{
     RowBox[{"NonTerm", "[", "\<\"expression\"\>", "]"}], 
     "[", "\<\"Value\"\>", "]"}], "\[Rule]", "\<\"High\"\>"}], ",", 
   RowBox[{
    RowBox[{
     RowBox[{"Term", "[", "\<\"numOp\"\>", "]"}], "[", "\<\"Value\"\>", "]"}],
     "\[Rule]", "\<\"Greater\"\>"}], ",", 
   RowBox[{
    RowBox[{
     RowBox[{"Term", "[", "\<\"logicOp\"\>", "]"}], "[", "\<\"Value\"\>", 
     "]"}], "\[Rule]", "\<\"And\"\>"}]}], "}"}]], "Output",
 CellChangeTimes->{3.790777795339574*^9},
 CellLabel->
  "Out[144]=",ExpressionUUID->"3df290a8-e5a4-48a0-8f8f-07a427c473dc"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"SynthesizeTerm", "[", 
  RowBox[{
   RowBox[{"Term", "[", 
    RowBox[{"\"\<observable\>\"", ",", "\"\<High\>\""}], "]"}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"Term", "[", "\"\<numOp\>\"", "]"}], "[", "\"\<Value\>\"", 
       "]"}], "\[Rule]", "\"\<Greater\>\""}], ",", 
     RowBox[{
      RowBox[{
       RowBox[{"Term", "[", "\"\<logicOp\>\"", "]"}], "[", "\"\<Value\>\"", 
       "]"}], "\[Rule]", "\"\<And\>\""}]}], "}"}]}], "]"}]], "Input",
 CellChangeTimes->{{3.790777767247191*^9, 3.790777802583853*^9}},
 CellLabel->
  "In[145]:=",ExpressionUUID->"2d5e1caa-3d96-4ca0-9ef5-4f3aced052ba"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{
    RowBox[{
     RowBox[{"Term", "[", "\<\"observable\"\>", "]"}], "[", "\<\"Value\"\>", 
     "]"}], "\[Rule]", "\<\"High\"\>"}], ",", 
   RowBox[{
    RowBox[{
     RowBox[{"Term", "[", "\<\"numOp\"\>", "]"}], "[", "\<\"Value\"\>", "]"}],
     "\[Rule]", "\<\"Greater\"\>"}], ",", 
   RowBox[{
    RowBox[{
     RowBox[{"Term", "[", "\<\"logicOp\"\>", "]"}], "[", "\<\"Value\"\>", 
     "]"}], "\[Rule]", "\<\"And\"\>"}]}], "}"}]], "Output",
 CellChangeTimes->{
  3.7907777557481422`*^9, {3.790777793599224*^9, 3.7907778030139027`*^9}},
 CellLabel->
  "Out[145]=",ExpressionUUID->"4d4e9940-74a8-4243-a544-383347b56da1"]
}, Open  ]],

Cell["Complete tree synthesization.", "Text",
 CellChangeTimes->{{3.790778050211462*^9, 
  3.7907780558032846`*^9}},ExpressionUUID->"9f2aede4-4bbc-451a-9960-\
7adf2b0186f9"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"SynthesizeTree", "[", 
    RowBox[{"graph_", ",", "labels_", ",", "grammar_"}], "]"}], ":=", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "depthFirstScan", ",", "labeledDFS", ",", "symbolType", ",", 
       "synthesized"}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{"(*", " ", 
      RowBox[{
      "Walk", " ", "the", " ", "parse", " ", "tree", " ", "in", " ", "post", 
       " ", "order"}], " ", "*)"}], "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"depthFirstScan", " ", "=", " ", 
       RowBox[{"First", "@", 
        RowBox[{"Last", "@", 
         RowBox[{"Reap", "[", "\[IndentingNewLine]", 
          RowBox[{"DepthFirstScan", "[", 
           RowBox[{"graph", ",", "1", ",", 
            RowBox[{"{", 
             RowBox[{"\"\<PostvisitVertex\>\"", "\[Rule]", 
              RowBox[{"(", 
               RowBox[{
                RowBox[{"Sow", "[", "#", "]"}], "&"}], ")"}]}], "}"}]}], 
           "]"}], "\[IndentingNewLine]", "]"}]}]}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"labeledDFS", " ", "=", " ", 
       RowBox[{"depthFirstScan", " ", "/.", "labels"}]}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"(*", " ", 
       RowBox[{
       "Synthesize", " ", "in", " ", "the", " ", "order", " ", "of", " ", 
        "the", " ", "depthfirstscan"}], " ", "*)"}], "\[IndentingNewLine]", 
      RowBox[{"synthesized", "=", 
       RowBox[{"{", "}"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"Do", "[", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{
         RowBox[{"symbolType", " ", "=", " ", 
          RowBox[{"Head", "[", "s", "]"}]}], ";", "\[IndentingNewLine]", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"symbolType", " ", "===", " ", "Term"}], ",", 
           RowBox[{"synthesized", " ", "=", " ", 
            RowBox[{"SynthesizeTerm", "[", 
             RowBox[{"s", ",", "synthesized"}], "]"}]}]}], "]"}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{"symbolType", " ", "===", " ", "NonTerm"}], ",", 
           RowBox[{"synthesized", " ", "=", " ", 
            RowBox[{"SynthesizeNonTerm", "[", 
             RowBox[{"s", ",", "grammar", ",", "synthesized"}], "]"}]}]}], 
          "]"}], ";"}], "\[IndentingNewLine]", ",", "\[IndentingNewLine]", 
        RowBox[{"{", 
         RowBox[{"s", ",", "labeledDFS"}], "}"}]}], "\[IndentingNewLine]", 
       "]"}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"ToExpression", "@", 
        RowBox[{"ToString", "@", 
         RowBox[{"Return", "[", 
          RowBox[{"synthesized", "[", 
           RowBox[{"[", 
            RowBox[{"1", ",", 
             RowBox[{"-", "1"}]}], "]"}], "]"}], "]"}]}]}], " ", "/.", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"Open", "\[Rule]", "\"\<Open\>\""}], ",", 
         RowBox[{"High", "\[Rule]", "\"\<High\>\""}], ",", 
         RowBox[{"Low", "\[Rule]", "\"\<Low\>\""}], ",", 
         RowBox[{"Close", "\[Rule]", "\"\<Close\>\""}]}], "}"}]}]}]}], 
    "\[IndentingNewLine]", "]"}]}], ";"}]], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.760995468114646*^9, 3.760995495791847*^9}, {
   3.760995528748373*^9, 3.760995627884274*^9}, {3.760995678576338*^9, 
   3.7609957528479137`*^9}, {3.7609961296955547`*^9, 3.760996184585101*^9}, {
   3.7609962173561907`*^9, 3.76099627244386*^9}, {3.7609963440388603`*^9, 
   3.760996423791665*^9}, {3.7609964833759823`*^9, 3.7609965628952827`*^9}, {
   3.760996801168336*^9, 3.7609968020762367`*^9}, 3.760998078283998*^9, {
   3.7609981212385883`*^9, 3.7609981257699842`*^9}, 3.762464311752103*^9, {
   3.762464438154924*^9, 3.762464499620295*^9}, 3.7625262555643873`*^9, {
   3.7628108543121157`*^9, 3.762810855319008*^9}, {3.764025051879121*^9, 
   3.764025098640737*^9}, {3.7651312839477363`*^9, 3.765131285832206*^9}, {
   3.790345006521284*^9, 3.790345074070271*^9}, 3.790345845713934*^9, {
   3.790377343156938*^9, 3.790377354040244*^9}, {3.790377384282391*^9, 
   3.790377384537279*^9}, 3.790377441844515*^9, 3.790377540663052*^9, {
   3.7903778601090393`*^9, 3.7903778742483053`*^9}, 3.7904534889048843`*^9, {
   3.790624569165053*^9, 3.790624606973762*^9}, {3.790624804464781*^9, 
   3.790624806952242*^9}},
 CellLabel->"In[16]:=",ExpressionUUID->"7ab65703-bb69-4f34-8664-807662f2a19e"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"edgeList1", " ", "=", " ", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"1", "\[DirectedEdge]", "2"}], ",", 
     RowBox[{"1", "\[DirectedEdge]", "3"}], ",", 
     RowBox[{"1", "\[DirectedEdge]", "4"}], ",", 
     RowBox[{"3", "\[DirectedEdge]", "5"}], ",", 
     RowBox[{"3", "\[DirectedEdge]", "6"}], ",", 
     RowBox[{"3", "\[DirectedEdge]", "7"}], ",", 
     RowBox[{"6", "\[DirectedEdge]", "8"}], ",", 
     RowBox[{"8", "\[DirectedEdge]", "9"}], ",", 
     RowBox[{"7", "\[DirectedEdge]", "10"}], ",", 
     RowBox[{"10", "\[DirectedEdge]", "11"}], ",", 
     RowBox[{"10", "\[DirectedEdge]", "12"}], ",", 
     RowBox[{"4", "\[DirectedEdge]", "13"}], ",", 
     RowBox[{"4", "\[DirectedEdge]", "14"}], ",", 
     RowBox[{"4", "\[DirectedEdge]", "15"}], ",", 
     RowBox[{"14", "\[DirectedEdge]", "16"}], ",", 
     RowBox[{"16", "\[DirectedEdge]", "17"}], ",", 
     RowBox[{"15", "\[DirectedEdge]", "18"}], ",", 
     RowBox[{"18", "\[DirectedEdge]", "19"}]}], "}"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"labels1", " ", "=", " ", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"1", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\"\<cond\>\"", ",", "1"}], "]"}]}], ",", 
     RowBox[{"2", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\"\<logicOp\>\"", ",", "\"\<And\>\""}], "]"}]}], ",", 
     RowBox[{"3", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\"\<cond\>\"", ",", "3"}], "]"}]}], ",", 
     RowBox[{"4", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\"\<cond\>\"", ",", "3"}], "]"}]}], ",", 
     RowBox[{"5", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\"\<numOp\>\"", ",", "\"\<Greater\>\""}], "]"}]}], " ", ",", 
     RowBox[{"6", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\"\<numQuant\>\"", ",", "5"}], "]"}]}], " ", ",", 
     RowBox[{"7", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\"\<numQuant\>\"", ",", "5"}], "]"}]}], " ", ",", 
     RowBox[{"8", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\"\<expression\>\"", ",", "8"}], "]"}]}], " ", ",", 
     RowBox[{"9", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\"\<observable\>\"", ",", "\"\<High\>\""}], "]"}]}], " ", ",", 
     RowBox[{"10", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\"\<expression\>\"", ",", "7"}], "]"}]}], " ", ",", 
     RowBox[{"11", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\"\<lag\>\"", ",", "\"\<3\>\""}], "]"}]}], " ", ",", 
     RowBox[{"12", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\"\<observable\>\"", ",", "\"\<Low\>\""}], "]"}]}], " ", ",", 
     
     RowBox[{"13", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\"\<numOp\>\"", ",", "\"\<Less\>\""}], "]"}]}], " ", ",", 
     RowBox[{"14", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\"\<numQuant\>\"", ",", "5"}], "]"}]}], " ", ",", 
     RowBox[{"15", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\"\<numQuant\>\"", ",", "5"}], "]"}]}], " ", ",", 
     RowBox[{"16", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\"\<expression\>\"", ",", "8"}], "]"}]}], " ", ",", 
     RowBox[{"17", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\"\<observable\>\"", ",", "\"\<Open\>\""}], "]"}]}], " ", ",", 
     RowBox[{"18", "\[Rule]", " ", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\"\<expression\>\"", ",", "8"}], "]"}]}], ",", 
     RowBox[{"19", "\[Rule]", " ", 
      RowBox[{"Term", "[", 
       RowBox[{"\"\<observable\>\"", ",", "\"\<Close\>\""}], "]"}]}]}], 
    "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"g1", " ", "=", " ", 
  RowBox[{"Graph", "[", 
   RowBox[{"edgeList1", ",", 
    RowBox[{"VertexLabels", "\[Rule]", "labels1"}]}], "]"}]}]}], "Input",
 CellChangeTimes->{{3.7901993475777073`*^9, 3.790199779879158*^9}, {
  3.7903422096006947`*^9, 3.790342304231863*^9}, {3.7903429601616507`*^9, 
  3.7903429816246862`*^9}, {3.79034301364384*^9, 3.7903431496103077`*^9}, {
  3.7903435938111753`*^9, 3.790343620937538*^9}, {3.7903436558304567`*^9, 
  3.790343674848072*^9}, {3.790345089338812*^9, 3.790345089652974*^9}, {
  3.790453021331588*^9, 3.79045302244851*^9}, {3.7907849882054443`*^9, 
  3.790784988448032*^9}},
 CellLabel->"In[78]:=",ExpressionUUID->"d422a228-1249-4f3c-9929-cb45137abfd3"],

Cell[BoxData[
 GraphicsBox[
  NamespaceBox["NetworkGraphics",
   DynamicModuleBox[{Typeset`graph = HoldComplete[
     Graph[{1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 
      19}, {{{1, 2}, {1, 3}, {1, 4}, {3, 5}, {3, 6}, {3, 7}, {6, 8}, {8, 9}, {
       7, 10}, {10, 11}, {10, 12}, {4, 13}, {4, 14}, {4, 15}, {14, 16}, {16, 
       17}, {15, 18}, {18, 19}}, Null}, {
      VertexLabels -> {
        6 -> $CellContext`NonTerm["numQuant", 5], 
         18 -> $CellContext`NonTerm["expression", 8], 
         3 -> $CellContext`NonTerm["cond", 3], 
         11 -> $CellContext`Term["lag", "3"], 
         5 -> $CellContext`Term["numOp", "Greater"], 
         8 -> $CellContext`NonTerm["expression", 8], 
         7 -> $CellContext`NonTerm["numQuant", 5], 
         14 -> $CellContext`NonTerm["numQuant", 5], 
         10 -> $CellContext`NonTerm["expression", 7], 
         9 -> $CellContext`Term["observable", "High"], 
         4 -> $CellContext`NonTerm["cond", 3], 
         17 -> $CellContext`Term["observable", "Open"], 
         16 -> $CellContext`NonTerm["expression", 8], 
         12 -> $CellContext`Term["observable", "Low"], 
         13 -> $CellContext`Term["numOp", "Less"], 
         2 -> $CellContext`Term["logicOp", "And"], 
         15 -> $CellContext`NonTerm["numQuant", 5], 
         1 -> $CellContext`NonTerm["cond", 1], 
         19 -> $CellContext`Term["observable", "Close"]}}]]}, 
    TagBox[GraphicsGroupBox[{
       {Hue[0.6, 0.7, 0.5], Opacity[0.7], Arrowheads[Medium], 
        ArrowBox[CompressedData["
1:eJxTTMoPSmVmYGAQAmImKJYRjEs6ufy3/SPp1i9vPNkdIPRx+1dXkrcXljM6
oMvfSlpmmCHzFqd83H7RyVrGXA4weXT1DFAAUf/dHl0eIv7cHpf8bTD/L1we
3b60ii+h6xNYHHDJw/i45HWapV9cYhKAy6O7B8Z/AKXR3QPjP0DR9xyDDwsH
7Oq/45RHD0dc/oGpR/cPjA+TR1cP48PMR1cP48PkATCkB9M=
         "], 
         0.03702325155936649]}, 
       {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[
        0.7]}], {
         DiskBox[{1.7284635393598995, 2.9110964873429888}, 
          0.03702325155936649], InsetBox[
          RowBox[{"NonTerm", "(", 
           RowBox[{"\<\"cond\"\>", ",", "1"}], ")"}], 
          Offset[{2, 2}, {1.765486790919266, 2.9481197389023555}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{0.1819435304589368, 2.183322365507242}, 
          0.03702325155936649], InsetBox[
          RowBox[{"Term", "(", 
           RowBox[{"\<\"logicOp\"\>", ",", "\<\"And\"\>"}], ")"}], 
          Offset[{2, 2}, {0.21896678201830327, 2.2203456170666085}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{0.9097176522946839, 2.183322365507242}, 
          0.03702325155936649], InsetBox[
          RowBox[{"NonTerm", "(", 
           RowBox[{"\<\"cond\"\>", ",", "3"}], ")"}], 
          Offset[{2, 2}, {0.9467409038540504, 2.2203456170666085}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{3.2749835482608622, 2.183322365507242}, 
          0.03702325155936649], InsetBox[
          RowBox[{"NonTerm", "(", 
           RowBox[{"\<\"cond\"\>", ",", "3"}], ")"}], 
          Offset[{2, 2}, {3.312006799820229, 2.2203456170666085}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{0., 1.4555482436714944}, 0.03702325155936649], InsetBox[
          RowBox[{"Term", "(", 
           RowBox[{"\<\"numOp\"\>", ",", "\<\"Greater\"\>"}], ")"}], 
          Offset[{2, 2}, {0.03702325155936649, 1.4925714952308609}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{0.7277741218357472, 1.4555482436714944}, 
          0.03702325155936649], InsetBox[
          RowBox[{"NonTerm", "(", 
           RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], 
          Offset[{2, 2}, {0.7647973733951137, 1.4925714952308609}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{1.819435304589368, 1.4555482436714944}, 
          0.03702325155936649], InsetBox[
          RowBox[{"NonTerm", "(", 
           RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], 
          Offset[{2, 2}, {1.8564585561487346, 1.4925714952308609}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{0.7277741218357472, 0.727774121835747}, 
          0.03702325155936649], InsetBox[
          RowBox[{"NonTerm", "(", 
           RowBox[{"\<\"expression\"\>", ",", "8"}], ")"}], 
          Offset[{2, 2}, {0.7647973733951137, 0.7647973733951134}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{0.7277741218357472, 0.}, 0.03702325155936649], InsetBox[
          RowBox[{"Term", "(", 
           RowBox[{"\<\"observable\"\>", ",", "\<\"High\"\>"}], ")"}], 
          Offset[{2, 2}, {0.7647973733951137, 0.03702325155936649}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{1.819435304589368, 0.727774121835747}, 0.03702325155936649],
          InsetBox[
          RowBox[{"NonTerm", "(", 
           RowBox[{"\<\"expression\"\>", ",", "7"}], ")"}], 
          Offset[{2, 2}, {1.8564585561487346, 0.7647973733951134}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{1.4555482436714944, 0.}, 0.03702325155936649], InsetBox[
          RowBox[{"Term", "(", 
           RowBox[{"\<\"lag\"\>", ",", "\<\"3\"\>"}], ")"}], 
          Offset[{2, 2}, {1.4925714952308609, 0.03702325155936649}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{2.183322365507242, 0.}, 0.03702325155936649], InsetBox[
          RowBox[{"Term", "(", 
           RowBox[{"\<\"observable\"\>", ",", "\<\"Low\"\>"}], ")"}], 
          Offset[{2, 2}, {2.2203456170666085, 0.03702325155936649}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{2.5472094264251153, 1.4555482436714944}, 
          0.03702325155936649], InsetBox[
          RowBox[{"Term", "(", 
           RowBox[{"\<\"numOp\"\>", ",", "\<\"Less\"\>"}], ")"}], 
          Offset[{2, 2}, {2.584232677984482, 1.4925714952308609}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{3.2749835482608622, 1.4555482436714944}, 
          0.03702325155936649], InsetBox[
          RowBox[{"NonTerm", "(", 
           RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], 
          Offset[{2, 2}, {3.312006799820229, 1.4925714952308609}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{4.00275767009661, 1.4555482436714944}, 0.03702325155936649],
          InsetBox[
          RowBox[{"NonTerm", "(", 
           RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], 
          Offset[{2, 2}, {4.039780921655977, 1.4925714952308609}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{3.2749835482608622, 0.727774121835747}, 
          0.03702325155936649], InsetBox[
          RowBox[{"NonTerm", "(", 
           RowBox[{"\<\"expression\"\>", ",", "8"}], ")"}], 
          Offset[{2, 2}, {3.312006799820229, 0.7647973733951134}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{3.2749835482608622, 0.}, 0.03702325155936649], InsetBox[
          RowBox[{"Term", "(", 
           RowBox[{"\<\"observable\"\>", ",", "\<\"Open\"\>"}], ")"}], 
          Offset[{2, 2}, {3.312006799820229, 0.03702325155936649}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{4.00275767009661, 0.727774121835747}, 0.03702325155936649], 
         InsetBox[
          RowBox[{"NonTerm", "(", 
           RowBox[{"\<\"expression\"\>", ",", "8"}], ")"}], 
          Offset[{2, 2}, {4.039780921655977, 0.7647973733951134}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{4.00275767009661, 0.}, 0.03702325155936649], InsetBox[
          RowBox[{"Term", "(", 
           RowBox[{"\<\"observable\"\>", ",", "\<\"Close\"\>"}], ")"}], 
          Offset[{2, 2}, {4.039780921655977, 0.03702325155936649}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}}}],
     MouseAppearanceTag["NetworkGraphics"]],
    AllowKernelInitialization->False]],
  DefaultBaseStyle->{
   "NetworkGraphics", FrontEnd`GraphicsHighlightColor -> Hue[0.8, 1., 0.6]},
  FormatType->TraditionalForm,
  FrameTicks->None]], "Output",
 CellChangeTimes->{3.7907849917784843`*^9, 3.790794475207097*^9, 
  3.79079737695448*^9, 3.790800728836031*^9},
 CellLabel->"Out[80]=",ExpressionUUID->"43303d48-f3fe-4864-880f-8e614ed412c0"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"SynthesizeTree", "[", 
   RowBox[{"g1", ",", "labels1", ",", "grammar"}], "]"}], " ", "//", " ", 
  "FullForm"}]], "Input",
 CellChangeTimes->{{3.790453468105657*^9, 3.790453497303897*^9}},
 CellLabel->"In[81]:=",ExpressionUUID->"32448206-7dfc-4813-9eed-06133cc5405a"],

Cell[BoxData[
 TagBox[
  StyleBox[
   RowBox[{"And", "[", 
    RowBox[{
     RowBox[{"Greater", "[", 
      RowBox[{"\"\<High\>\"", ",", 
       RowBox[{"Prev", "[", 
        RowBox[{"\"\<Low\>\"", ",", "3"}], "]"}]}], "]"}], ",", 
     RowBox[{"Less", "[", 
      RowBox[{"\"\<Open\>\"", ",", "\"\<Close\>\""}], "]"}]}], "]"}],
   ShowSpecialCharacters->False,
   ShowStringCharacters->True,
   NumberMarks->True],
  FullForm]], "Output",
 CellChangeTimes->{
  3.790453398514769*^9, {3.790453470202586*^9, 3.790453497519857*^9}, {
   3.790455279016727*^9, 3.790455307294629*^9}, 3.790455532084416*^9, 
   3.7904558159932137`*^9, {3.79045617588008*^9, 3.790456187275242*^9}, 
   3.790457195190936*^9, 3.790457359186005*^9, 3.790458653856529*^9, 
   3.790469486097183*^9, 3.790628847384094*^9, 3.790784993688837*^9, 
   3.7908007305575047`*^9},
 CellLabel->
  "Out[81]//FullForm=",ExpressionUUID->"33bdff35-b314-4b85-923a-698a4817974e"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"edgeList2", " ", "=", " ", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"1", "\[DirectedEdge]", "2"}], ",", 
     RowBox[{"1", "\[DirectedEdge]", "3"}], ",", 
     RowBox[{"1", "\[DirectedEdge]", "4"}], ",", 
     RowBox[{"3", "\[DirectedEdge]", "5"}], ",", 
     RowBox[{"3", "\[DirectedEdge]", "6"}], ",", 
     RowBox[{"3", "\[DirectedEdge]", "7"}], ",", 
     RowBox[{"6", "\[DirectedEdge]", "8"}], ",", 
     RowBox[{"6", "\[DirectedEdge]", "9"}], ",", 
     RowBox[{"9", "\[DirectedEdge]", "10"}], ",", 
     RowBox[{"9", "\[DirectedEdge]", "11"}], ",", 
     RowBox[{"9", "\[DirectedEdge]", "12"}], ",", 
     RowBox[{"7", "\[DirectedEdge]", "13"}], ",", 
     RowBox[{"13", "\[DirectedEdge]", "14"}], ",", 
     RowBox[{"13", "\[DirectedEdge]", "15"}], ",", 
     RowBox[{"13", "\[DirectedEdge]", "16"}], ",", 
     RowBox[{"4", "\[DirectedEdge]", "17"}], ",", 
     RowBox[{"4", "\[DirectedEdge]", "18"}], ",", 
     RowBox[{"4", "\[DirectedEdge]", "19"}], ",", 
     RowBox[{"18", "\[DirectedEdge]", "20"}], ",", 
     RowBox[{"20", "\[DirectedEdge]", "21"}], ",", 
     RowBox[{"20", "\[DirectedEdge]", "22"}], ",", 
     RowBox[{"19", "\[DirectedEdge]", "23"}], ",", 
     RowBox[{"23", "\[DirectedEdge]", "24"}]}], "}"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"labels2", " ", "=", " ", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"1", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\"\<cond\>\"", ",", "1"}], "]"}]}], ",", 
     RowBox[{"2", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\"\<logicOp\>\"", ",", "\"\<Or\>\""}], "]"}]}], ",", 
     RowBox[{"3", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\"\<cond\>\"", ",", "3"}], "]"}]}], ",", 
     RowBox[{"4", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\"\<cond\>\"", ",", "3"}], "]"}]}], ",", 
     RowBox[{"5", "\[Rule]", " ", 
      RowBox[{"Term", "[", 
       RowBox[{"\"\<numOp\>\"", ",", "\"\<Less\>\""}], "]"}]}], ",", 
     RowBox[{"6", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\"\<numQuant\>\"", ",", "4"}], "]"}]}], " ", ",", 
     RowBox[{"7", "\[Rule]", " ", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\"\<numQuant\>\"", ",", "5"}], "]"}]}], ",", 
     RowBox[{"8", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\"\<factor\>\"", ",", "\"\<1.05\>\""}], "]"}]}], " ", ",", 
     RowBox[{"9", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\"\<expression\>\"", ",", "6"}], "]"}]}], " ", ",", 
     RowBox[{"10", "\[Rule]", " ", 
      RowBox[{"Term", "[", 
       RowBox[{"\"\<techInd\>\"", ",", "\"\<SMA\>\""}], "]"}]}], ",", 
     RowBox[{"11", "\[Rule]", " ", 
      RowBox[{"Term", "[", 
       RowBox[{"\"\<observable\>\"", ",", "\"\<Close\>\""}], "]"}]}], ",", 
     RowBox[{"12", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\"\<window\>\"", ",", "\"\<20\>\""}], "]"}]}], " ", ",", 
     RowBox[{"13", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\"\<expression\>\"", ",", "6"}], "]"}]}], " ", ",", 
     RowBox[{"14", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\"\<techInd\>\"", ",", "\"\<SMA\>\""}], "]"}]}], " ", ",", 
     RowBox[{"15", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\"\<observable\>\"", ",", "\"\<Close\>\""}], "]"}]}], " ", 
     ",", 
     RowBox[{"16", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\"\<window\>\"", ",", "\"\<40\>\""}], "]"}]}], " ", ",", 
     RowBox[{"17", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\"\<numOp\>\"", ",", "\"\<Less\>\""}], "]"}]}], " ", ",", 
     RowBox[{"18", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\"\<numQuant\>\"", ",", "5"}], "]"}]}], " ", ",", 
     RowBox[{"19", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\"\<numQuant\>\"", ",", "5"}], "]"}]}], " ", ",", 
     RowBox[{"20", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\"\<expression\>\"", ",", "7"}], "]"}]}], ",", 
     RowBox[{"21", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\"\<lag\>\"", ",", "\"\<2\>\""}], "]"}]}], ",", 
     RowBox[{"22", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\"\<observable\>\"", ",", "\"\<Close\>\""}], "]"}]}], ",", 
     RowBox[{"23", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\"\<expression\>\"", ",", "8"}], "]"}]}], ",", 
     RowBox[{"24", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\"\<observable\>\"", ",", "\"\<High\>\""}], "]"}]}]}], 
    "}"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{"g2", " ", "=", " ", 
  RowBox[{"Graph", "[", 
   RowBox[{"edgeList2", ",", 
    RowBox[{"VertexLabels", "\[Rule]", "labels2"}]}], "]"}]}]}], "Input",
 CellChangeTimes->{{3.7904530498962917`*^9, 3.790453050048305*^9}, {
  3.790453091828443*^9, 3.7904533618387403`*^9}, {3.790453531558099*^9, 
  3.790453716100666*^9}, {3.7904688458883944`*^9, 3.7904688524746523`*^9}, {
  3.790469329652884*^9, 3.790469351099359*^9}, {3.790469493024211*^9, 
  3.790469498056683*^9}, {3.790784997020368*^9, 3.790784997211808*^9}},
 CellLabel->"In[82]:=",ExpressionUUID->"b4317d5f-dfa0-4326-a688-fb99011c98a0"],

Cell[BoxData[
 GraphicsBox[
  NamespaceBox["NetworkGraphics",
   DynamicModuleBox[{Typeset`graph = HoldComplete[
     Graph[{1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19,
       20, 21, 22, 23, 
      24}, {{{1, 2}, {1, 3}, {1, 4}, {3, 5}, {3, 6}, {3, 7}, {6, 8}, {6, 9}, {
       9, 10}, {9, 11}, {9, 12}, {7, 13}, {13, 14}, {13, 15}, {13, 16}, {4, 
       17}, {4, 18}, {4, 19}, {18, 20}, {20, 21}, {20, 22}, {19, 23}, {23, 
       24}}, Null}, {
      VertexLabels -> {
        6 -> $CellContext`NonTerm["numQuant", 4], 
         21 -> $CellContext`Term["lag", "2"], 
         18 -> $CellContext`NonTerm["numQuant", 5], 
         23 -> $CellContext`NonTerm["expression", 8], 
         24 -> $CellContext`Term["observable", "High"], 
         22 -> $CellContext`Term["observable", "Close"], 
         3 -> $CellContext`NonTerm["cond", 3], 
         20 -> $CellContext`NonTerm["expression", 7], 
         11 -> $CellContext`Term["observable", "Close"], 
         5 -> $CellContext`Term["numOp", "Less"], 
         8 -> $CellContext`Term["factor", "1.05"], 
         7 -> $CellContext`NonTerm["numQuant", 5], 
         14 -> $CellContext`Term["techInd", "SMA"], 
         10 -> $CellContext`Term["techInd", "SMA"], 
         9 -> $CellContext`NonTerm["expression", 6], 
         4 -> $CellContext`NonTerm["cond", 3], 
         17 -> $CellContext`Term["numOp", "Less"], 
         16 -> $CellContext`Term["window", "40"], 
         12 -> $CellContext`Term["window", "20"], 
         13 -> $CellContext`NonTerm["expression", 6], 
         2 -> $CellContext`Term["logicOp", "Or"], 
         15 -> $CellContext`Term["observable", "Close"], 
         1 -> $CellContext`NonTerm["cond", 1], 
         19 -> $CellContext`NonTerm["numQuant", 5]}}]]}, 
    TagBox[GraphicsGroupBox[{
       {Hue[0.6, 0.7, 0.5], Opacity[0.7], Arrowheads[0.02143628275493949], 
        ArrowBox[CompressedData["
1:eJxTTMoPSmVmYGAQB2ImKD5wT35tnx2LQ+WSw6WbeZkdpveaBCtcfG6/rWyp
Qe+UP/bo8hySNU8y87/ilOf13bkoy0XQASaPrp4BCiDqP2PIQ8Qf2+OSh/BZ
HWDy6PZtBdM8OOVf6nOz/10tgFMe4h8RuDy6eyD0ZfsqFHGEPMT+N3B5dPfC
+DB5dPUw82HhhC4P4+OSh8Tfd7g8un2vwP5ncMAlD+PjkldjenvwmhEXXB49
PGF8mHr08ITxYfLo6l1ex853/saHYT5M3jAr3e7GHUG4PLp5MD5MHgD0NTcD

         "], 0.0433963923053807]}, 
       {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[
        0.7]}], {
         DiskBox[{2.530545570883845, 2.3816899490671486}, 0.0433963923053807],
          InsetBox[
          RowBox[{"NonTerm", "(", 
           RowBox[{"\<\"cond\"\>", ",", "1"}], ")"}], 
          Offset[{2, 2}, {2.5739419631892257, 2.425086341372529}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{0.7442781090834839, 1.7862674618003616}, 
          0.0433963923053807], InsetBox[
          RowBox[{"Term", "(", 
           RowBox[{"\<\"logicOp\"\>", ",", "\<\"Or\"\>"}], ")"}], 
          Offset[{2, 2}, {0.7876745013888646, 1.8296638541057422}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{1.339700596350271, 1.7862674618003616}, 0.0433963923053807],
          InsetBox[
          RowBox[{"NonTerm", "(", 
           RowBox[{"\<\"cond\"\>", ",", "3"}], ")"}], 
          Offset[{2, 2}, {1.3830969886556517, 1.8296638541057422}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{4.316813032684206, 1.7862674618003616}, 0.0433963923053807],
          InsetBox[
          RowBox[{"NonTerm", "(", 
           RowBox[{"\<\"cond\"\>", ",", "3"}], ")"}], 
          Offset[{2, 2}, {4.360209424989587, 1.8296638541057422}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{0., 1.1908449745335743}, 0.0433963923053807], InsetBox[
          RowBox[{"Term", "(", 
           RowBox[{"\<\"numOp\"\>", ",", "\<\"Less\"\>"}], ")"}], 
          Offset[{2, 2}, {0.0433963923053807, 1.234241366838955}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{0.5954224872667871, 1.1908449745335743}, 
          0.0433963923053807], InsetBox[
          RowBox[{"NonTerm", "(", 
           RowBox[{"\<\"numQuant\"\>", ",", "4"}], ")"}], 
          Offset[{2, 2}, {0.6388188795721679, 1.234241366838955}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{2.679401192700542, 1.1908449745335743}, 0.0433963923053807],
          InsetBox[
          RowBox[{"NonTerm", "(", 
           RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], 
          Offset[{2, 2}, {2.7227975850059227, 1.234241366838955}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{0.2977112436333936, 0.5954224872667873}, 
          0.0433963923053807], InsetBox[
          RowBox[{"Term", "(", 
           RowBox[{"\<\"factor\"\>", ",", "\<\"1.05\"\>"}], ")"}], 
          Offset[{2, 2}, {0.34110763593877425, 0.638818879572168}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{0.8931337309001807, 0.5954224872667873}, 
          0.0433963923053807], InsetBox[
          RowBox[{"NonTerm", "(", 
           RowBox[{"\<\"expression\"\>", ",", "6"}], ")"}], 
          Offset[{2, 2}, {0.9365301232055614, 0.638818879572168}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{0.2977112436333936, 0.}, 0.0433963923053807], InsetBox[
          RowBox[{"Term", "(", 
           RowBox[{"\<\"techInd\"\>", ",", "\<\"SMA\"\>"}], ")"}], 
          Offset[{2, 2}, {0.34110763593877425, 0.0433963923053807}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{0.8931337309001807, 0.}, 0.0433963923053807], InsetBox[
          RowBox[{"Term", "(", 
           RowBox[{"\<\"observable\"\>", ",", "\<\"Close\"\>"}], ")"}], 
          Offset[{2, 2}, {0.9365301232055614, 0.0433963923053807}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{1.4885562181669678, 0.}, 0.0433963923053807], InsetBox[
          RowBox[{"Term", "(", 
           RowBox[{"\<\"window\"\>", ",", "\<\"20\"\>"}], ")"}], 
          Offset[{2, 2}, {1.5319526104723484, 0.0433963923053807}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{2.679401192700542, 0.5954224872667873}, 0.0433963923053807],
          InsetBox[
          RowBox[{"NonTerm", "(", 
           RowBox[{"\<\"expression\"\>", ",", "6"}], ")"}], Offset[{2, 2}, 
          {2.7227975850059227, 0.638818879572168}], ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{2.083978705433755, 0.}, 0.0433963923053807], InsetBox[
          RowBox[{"Term", "(", 
           RowBox[{"\<\"techInd\"\>", ",", "\<\"SMA\"\>"}], ")"}], 
          Offset[{2, 2}, {2.1273750977391357, 0.0433963923053807}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{2.679401192700542, 0.}, 0.0433963923053807], InsetBox[
          RowBox[{"Term", "(", 
           RowBox[{"\<\"observable\"\>", ",", "\<\"Close\"\>"}], ")"}], 
          Offset[{2, 2}, {2.7227975850059227, 0.0433963923053807}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{3.274823679967329, 0.}, 0.0433963923053807], InsetBox[
          RowBox[{"Term", "(", 
           RowBox[{"\<\"window\"\>", ",", "\<\"40\"\>"}], ")"}], 
          Offset[{2, 2}, {3.3182200722727098, 0.0433963923053807}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{3.5725349236007227, 1.1908449745335743}, 
          0.0433963923053807], InsetBox[
          RowBox[{"Term", "(", 
           RowBox[{"\<\"numOp\"\>", ",", "\<\"Less\"\>"}], ")"}], 
          Offset[{2, 2}, {3.6159313159061033, 1.234241366838955}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{4.167957410867509, 1.1908449745335743}, 0.0433963923053807],
          InsetBox[
          RowBox[{"NonTerm", "(", 
           RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], 
          Offset[{2, 2}, {4.21135380317289, 1.234241366838955}], ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{5.06109114176769, 1.1908449745335743}, 0.0433963923053807], 
         InsetBox[
          RowBox[{"NonTerm", "(", 
           RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], 
          Offset[{2, 2}, {5.104487534073071, 1.234241366838955}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{4.167957410867509, 0.5954224872667873}, 0.0433963923053807],
          InsetBox[
          RowBox[{"NonTerm", "(", 
           RowBox[{"\<\"expression\"\>", ",", "7"}], ")"}], 
          Offset[{2, 2}, {4.21135380317289, 0.638818879572168}], ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{3.870246167234116, 0.}, 0.0433963923053807], InsetBox[
          RowBox[{"Term", "(", 
           RowBox[{"\<\"lag\"\>", ",", "\<\"2\"\>"}], ")"}], 
          Offset[{2, 2}, {3.913642559539497, 0.0433963923053807}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{4.465668654500903, 0.}, 0.0433963923053807], InsetBox[
          RowBox[{"Term", "(", 
           RowBox[{"\<\"observable\"\>", ",", "\<\"Close\"\>"}], ")"}], 
          Offset[{2, 2}, {4.509065046806284, 0.0433963923053807}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{5.06109114176769, 0.5954224872667873}, 0.0433963923053807], 
         InsetBox[
          RowBox[{"NonTerm", "(", 
           RowBox[{"\<\"expression\"\>", ",", "8"}], ")"}], 
          Offset[{2, 2}, {5.104487534073071, 0.638818879572168}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{5.06109114176769, 0.}, 0.0433963923053807], InsetBox[
          RowBox[{"Term", "(", 
           RowBox[{"\<\"observable\"\>", ",", "\<\"High\"\>"}], ")"}], 
          Offset[{2, 2}, {5.104487534073071, 0.0433963923053807}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}}}],
     MouseAppearanceTag["NetworkGraphics"]],
    AllowKernelInitialization->False]],
  DefaultBaseStyle->{
   "NetworkGraphics", FrontEnd`GraphicsHighlightColor -> Hue[0.8, 1., 0.6]},
  FormatType->TraditionalForm,
  FrameTicks->None]], "Output",
 CellChangeTimes->{3.790784999843305*^9, 3.790794476739156*^9, 
  3.790797378567428*^9, 3.790800732404508*^9},
 CellLabel->"Out[84]=",ExpressionUUID->"cca4017f-8477-4f1a-9043-77e0318a793a"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"SynthesizeTree", "[", 
   RowBox[{"g2", ",", "labels2", ",", "grammar"}], "]"}], "//", 
  "FullForm"}]], "Input",
 CellChangeTimes->{{3.7904537703546457`*^9, 3.790453790853676*^9}, {
  3.790624750739809*^9, 3.790624752183219*^9}, {3.7906248224184*^9, 
  3.790624823809453*^9}},
 CellLabel->"In[85]:=",ExpressionUUID->"888fe5d3-d03d-481c-9fb7-de8fab3b9e8a"],

Cell[BoxData[
 TagBox[
  StyleBox[
   RowBox[{"Or", "[", 
    RowBox[{
     RowBox[{"Less", "[", 
      RowBox[{
       RowBox[{"Times", "[", 
        RowBox[{"1.05`", ",", 
         RowBox[{"SMA", "[", 
          RowBox[{"\"\<Close\>\"", ",", "20"}], "]"}]}], "]"}], ",", 
       RowBox[{"SMA", "[", 
        RowBox[{"\"\<Close\>\"", ",", "40"}], "]"}]}], "]"}], ",", 
     RowBox[{"Less", "[", 
      RowBox[{
       RowBox[{"Prev", "[", 
        RowBox[{"\"\<Close\>\"", ",", "2"}], "]"}], ",", "\"\<High\>\""}], 
      "]"}]}], "]"}],
   ShowSpecialCharacters->False,
   ShowStringCharacters->True,
   NumberMarks->True],
  FullForm]], "Output",
 CellChangeTimes->{{3.790453772584498*^9, 3.790453791569374*^9}, 
   3.790455540513533*^9, 3.7904586610835447`*^9, 3.7904688562861958`*^9, 
   3.790469522094696*^9, 3.790624559774391*^9, 3.790624611474588*^9, {
   3.790624726961815*^9, 3.7906247523899593`*^9}, {3.790624816036557*^9, 
   3.790624824069582*^9}, 3.7907791633134193`*^9, 3.790800734082041*^9},
 CellLabel->
  "Out[85]//FullForm=",ExpressionUUID->"461ee74d-68cd-4def-b65a-1f30c2d7e534"]
}, Open  ]]
}, Closed]]
}, Open  ]],

Cell[CellGroupData[{

Cell["Operations on trees", "Section",
 CellChangeTimes->{{3.790458933537712*^9, 
  3.7904589364573793`*^9}},ExpressionUUID->"b7490d6f-4c75-440d-9324-\
b62f58f03dc2"],

Cell["Tree manipulations operations.", "Text",
 CellChangeTimes->{{3.790778127381411*^9, 
  3.7907781339897623`*^9}},ExpressionUUID->"04e26849-ad0e-4cb7-b9c7-\
ab645edda6fc"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"RestartLabelsAt", "[", 
    RowBox[{"graph_", ",", "labels_", ",", 
     RowBox[{"startNum_", " ", ":", " ", "1"}]}], "]"}], ":=", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"replaceRules", ",", "newEdges", ",", "newLabels"}], "}"}], ",",
      "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"replaceRules", " ", "=", " ", 
       RowBox[{"Thread", "[", 
        RowBox[{
         RowBox[{"VertexList", "[", "graph", "]"}], "\[Rule]", 
         RowBox[{"Range", "[", 
          RowBox[{"startNum", ",", 
           RowBox[{"startNum", "+", 
            RowBox[{"Length", "[", 
             RowBox[{"VertexList", "[", "graph", "]"}], "]"}], "-", "1"}]}], 
          "]"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"newEdges", " ", "=", " ", 
       RowBox[{
        RowBox[{"EdgeList", "[", "graph", "]"}], "/.", "replaceRules"}]}], 
      ";", "\[IndentingNewLine]", 
      RowBox[{"newLabels", " ", "=", " ", 
       RowBox[{"MapAt", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"#", "/.", "replaceRules"}], "&"}], ",", "labels", ",", 
         RowBox[{"{", 
          RowBox[{"All", ",", "1"}], "}"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"Graph", "[", 
         RowBox[{"newEdges", ",", 
          RowBox[{"VertexLabels", "\[Rule]", "newLabels"}]}], "]"}], ",", 
        "newLabels"}], "}"}]}]}], "\[IndentingNewLine]", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"Subtree", "[", 
    RowBox[{"graph_", ",", "labels_", ",", "vertex_"}], "]"}], ":=", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"children", ",", "toDelete", ",", "subtree", ",", "sublabels"}],
       "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"children", " ", "=", " ", 
       RowBox[{"First", "@", 
        RowBox[{"Last", "@", 
         RowBox[{"Reap", "@", 
          RowBox[{"DepthFirstScan", "[", 
           RowBox[{"graph", ",", "vertex", ",", 
            RowBox[{"{", 
             RowBox[{"\"\<PrevisitVertex\>\"", "\[Rule]", 
              RowBox[{"(", 
               RowBox[{
                RowBox[{"Sow", "[", "#", "]"}], "&"}], ")"}]}], "}"}]}], 
           "]"}]}]}]}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"toDelete", " ", "=", " ", 
       RowBox[{"Complement", "[", 
        RowBox[{
         RowBox[{"VertexList", "[", "graph", "]"}], ",", "children"}], 
        "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"subtree", " ", "=", " ", 
       RowBox[{"VertexDelete", "[", 
        RowBox[{"graph", ",", 
         RowBox[{"Complement", "[", 
          RowBox[{
           RowBox[{"VertexList", "[", "graph", "]"}], ",", "children"}], 
          "]"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"sublabels", " ", "=", " ", 
       RowBox[{"Cases", "[", 
        RowBox[{"labels", ",", 
         RowBox[{"x_", "/;", 
          RowBox[{"MemberQ", "[", 
           RowBox[{"children", ",", 
            RowBox[{"First", "[", "x", "]"}]}], "]"}]}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"{", 
       RowBox[{"subtree", ",", "sublabels"}], "}"}]}]}], 
    "\[IndentingNewLine]", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"DeleteSubtree", "[", 
     RowBox[{"graph_", ",", "labels_", ",", "vertex_"}], "]"}], ":=", 
    RowBox[{"Block", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
       "subtree", ",", "sublabels", ",", "subVertexes", ",", 
        "conectionRemoved", ",", "withoutSubtree", ",", "newLabels"}], "}"}], 
      ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{
        RowBox[{"{", 
         RowBox[{"subtree", ",", "sublabels"}], "}"}], " ", "=", " ", 
        RowBox[{"Subtree", "[", 
         RowBox[{"graph", ",", " ", "labels", ",", " ", "vertex"}], "]"}]}], 
       ";", "\[IndentingNewLine]", 
       RowBox[{"subVertexes", " ", "=", " ", 
        RowBox[{"VertexList", "[", "subtree", "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"conectionRemoved", " ", "=", " ", 
        RowBox[{"ReplaceAll", "[", 
         RowBox[{
          RowBox[{"EdgeList", "[", "graph", "]"}], ",", 
          RowBox[{
           RowBox[{"(", 
            RowBox[{
             RowBox[{"(", 
              RowBox[{"x_", "/;", 
               RowBox[{"!", 
                RowBox[{"MemberQ", "[", 
                 RowBox[{"subVertexes", ",", "x"}], "]"}]}]}], ")"}], 
             "\[DirectedEdge]", 
             RowBox[{"(", 
              RowBox[{"y_", "/;", 
               RowBox[{"MemberQ", "[", 
                RowBox[{"subVertexes", ",", "y"}], "]"}]}], ")"}]}], ")"}], 
           "\[RuleDelayed]", 
           RowBox[{"x", "\[DirectedEdge]", "Empty"}]}]}], "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"withoutSubtree", " ", "=", " ", 
        RowBox[{"If", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"Length", "[", 
            RowBox[{"Intersection", "[", 
             RowBox[{
              RowBox[{"VertexList", "[", "conectionRemoved", "]"}], ",", 
              "subVertexes"}], "]"}], "]"}], "\[NotEqual]", " ", "0"}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{"VertexDelete", "[", 
           RowBox[{"conectionRemoved", ",", "subVertexes"}], "]"}], ",", 
          "\[IndentingNewLine]", "conectionRemoved"}], "\[IndentingNewLine]", 
         "]"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"newLabels", " ", "=", " ", 
        RowBox[{"Complement", "[", 
         RowBox[{"labels", ",", "sublabels"}], "]"}]}], ";", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"Graph", "[", 
          RowBox[{"withoutSubtree", ",", 
           RowBox[{"VertexLabels", "\[Rule]", "newLabels"}]}], "]"}], ",", 
         "newLabels"}], "}"}]}]}], "\[IndentingNewLine]", "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"InsertSubtree", "[", 
    RowBox[{"graph_", ",", "labels_", ",", "subtree_", ",", "sublabels_"}], 
    "]"}], ":=", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "missingVertexes", ",", "edges", ",", "missing", ",", "splitPos", ",", 
       "left", ",", "right", ",", "middleRules", ",", "formattedSubtreeRoot", 
       ",", "remaining", ",", "rightRules", ",", "newLeftGraph", ",", 
       "newMiddleGraph", ",", "newRightGraph", ",", "insertLabels", ",", 
       "incompleteLabels", ",", "newEdges", ",", "newLabels", ",", 
       "newRootForSub", ",", "newRightLabels"}], "}"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"!", 
         RowBox[{"MemberQ", "[", 
          RowBox[{
           RowBox[{"VertexList", "[", "graph", "]"}], ",", "Empty"}], "]"}]}],
         ",", 
        RowBox[{"Return", "[", "$Failed", "]"}]}], "]"}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"edges", " ", "=", " ", 
       RowBox[{"DeleteCases", "[", 
        RowBox[{
         RowBox[{"VertexList", "[", "graph", "]"}], ",", "Empty"}], "]"}]}], 
      ";", "\[IndentingNewLine]", 
      RowBox[{"missingVertexes", " ", "=", " ", 
       RowBox[{"Complement", "[", 
        RowBox[{
         RowBox[{"Range", "[", 
          RowBox[{"Max", "[", "edges", "]"}], "]"}], ",", "edges"}], "]"}]}], 
      ";", "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"missingVertexes", " ", "\[NotEqual]", " ", 
         RowBox[{"{", "}"}]}], ",", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"missing", " ", "=", "  ", 
          RowBox[{"First", "@", "missingVertexes"}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"splitPos", " ", "=", " ", 
          RowBox[{"First", "@", 
           RowBox[{"FirstPosition", "[", 
            RowBox[{
             RowBox[{"EdgeList", "[", "graph", "]"}], ",", 
             RowBox[{"_", "\[DirectedEdge]", "Empty"}]}], "]"}]}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"left", ",", "right"}], "}"}], " ", "=", " ", 
          RowBox[{"TakeDrop", "[", 
           RowBox[{
            RowBox[{"EdgeList", "[", "graph", "]"}], ",", "splitPos"}], 
           "]"}]}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
         RowBox[{"middleRules", " ", "=", " ", 
          RowBox[{"Thread", "[", 
           RowBox[{
            RowBox[{"VertexList", "[", "subtree", "]"}], "\[Rule]", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{"VertexList", "[", "subtree", "]"}], "+", "missing", 
              "-", "1"}], ")"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
         RowBox[{"newMiddleGraph", " ", "=", " ", 
          RowBox[{
           RowBox[{"EdgeList", "[", "subtree", "]"}], "/.", "middleRules"}]}],
          ";", "\[IndentingNewLine]", 
         RowBox[{"formattedSubtreeRoot", " ", "=", " ", 
          RowBox[{"1", " ", "/.", "middleRules"}]}], ";", 
         "\[IndentingNewLine]", "\[IndentingNewLine]", 
         RowBox[{"remaining", " ", "=", " ", 
          RowBox[{"Complement", "[", 
           RowBox[{
            RowBox[{"VertexList", "[", "right", "]"}], ",", 
            RowBox[{"VertexList", "[", "left", "]"}]}], "]"}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"rightRules", " ", "=", " ", 
          RowBox[{"Thread", "[", 
           RowBox[{"remaining", "\[Rule]", 
            RowBox[{"(", 
             RowBox[{"remaining", "+", 
              RowBox[{"Max", "[", 
               RowBox[{"VertexList", "[", "newMiddleGraph", "]"}], "]"}], "-", 
              RowBox[{"Min", "[", "remaining", "]"}], "+", "1"}], ")"}]}], 
           "]"}]}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
         RowBox[{"newLeftGraph", " ", "=", " ", 
          RowBox[{"left", "/.", 
           RowBox[{"Empty", "\[Rule]", "formattedSubtreeRoot"}]}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"newRightGraph", " ", "=", " ", 
          RowBox[{"right", " ", "/.", "rightRules"}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"insertLabels", " ", "=", " ", 
          RowBox[{"MapAt", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"#", "/.", "middleRules"}], "&"}], ",", "sublabels", ",", 
            RowBox[{"{", 
             RowBox[{"All", ",", "1"}], "}"}]}], "]"}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"incompleteLabels", " ", "=", " ", 
          RowBox[{"MapAt", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"#", "/.", "rightRules"}], "&"}], ",", "labels", ",", 
            RowBox[{"{", 
             RowBox[{"All", ",", "1"}], "}"}]}], "]"}]}], ";", 
         "\[IndentingNewLine]", "\[IndentingNewLine]", 
         RowBox[{"newEdges", " ", "=", " ", 
          RowBox[{"Join", "[", 
           RowBox[{
           "newLeftGraph", ",", "newMiddleGraph", ",", "newRightGraph"}], 
           "]"}]}], ";", "\[IndentingNewLine]", 
         RowBox[{"newLabels", " ", "=", " ", 
          RowBox[{"SortBy", "[", 
           RowBox[{
            RowBox[{"Join", "[", 
             RowBox[{"incompleteLabels", ",", "insertLabels"}], "]"}], ",", 
            "First"}], "]"}]}], ";"}], "\[IndentingNewLine]", 
        "\[IndentingNewLine]", ",", "\[IndentingNewLine]", 
        "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"newRootForSub", " ", "=", " ", 
          RowBox[{
           RowBox[{"Max", "[", 
            RowBox[{"DeleteCases", "[", 
             RowBox[{
              RowBox[{"VertexList", "[", "graph", "]"}], ",", "Empty"}], 
             "]"}], "]"}], "+", "1"}]}], ";", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"newRightGraph", ",", "newRightLabels"}], "}"}], " ", "=", 
          " ", 
          RowBox[{"RestartLabelsAt", "[", 
           RowBox[{"subtree", ",", "sublabels", ",", "newRootForSub"}], 
           "]"}]}], ";", "\[IndentingNewLine]", 
         RowBox[{"newEdges", " ", "=", " ", 
          RowBox[{"Join", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"EdgeList", "[", "graph", "]"}], "/.", 
             RowBox[{"Empty", "\[Rule]", "newRootForSub"}]}], ",", 
            RowBox[{"EdgeList", "[", "newRightGraph", "]"}]}], "]"}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"newLabels", " ", "=", " ", 
          RowBox[{"Join", "[", 
           RowBox[{"labels", ",", "newRightLabels"}], "]"}]}], ";"}]}], 
       "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"Graph", "[", 
         RowBox[{"newEdges", ",", 
          RowBox[{"VertexLabels", "\[Rule]", "newLabels"}]}], "]"}], ",", 
        "newLabels"}], "}"}]}]}], "\[IndentingNewLine]", "]"}]}], 
  ";"}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.789833090853594*^9, 3.789833192372734*^9}, {
   3.789833531339673*^9, 3.789833563524232*^9}, 3.789833696011055*^9, {
   3.78984744431467*^9, 3.789847704242251*^9}, {3.789847803295294*^9, 
   3.789847814332649*^9}, {3.789847861685192*^9, 3.78984789389155*^9}, {
   3.789848003773026*^9, 3.7898480389290047`*^9}, {3.789848493181694*^9, 
   3.789848527370165*^9}, {3.7898486179053717`*^9, 3.7898486463038*^9}, {
   3.789850376057413*^9, 3.7898504140537233`*^9}, {3.7898504454448557`*^9, 
   3.789850631132496*^9}, {3.789851177151168*^9, 3.7898511799271803`*^9}, {
   3.789851216292913*^9, 3.7898513409624767`*^9}, {3.7898615054602003`*^9, 
   3.789861530322874*^9}, 3.789861692683601*^9, 3.789862050514936*^9, {
   3.7899126928814163`*^9, 3.789912758057597*^9}, 3.7899302847502537`*^9, 
   3.789930354161729*^9, 3.790005536533122*^9, {3.790005661599536*^9, 
   3.790005688801499*^9}, {3.790459028422957*^9, 3.790459036259425*^9}, {
   3.790543746483783*^9, 3.790543770961753*^9}, {3.7906327525257998`*^9, 
   3.7906328106272373`*^9}, {3.790783928482745*^9, 3.790784031335642*^9}, {
   3.790784719923339*^9, 3.7907847222150097`*^9}, {3.790784784938048*^9, 
   3.7907848594626102`*^9}, {3.790784894941065*^9, 3.790784970348209*^9}, {
   3.790788171885638*^9, 3.790788176994931*^9}, {3.79078825508119*^9, 
   3.7907882710198317`*^9}, {3.790788361826977*^9, 3.7907883836602182`*^9}, {
   3.790788459515566*^9, 3.790788490782074*^9}, {3.7907885384762793`*^9, 
   3.79078853910749*^9}, {3.79079361362108*^9, 3.79079365610713*^9}, {
   3.790793698483177*^9, 3.790793801769072*^9}, {3.7907938389062634`*^9, 
   3.79079384699*^9}, 3.7907939490733767`*^9, {3.790794201166581*^9, 
   3.790794269941885*^9}, {3.7907944288055067`*^9, 3.790794439009001*^9}, {
   3.7907945562237387`*^9, 3.790794563098001*^9}, {3.7907946671117973`*^9, 
   3.79079467970553*^9}, {3.790795035654779*^9, 3.790795044640213*^9}, {
   3.790795095726781*^9, 3.790795123699739*^9}, {3.7907956891362553`*^9, 
   3.790795784760137*^9}, {3.790795918128211*^9, 3.7907959203126087`*^9}, {
   3.7907960187816668`*^9, 3.7907960248241997`*^9}, {3.79079645482978*^9, 
   3.790796477590535*^9}, {3.790796532588808*^9, 3.790796532741095*^9}, {
   3.790796577646997*^9, 3.7907968546885023`*^9}, {3.790796889641206*^9, 
   3.7907968918580837`*^9}, {3.790797250220983*^9, 3.7907972599164667`*^9}},
 CellLabel->"In[17]:=",ExpressionUUID->"f631ef19-1d41-4fd9-be26-8ef5eea1ab3f"],

Cell[CellGroupData[{

Cell[BoxData["g1"], "Input",
 CellChangeTimes->{{3.790459113689322*^9, 3.790459113935494*^9}},
 CellLabel->
  "In[568]:=",ExpressionUUID->"5d759315-b71a-4268-8979-a61ce94b5f9c"],

Cell[BoxData[
 GraphicsBox[
  NamespaceBox["NetworkGraphics",
   DynamicModuleBox[{Typeset`graph = HoldComplete[
     Graph[{1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 
      19}, {{{1, 2}, {1, 3}, {1, 4}, {3, 5}, {3, 6}, {3, 7}, {6, 8}, {8, 9}, {
       7, 10}, {10, 11}, {10, 12}, {4, 13}, {4, 14}, {4, 15}, {14, 16}, {16, 
       17}, {15, 18}, {18, 19}}, Null}, {
      VertexLabels -> {
        6 -> $CellContext`NonTerm["numQuant", 5], 
         18 -> $CellContext`NonTerm["expression", 8], 
         3 -> $CellContext`NonTerm["cond", 3], 
         11 -> $CellContext`Term["lag", "3"], 
         5 -> $CellContext`Term["numOp", "Greater"], 
         8 -> $CellContext`NonTerm["expression", 8], 
         7 -> $CellContext`NonTerm["numQuant", 5], 
         14 -> $CellContext`NonTerm["numQuant", 5], 
         10 -> $CellContext`NonTerm["expression", 7], 
         9 -> $CellContext`Term["observable", "High"], 
         4 -> $CellContext`NonTerm["cond", 3], 
         17 -> $CellContext`Term["observable", "Open"], 
         16 -> $CellContext`NonTerm["expression", 8], 
         12 -> $CellContext`Term["observable", "Low"], 
         13 -> $CellContext`Term["numOp", "Less"], 
         2 -> $CellContext`Term["logicOp", "And"], 
         15 -> $CellContext`NonTerm["numQuant", 5], 
         1 -> $CellContext`NonTerm["cond", 1], 
         19 -> $CellContext`Term["observable", "Close"]}}]]}, 
    TagBox[GraphicsGroupBox[{
       {Hue[0.6, 0.7, 0.5], Opacity[0.7], Arrowheads[Medium], 
        ArrowBox[CompressedData["
1:eJxTTMoPSmVmYGAQAmImKJYRjEs6ufy3/SPp1i9vPNkdIPRx+1dXkrcXljM6
oMvfSlpmmCHzFqd83H7RyVrGXA4weXT1DFAAUf/dHl0eIv7cHpf8bTD/L1we
3b60ii+h6xNYHHDJw/i45HWapV9cYhKAy6O7B8Z/AKXR3QPjP0DR9xyDDwsH
7Oq/45RHD0dc/oGpR/cPjA+TR1cP48PMR1cP48PkATCkB9M=
         "], 
         0.03702325155936649]}, 
       {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[
        0.7]}], {
         DiskBox[{1.7284635393598995, 2.9110964873429888}, 
          0.03702325155936649], InsetBox[
          RowBox[{"NonTerm", "(", 
           RowBox[{"\<\"cond\"\>", ",", "1"}], ")"}], 
          Offset[{2, 2}, {1.765486790919266, 2.9481197389023555}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{0.1819435304589368, 2.183322365507242}, 
          0.03702325155936649], InsetBox[
          RowBox[{"Term", "(", 
           RowBox[{"\<\"logicOp\"\>", ",", "\<\"And\"\>"}], ")"}], 
          Offset[{2, 2}, {0.21896678201830327, 2.2203456170666085}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{0.9097176522946839, 2.183322365507242}, 
          0.03702325155936649], InsetBox[
          RowBox[{"NonTerm", "(", 
           RowBox[{"\<\"cond\"\>", ",", "3"}], ")"}], 
          Offset[{2, 2}, {0.9467409038540504, 2.2203456170666085}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{3.2749835482608622, 2.183322365507242}, 
          0.03702325155936649], InsetBox[
          RowBox[{"NonTerm", "(", 
           RowBox[{"\<\"cond\"\>", ",", "3"}], ")"}], 
          Offset[{2, 2}, {3.312006799820229, 2.2203456170666085}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{0., 1.4555482436714944}, 0.03702325155936649], InsetBox[
          RowBox[{"Term", "(", 
           RowBox[{"\<\"numOp\"\>", ",", "\<\"Greater\"\>"}], ")"}], 
          Offset[{2, 2}, {0.03702325155936649, 1.4925714952308609}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{0.7277741218357472, 1.4555482436714944}, 
          0.03702325155936649], InsetBox[
          RowBox[{"NonTerm", "(", 
           RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], 
          Offset[{2, 2}, {0.7647973733951137, 1.4925714952308609}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{1.819435304589368, 1.4555482436714944}, 
          0.03702325155936649], InsetBox[
          RowBox[{"NonTerm", "(", 
           RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], 
          Offset[{2, 2}, {1.8564585561487346, 1.4925714952308609}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{0.7277741218357472, 0.727774121835747}, 
          0.03702325155936649], InsetBox[
          RowBox[{"NonTerm", "(", 
           RowBox[{"\<\"expression\"\>", ",", "8"}], ")"}], 
          Offset[{2, 2}, {0.7647973733951137, 0.7647973733951134}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{0.7277741218357472, 0.}, 0.03702325155936649], InsetBox[
          RowBox[{"Term", "(", 
           RowBox[{"\<\"observable\"\>", ",", "\<\"High\"\>"}], ")"}], 
          Offset[{2, 2}, {0.7647973733951137, 0.03702325155936649}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{1.819435304589368, 0.727774121835747}, 0.03702325155936649],
          InsetBox[
          RowBox[{"NonTerm", "(", 
           RowBox[{"\<\"expression\"\>", ",", "7"}], ")"}], 
          Offset[{2, 2}, {1.8564585561487346, 0.7647973733951134}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{1.4555482436714944, 0.}, 0.03702325155936649], InsetBox[
          RowBox[{"Term", "(", 
           RowBox[{"\<\"lag\"\>", ",", "\<\"3\"\>"}], ")"}], 
          Offset[{2, 2}, {1.4925714952308609, 0.03702325155936649}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{2.183322365507242, 0.}, 0.03702325155936649], InsetBox[
          RowBox[{"Term", "(", 
           RowBox[{"\<\"observable\"\>", ",", "\<\"Low\"\>"}], ")"}], 
          Offset[{2, 2}, {2.2203456170666085, 0.03702325155936649}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{2.5472094264251153, 1.4555482436714944}, 
          0.03702325155936649], InsetBox[
          RowBox[{"Term", "(", 
           RowBox[{"\<\"numOp\"\>", ",", "\<\"Less\"\>"}], ")"}], 
          Offset[{2, 2}, {2.584232677984482, 1.4925714952308609}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{3.2749835482608622, 1.4555482436714944}, 
          0.03702325155936649], InsetBox[
          RowBox[{"NonTerm", "(", 
           RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], 
          Offset[{2, 2}, {3.312006799820229, 1.4925714952308609}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{4.00275767009661, 1.4555482436714944}, 0.03702325155936649],
          InsetBox[
          RowBox[{"NonTerm", "(", 
           RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], 
          Offset[{2, 2}, {4.039780921655977, 1.4925714952308609}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{3.2749835482608622, 0.727774121835747}, 
          0.03702325155936649], InsetBox[
          RowBox[{"NonTerm", "(", 
           RowBox[{"\<\"expression\"\>", ",", "8"}], ")"}], 
          Offset[{2, 2}, {3.312006799820229, 0.7647973733951134}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{3.2749835482608622, 0.}, 0.03702325155936649], InsetBox[
          RowBox[{"Term", "(", 
           RowBox[{"\<\"observable\"\>", ",", "\<\"Open\"\>"}], ")"}], 
          Offset[{2, 2}, {3.312006799820229, 0.03702325155936649}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{4.00275767009661, 0.727774121835747}, 0.03702325155936649], 
         InsetBox[
          RowBox[{"NonTerm", "(", 
           RowBox[{"\<\"expression\"\>", ",", "8"}], ")"}], 
          Offset[{2, 2}, {4.039780921655977, 0.7647973733951134}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}, {
         DiskBox[{4.00275767009661, 0.}, 0.03702325155936649], InsetBox[
          RowBox[{"Term", "(", 
           RowBox[{"\<\"observable\"\>", ",", "\<\"Close\"\>"}], ")"}], 
          Offset[{2, 2}, {4.039780921655977, 0.03702325155936649}], 
          ImageScaled[{0, 0}],
          BaseStyle->"Graphics"]}}}],
     MouseAppearanceTag["NetworkGraphics"]],
    AllowKernelInitialization->False]],
  DefaultBaseStyle->{
   "NetworkGraphics", FrontEnd`GraphicsHighlightColor -> Hue[0.8, 1., 0.6]},
  FormatType->TraditionalForm,
  FrameTicks->None,
  ImageSize->{519., Automatic}]], "Output",
 CellChangeTimes->{3.790459114295677*^9, 3.790632910932477*^9, 
  3.790784049964044*^9},
 CellLabel->
  "Out[568]=",ExpressionUUID->"8bd5988f-4b3a-4eaf-b946-971911a143e5"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"subtree1", " ", "=", " ", 
  RowBox[{"Apply", "[", 
   RowBox[{"RestartLabelsAtOne", ",", 
    RowBox[{"Subtree", "[", 
     RowBox[{"g1", ",", "labels1", ",", "4"}], "]"}]}], "]"}]}]], "Input",
 CellChangeTimes->{{3.7904591818108273`*^9, 3.790459186174479*^9}, {
  3.790795132069325*^9, 3.790795136625559*^9}},
 CellLabel->
  "In[637]:=",ExpressionUUID->"5e2c98fc-7eaa-4ff9-b894-346660be4288"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   GraphicsBox[
    NamespaceBox["NetworkGraphics",
     DynamicModuleBox[{Typeset`graph = HoldComplete[
       Graph[{1, 2, 3, 4, 5, 6, 7, 
        8}, {{{1, 2}, {1, 3}, {1, 4}, {3, 5}, {5, 6}, {4, 7}, {7, 8}}, 
         Null}, {VertexLabels -> {
          6 -> $CellContext`Term["observable", "Open"], 
           3 -> $CellContext`NonTerm["numQuant", 5], 
           5 -> $CellContext`NonTerm["expression", 8], 
           8 -> $CellContext`Term["observable", "Close"], 
           7 -> $CellContext`NonTerm["expression", 8], 
           4 -> $CellContext`NonTerm["numQuant", 5], 
           2 -> $CellContext`Term["numOp", "Less"], 
           1 -> $CellContext`NonTerm["cond", 3]}}]]}, 
      TagBox[GraphicsGroupBox[{
         {Hue[0.6, 0.7, 0.5], Opacity[0.7], Arrowheads[Medium], 
          ArrowBox[{{{0.8819171036881969, 2.6457513110645907`}, {0., 
           1.763834207376394}}, {{0.8819171036881969, 2.6457513110645907`}, {
           0.8819171036881969, 1.763834207376394}}, {{0.8819171036881969, 
           2.6457513110645907`}, {1.7638342073763937`, 1.763834207376394}}, {{
           0.8819171036881969, 1.763834207376394}, {0.8819171036881969, 
           0.881917103688197}}, {{1.7638342073763937`, 1.763834207376394}, {
           1.7638342073763937`, 0.881917103688197}}, {{0.8819171036881969, 
           0.881917103688197}, {0.8819171036881969, 0.}}, {{
           1.7638342073763937`, 0.881917103688197}, {1.7638342073763937`, 
           0.}}}, 0.027644045725436814`]}, 
         {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[
          0.7]}], {
           DiskBox[{0.8819171036881969, 2.6457513110645907}, 
            0.027644045725436814], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"cond\"\>", ",", "3"}], ")"}], 
            Offset[{2, 2}, {0.9095611494136336, 2.6733953567900275}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{0., 1.763834207376394}, 0.027644045725436814], InsetBox[
            RowBox[{"Term", "(", 
             RowBox[{"\<\"numOp\"\>", ",", "\<\"Less\"\>"}], ")"}], 
            Offset[{2, 2}, {0.027644045725436814, 1.7914782531018307}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{0.8819171036881969, 1.763834207376394}, 
            0.027644045725436814], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], 
            Offset[{2, 2}, {0.9095611494136336, 1.7914782531018307}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{1.7638342073763937, 1.763834207376394}, 
            0.027644045725436814], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], 
            Offset[{2, 2}, {1.7914782531018305, 1.7914782531018307}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{0.8819171036881969, 0.881917103688197}, 
            0.027644045725436814], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"expression\"\>", ",", "8"}], ")"}], 
            Offset[{2, 2}, {0.9095611494136336, 0.9095611494136338}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{0.8819171036881969, 0.}, 0.027644045725436814], InsetBox[
            RowBox[{"Term", "(", 
             RowBox[{"\<\"observable\"\>", ",", "\<\"Open\"\>"}], ")"}], 
            Offset[{2, 2}, {0.9095611494136336, 0.027644045725436814}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{1.7638342073763937, 0.881917103688197}, 
            0.027644045725436814], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"expression\"\>", ",", "8"}], ")"}], 
            Offset[{2, 2}, {1.7914782531018305, 0.9095611494136338}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{1.7638342073763937, 0.}, 0.027644045725436814], InsetBox[
            RowBox[{"Term", "(", 
             RowBox[{"\<\"observable\"\>", ",", "\<\"Close\"\>"}], ")"}], 
            Offset[{2, 2}, {1.7914782531018305, 0.027644045725436814}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}}}],
       MouseAppearanceTag["NetworkGraphics"]],
      AllowKernelInitialization->False]],
    DefaultBaseStyle->{
     "NetworkGraphics", FrontEnd`GraphicsHighlightColor -> Hue[0.8, 1., 0.6]},
    
    FormatType->TraditionalForm,
    FrameTicks->None,
    ImageSize->{434., Automatic}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"1", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"cond\"\>", ",", "3"}], "]"}]}], ",", 
     RowBox[{"2", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\<\"numOp\"\>", ",", "\<\"Less\"\>"}], "]"}]}], ",", 
     RowBox[{"3", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"numQuant\"\>", ",", "5"}], "]"}]}], ",", 
     RowBox[{"4", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"numQuant\"\>", ",", "5"}], "]"}]}], ",", 
     RowBox[{"5", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"expression\"\>", ",", "8"}], "]"}]}], ",", 
     RowBox[{"6", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\<\"observable\"\>", ",", "\<\"Open\"\>"}], "]"}]}], ",", 
     RowBox[{"7", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"expression\"\>", ",", "8"}], "]"}]}], ",", 
     RowBox[{"8", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\<\"observable\"\>", ",", "\<\"Close\"\>"}], "]"}]}]}], 
    "}"}]}], "}"}]], "Output",
 CellChangeTimes->{
  3.790459111151917*^9, 3.790459186893664*^9, {3.7906329127090263`*^9, 
   3.7906329157223797`*^9}, 3.790784051876108*^9, 3.790785003850865*^9, 
   3.790794481011833*^9, 3.790794591284066*^9, 3.790795051326371*^9, 
   3.790795100038233*^9, 3.790795136915556*^9},
 CellLabel->
  "Out[637]=",ExpressionUUID->"7a3dfa1e-95d9-4aa2-8e6b-a04a13686a81"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"cropped2", " ", "=", " ", 
  RowBox[{"DeleteSubtree", "[", 
   RowBox[{"g2", ",", "labels2", ",", "3"}], "]"}]}]], "Input",
 CellChangeTimes->{{3.790459169822783*^9, 3.790459197022461*^9}},
 CellLabel->
  "In[632]:=",ExpressionUUID->"890deaf9-277f-4132-b2d7-551af28a4f02"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   GraphicsBox[
    NamespaceBox["NetworkGraphics",
     DynamicModuleBox[{Typeset`graph = HoldComplete[
       Graph[{
        1, 2, Empty, 4, 17, 18, 19, 20, 21, 22, 23, 24}, {{{1, 2}, {1, 3}, {1,
          4}, {4, 5}, {4, 6}, {4, 7}, {6, 8}, {8, 9}, {8, 10}, {7, 11}, {11, 
         12}}, Null}, {
        GraphLayout -> {"Dimension" -> 2}, 
         VertexLabels -> {
          21 -> $CellContext`Term["lag", "2"], 
           18 -> $CellContext`NonTerm["numQuant", 5], 
           23 -> $CellContext`NonTerm["expression", 8], 
           24 -> $CellContext`Term["observable", "High"], 
           22 -> $CellContext`Term["observable", "Close"], 
           20 -> $CellContext`NonTerm["expression", 7], 
           4 -> $CellContext`NonTerm["cond", 3], 
           17 -> $CellContext`Term["numOp", "Less"], 
           2 -> $CellContext`Term["logicOp", "Or"], 
           1 -> $CellContext`NonTerm["cond", 1], 
           19 -> $CellContext`NonTerm["numQuant", 5]}}]]}, 
      TagBox[GraphicsGroupBox[{
         {Hue[0.6, 0.7, 0.5], Opacity[0.7], Arrowheads[Medium], 
          ArrowBox[CompressedData["
1:eJxTTMoPSmVmYGDgBmImKJ41a47yjKYb9rPB9A97BiiYA+a/sEeXnwUVxyX/
VldA4/Wk3/ZfirdKfUpkckDnQ+hPONU7HmzWsVv8D6c8xD4OB5g8unoYH9V9
CPUwPkweu3pEOKDLw9wBk0c3D8aHyQMAB0ihyw==
           "], 
           0.030695071075361624`]}, 
         {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[
          0.7]}], {
           DiskBox[{0.38297084310253526, 1.5318833724101413}, 
            0.030695071075361624], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"cond\"\>", ",", "1"}], ")"}], 
            Offset[{2, 2}, {0.4136659141778969, 1.5625784434855028}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{0., 0.7659416862050707}, 0.030695071075361624], InsetBox[
            RowBox[{"Term", "(", 
             RowBox[{"\<\"logicOp\"\>", ",", "\<\"Or\"\>"}], ")"}], 
            Offset[{2, 2}, {0.030695071075361624, 0.7966367572804324}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, 
          DiskBox[{0.7659416862050705, 0.7659416862050707}, 
           0.030695071075361624], {
           DiskBox[{1.7233687939614086, 2.297825058615212}, 
            0.030695071075361624], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"cond\"\>", ",", "3"}], ")"}], 
            Offset[{2, 2}, {1.7540638650367701, 2.3285201296905735}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{1.148912529307606, 1.5318833724101413}, 
            0.030695071075361624], InsetBox[
            RowBox[{"Term", "(", 
             RowBox[{"\<\"numOp\"\>", ",", "\<\"Less\"\>"}], ")"}], 
            Offset[{2, 2}, {1.1796076003829676, 1.5625784434855028}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{1.9148542155126764, 1.5318833724101413}, 
            0.030695071075361624], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], 
            Offset[{2, 2}, {1.945549286588038, 1.5625784434855028}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{3.063766744820282, 1.5318833724101413}, 
            0.030695071075361624], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], 
            Offset[{2, 2}, {3.094461815895644, 1.5625784434855028}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{1.9148542155126764, 0.7659416862050707}, 
            0.030695071075361624], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"expression\"\>", ",", "7"}], ")"}], 
            Offset[{2, 2}, {1.945549286588038, 0.7966367572804324}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{1.531883372410141, 0.}, 0.030695071075361624], InsetBox[
            RowBox[{"Term", "(", 
             RowBox[{"\<\"lag\"\>", ",", "\<\"2\"\>"}], ")"}], 
            Offset[{2, 2}, {1.5625784434855028, 0.030695071075361624}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{2.297825058615212, 0.}, 0.030695071075361624], InsetBox[
            RowBox[{"Term", "(", 
             RowBox[{"\<\"observable\"\>", ",", "\<\"Close\"\>"}], ")"}], 
            Offset[{2, 2}, {2.3285201296905735, 0.030695071075361624}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{3.063766744820282, 0.7659416862050707}, 
            0.030695071075361624], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"expression\"\>", ",", "8"}], ")"}], 
            Offset[{2, 2}, {3.094461815895644, 0.7966367572804324}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{3.063766744820282, 0.}, 0.030695071075361624], InsetBox[
            RowBox[{"Term", "(", 
             RowBox[{"\<\"observable\"\>", ",", "\<\"High\"\>"}], ")"}], 
            Offset[{2, 2}, {3.094461815895644, 0.030695071075361624}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}}}],
       MouseAppearanceTag["NetworkGraphics"]],
      AllowKernelInitialization->False]],
    DefaultBaseStyle->{
     "NetworkGraphics", FrontEnd`GraphicsHighlightColor -> Hue[0.8, 1., 0.6]},
    
    FormatType->TraditionalForm,
    FrameTicks->None,
    ImageSize->{525., Automatic}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"1", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"cond\"\>", ",", "1"}], "]"}]}], ",", 
     RowBox[{"2", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\<\"logicOp\"\>", ",", "\<\"Or\"\>"}], "]"}]}], ",", 
     RowBox[{"4", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"cond\"\>", ",", "3"}], "]"}]}], ",", 
     RowBox[{"17", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\<\"numOp\"\>", ",", "\<\"Less\"\>"}], "]"}]}], ",", 
     RowBox[{"18", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"numQuant\"\>", ",", "5"}], "]"}]}], ",", 
     RowBox[{"19", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"numQuant\"\>", ",", "5"}], "]"}]}], ",", 
     RowBox[{"20", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"expression\"\>", ",", "7"}], "]"}]}], ",", 
     RowBox[{"21", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\<\"lag\"\>", ",", "\<\"2\"\>"}], "]"}]}], ",", 
     RowBox[{"22", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\<\"observable\"\>", ",", "\<\"Close\"\>"}], "]"}]}], ",", 
     RowBox[{"23", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"expression\"\>", ",", "8"}], "]"}]}], ",", 
     RowBox[{"24", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\<\"observable\"\>", ",", "\<\"High\"\>"}], "]"}]}]}], 
    "}"}]}], "}"}]], "Output",
 CellChangeTimes->{{3.790459173761779*^9, 3.790459197414949*^9}, 
   3.790632921839756*^9, {3.790784035691884*^9, 3.790784056188092*^9}, 
   3.790785005427293*^9, 3.790794482666422*^9, 3.790795104483407*^9},
 CellLabel->
  "Out[632]=",ExpressionUUID->"96cf8cd0-fe5b-4f6d-b9f4-6c7f9aa5b418"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"inserted", " ", "=", " ", 
  RowBox[{"InsertSubtree", "[", 
   RowBox[{
    RowBox[{"First", "[", "cropped2", "]"}], ",", 
    RowBox[{"Last", "[", "cropped2", "]"}], ",", 
    RowBox[{"First", "[", "subtree1", "]"}], ",", 
    RowBox[{"Last", "[", "subtree1", "]"}]}], "]"}]}]], "Input",
 CellChangeTimes->{{3.790459291925201*^9, 3.790459348348867*^9}, {
  3.790794537400292*^9, 3.790794537572776*^9}},
 CellLabel->
  "In[638]:=",ExpressionUUID->"c219c2b1-4841-4d3d-8cd3-e43e89d98e50"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   GraphicsBox[
    NamespaceBox["NetworkGraphics",
     DynamicModuleBox[{Typeset`graph = HoldComplete[
       Graph[{1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 19, 32, 33, 34, 35, 36, 37, 38, 
        39}, {{{1, 2}, {1, 3}, {3, 4}, {3, 5}, {3, 6}, {5, 7}, {7, 8}, {6, 
         9}, {9, 10}, {1, 11}, {11, 12}, {11, 13}, {11, 14}, {13, 15}, {15, 
         16}, {15, 17}, {14, 18}, {18, 19}}, Null}, {
        VertexLabels -> {
          6 -> $CellContext`NonTerm["numQuant", 5], 
           39 -> $CellContext`Term["observable", "High"], 
           3 -> $CellContext`NonTerm["cond", 3], 
           33 -> $CellContext`NonTerm["numQuant", 5], 
           5 -> $CellContext`NonTerm["numQuant", 5], 
           32 -> $CellContext`Term["numOp", "Less"], 
           8 -> $CellContext`Term["observable", "Open"], 
           7 -> $CellContext`NonTerm["expression", 8], 
           10 -> $CellContext`Term["observable", "Close"], 
           9 -> $CellContext`NonTerm["expression", 8], 
           4 -> $CellContext`Term["numOp", "Less"], 
           37 -> $CellContext`Term["observable", "Close"], 
           38 -> $CellContext`NonTerm["expression", 8], 
           35 -> $CellContext`NonTerm["expression", 7], 
           34 -> $CellContext`NonTerm["numQuant", 5], 
           36 -> $CellContext`Term["lag", "2"], 
           2 -> $CellContext`Term["logicOp", "Or"], 
           1 -> $CellContext`NonTerm["cond", 1], 
           19 -> $CellContext`NonTerm["cond", 3]}}]]}, 
      TagBox[GraphicsGroupBox[{
         {Hue[0.6, 0.7, 0.5], Opacity[0.7], Arrowheads[Medium], 
          ArrowBox[CompressedData["
1:eJxTTMoPSmVmYGAQAmImKF6Qe/Zw974f9o+kW7+88WR3YICCV1eStxeWMzqg
y0Po5/a45CF8DgeYPLp6mPkQ8e/26PIwPn757xjy6PwHWMURNKo8uvrn9uju
RDcPJo/uX3R3Yg8PdpzyOs3SLy4xCaD5kx2DD3MPunoYH9W9CPVpFV9C1yew
oMUDQj5+v+hkLWMuuDy6eTA+TB4ADHsdXw==
           "], 0.03702325155936649]}, 
         {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[
          0.7]}], {
           DiskBox[{1.5465200089009628, 2.9110964873429888}, 
            0.03702325155936649], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"cond\"\>", ",", "1"}], ")"}], 
            Offset[{2, 2}, {1.5835432604603292, 2.9481197389023555}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{0., 2.183322365507242}, 0.03702325155936649], InsetBox[
            RowBox[{"Term", "(", 
             RowBox[{"\<\"logicOp\"\>", ",", "\<\"Or\"\>"}], ")"}], 
            Offset[{2, 2}, {0.03702325155936649, 2.2203456170666085}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{0.7277741218357472, 2.183322365507242}, 
            0.03702325155936649], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"cond\"\>", ",", "3"}], ")"}], 
            Offset[{2, 2}, {0.7647973733951137, 2.2203456170666085}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{0., 1.4555482436714944}, 0.03702325155936649], InsetBox[
            RowBox[{"Term", "(", 
             RowBox[{"\<\"numOp\"\>", ",", "\<\"Less\"\>"}], ")"}], 
            Offset[{2, 2}, {0.03702325155936649, 1.4925714952308609}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{0.7277741218357472, 1.4555482436714944}, 
            0.03702325155936649], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], 
            Offset[{2, 2}, {0.7647973733951137, 1.4925714952308609}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{1.4555482436714944, 1.4555482436714944}, 
            0.03702325155936649], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], 
            Offset[{2, 2}, {1.4925714952308609, 1.4925714952308609}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{0.7277741218357472, 0.727774121835747}, 
            0.03702325155936649], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"expression\"\>", ",", "8"}], ")"}], 
            Offset[{2, 2}, {0.7647973733951137, 0.7647973733951134}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{0.7277741218357472, 0.}, 0.03702325155936649], InsetBox[
            RowBox[{"Term", "(", 
             RowBox[{"\<\"observable\"\>", ",", "\<\"Open\"\>"}], ")"}], 
            Offset[{2, 2}, {0.7647973733951137, 0.03702325155936649}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{1.4555482436714944, 0.727774121835747}, 
            0.03702325155936649], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"expression\"\>", ",", "8"}], ")"}], 
            Offset[{2, 2}, {1.4925714952308609, 0.7647973733951134}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{1.4555482436714944, 0.}, 0.03702325155936649], InsetBox[
            RowBox[{"Term", "(", 
             RowBox[{"\<\"observable\"\>", ",", "\<\"Close\"\>"}], ")"}], 
            Offset[{2, 2}, {1.4925714952308609, 0.03702325155936649}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{3.0930400178019255, 2.183322365507242}, 
            0.03702325155936649], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"cond\"\>", ",", "3"}], ")"}], 
            Offset[{2, 2}, {3.130063269361292, 2.2203456170666085}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{2.183322365507242, 1.4555482436714944}, 
            0.03702325155936649], InsetBox[
            RowBox[{"Term", "(", 
             RowBox[{"\<\"numOp\"\>", ",", "\<\"Less\"\>"}], ")"}], 
            Offset[{2, 2}, {2.2203456170666085, 1.4925714952308609}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{2.9110964873429888, 1.4555482436714944}, 
            0.03702325155936649], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], 
            Offset[{2, 2}, {2.9481197389023555, 1.4925714952308609}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{4.00275767009661, 1.4555482436714944}, 
            0.03702325155936649], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], 
            Offset[{2, 2}, {4.039780921655977, 1.4925714952308609}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{2.9110964873429888, 0.727774121835747}, 
            0.03702325155936649], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"expression\"\>", ",", "7"}], ")"}], 
            Offset[{2, 2}, {2.9481197389023555, 0.7647973733951134}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{2.5472094264251153, 0.}, 0.03702325155936649], InsetBox[
            RowBox[{"Term", "(", 
             RowBox[{"\<\"lag\"\>", ",", "\<\"2\"\>"}], ")"}], 
            Offset[{2, 2}, {2.584232677984482, 0.03702325155936649}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{3.2749835482608627, 0.}, 0.03702325155936649], InsetBox[
            RowBox[{"Term", "(", 
             RowBox[{"\<\"observable\"\>", ",", "\<\"Close\"\>"}], ")"}], 
            Offset[{2, 2}, {3.3120067998202294, 0.03702325155936649}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{4.00275767009661, 0.727774121835747}, 
            0.03702325155936649], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"expression\"\>", ",", "8"}], ")"}], 
            Offset[{2, 2}, {4.039780921655977, 0.7647973733951134}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{4.00275767009661, 0.}, 0.03702325155936649], InsetBox[
            RowBox[{"Term", "(", 
             RowBox[{"\<\"observable\"\>", ",", "\<\"High\"\>"}], ")"}], 
            Offset[{2, 2}, {4.039780921655977, 0.03702325155936649}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}}}],
       MouseAppearanceTag["NetworkGraphics"]],
      AllowKernelInitialization->False]],
    DefaultBaseStyle->{
     "NetworkGraphics", FrontEnd`GraphicsHighlightColor -> Hue[0.8, 1., 0.6]},
    
    FormatType->TraditionalForm,
    FrameTicks->None,
    ImageSize->{680., Automatic}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"1", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"cond\"\>", ",", "1"}], "]"}]}], ",", 
     RowBox[{"2", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\<\"logicOp\"\>", ",", "\<\"Or\"\>"}], "]"}]}], ",", 
     RowBox[{"3", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"cond\"\>", ",", "3"}], "]"}]}], ",", 
     RowBox[{"4", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\<\"numOp\"\>", ",", "\<\"Less\"\>"}], "]"}]}], ",", 
     RowBox[{"5", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"numQuant\"\>", ",", "5"}], "]"}]}], ",", 
     RowBox[{"6", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"numQuant\"\>", ",", "5"}], "]"}]}], ",", 
     RowBox[{"7", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"expression\"\>", ",", "8"}], "]"}]}], ",", 
     RowBox[{"8", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\<\"observable\"\>", ",", "\<\"Open\"\>"}], "]"}]}], ",", 
     RowBox[{"9", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"expression\"\>", ",", "8"}], "]"}]}], ",", 
     RowBox[{"10", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\<\"observable\"\>", ",", "\<\"Close\"\>"}], "]"}]}], ",", 
     RowBox[{"19", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"cond\"\>", ",", "3"}], "]"}]}], ",", 
     RowBox[{"32", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\<\"numOp\"\>", ",", "\<\"Less\"\>"}], "]"}]}], ",", 
     RowBox[{"33", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"numQuant\"\>", ",", "5"}], "]"}]}], ",", 
     RowBox[{"34", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"numQuant\"\>", ",", "5"}], "]"}]}], ",", 
     RowBox[{"35", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"expression\"\>", ",", "7"}], "]"}]}], ",", 
     RowBox[{"36", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\<\"lag\"\>", ",", "\<\"2\"\>"}], "]"}]}], ",", 
     RowBox[{"37", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\<\"observable\"\>", ",", "\<\"Close\"\>"}], "]"}]}], ",", 
     RowBox[{"38", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"expression\"\>", ",", "8"}], "]"}]}], ",", 
     RowBox[{"39", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\<\"observable\"\>", ",", "\<\"High\"\>"}], "]"}]}]}], 
    "}"}]}], "}"}]], "Output",
 CellChangeTimes->{
  3.790459318044755*^9, 3.790459348981124*^9, {3.790632927669614*^9, 
   3.790632929516892*^9}, 3.790784060604006*^9, 3.790785006763097*^9, 
   3.790794484336734*^9, 3.790794570461404*^9, 3.790795143612715*^9},
 CellLabel->
  "Out[638]=",ExpressionUUID->"785d828e-3bfe-4563-974e-bd469a598482"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"SynthesizeTree", "[", 
   RowBox[{
    RowBox[{"First", "[", "inserted", "]"}], ",", 
    RowBox[{"Last", "[", "inserted", "]"}], ",", "grammar"}], "]"}], " ", "//",
   " ", "FullForm"}]], "Input",
 CellChangeTimes->{{3.7904593557805758`*^9, 3.790459367397191*^9}},
 CellLabel->
  "In[639]:=",ExpressionUUID->"14206010-6697-44a9-849b-cbff9c629a63"],

Cell[BoxData[
 TagBox[
  StyleBox[
   RowBox[{"Or", "[", 
    RowBox[{
     RowBox[{"Less", "[", 
      RowBox[{"\"\<Open\>\"", ",", "\"\<Close\>\""}], "]"}], ",", 
     RowBox[{"Less", "[", 
      RowBox[{
       RowBox[{"Prev", "[", 
        RowBox[{"\"\<Close\>\"", ",", "2"}], "]"}], ",", "\"\<High\>\""}], 
      "]"}]}], "]"}],
   ShowSpecialCharacters->False,
   ShowStringCharacters->True,
   NumberMarks->True],
  FullForm]], "Output",
 CellChangeTimes->{{3.790459361482438*^9, 3.790459367632287*^9}, 
   3.79063293083852*^9, 3.7907951537363567`*^9},
 CellLabel->
  "Out[639]//FullForm=",ExpressionUUID->"51399ae5-0569-467d-9b55-\
723df5c62aeb"]
}, Open  ]]
}, Closed]],

Cell[CellGroupData[{

Cell["Crossover", "Section",
 CellChangeTimes->{{3.790459787904086*^9, 
  3.790459789280126*^9}},ExpressionUUID->"494e3a47-7a8e-4178-99aa-\
8aba6c8a5063"],

Cell["\<\
Crossover operator that selects NonTerms that are common in both parents and \
swaps them.\
\>", "Text",
 CellChangeTimes->{{3.790778178022592*^9, 
  3.790778209199725*^9}},ExpressionUUID->"85321852-572a-401c-8acb-\
bad0fc91985c"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"Crossover", "[", 
    RowBox[{"graph1_", ",", "labels1_", ",", "graph2_", ",", "labels2_"}], 
    "]"}], ":=", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "nonterms1", ",", "nonterms2", ",", "commonNonTerms", ",", "matchsIn1", 
       ",", "vertex1", ",", "vertex1NonTerm", ",", "vertex2", ",", "cropped", 
       ",", "sub"}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"nonterms1", " ", "=", " ", 
       RowBox[{"Cases", "[", 
        RowBox[{
         RowBox[{"labels1", "[", 
          RowBox[{"[", 
           RowBox[{"All", ",", "2"}], "]"}], "]"}], ",", "_NonTerm"}], 
        "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"nonterms2", " ", "=", " ", 
       RowBox[{"Cases", "[", 
        RowBox[{
         RowBox[{"labels2", "[", 
          RowBox[{"[", 
           RowBox[{"All", ",", "2"}], "]"}], "]"}], ",", "_NonTerm"}], 
        "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"commonNonTerms", " ", "=", " ", 
       RowBox[{"Intersection", "[", 
        RowBox[{"nonterms1", ",", "nonterms2"}], "]"}]}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"matchsIn1", " ", "=", " ", 
       RowBox[{"Cases", "[", 
        RowBox[{"labels1", ",", 
         RowBox[{
          RowBox[{"HoldPattern", "[", 
           RowBox[{"v_", "\[Rule]", 
            RowBox[{"l_", "/;", 
             RowBox[{"MemberQ", "[", 
              RowBox[{"commonNonTerms", ",", "l"}], "]"}]}]}], "]"}], 
          "\[RuleDelayed]", 
          RowBox[{"{", 
           RowBox[{"v", ",", "l"}], "}"}]}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"Length", "[", "matchsIn1", "]"}], "<", "2"}], ",", 
        RowBox[{"Return", "[", 
         RowBox[{"RandomChoice", "[", 
          RowBox[{"{", 
           RowBox[{
            RowBox[{"{", 
             RowBox[{"graph1", ",", "labels1"}], "}"}], ",", 
            RowBox[{"{", 
             RowBox[{"graph2", ",", "labels2"}], "}"}]}], "}"}], "]"}], 
         "]"}]}], "]"}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"{", 
        RowBox[{"vertex1", ",", "vertex1NonTerm"}], "}"}], " ", "=", " ", 
       RowBox[{"RandomChoice", "[", 
        RowBox[{"Drop", "[", 
         RowBox[{"matchsIn1", ",", "1"}], "]"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"vertex2", " ", "=", " ", 
       RowBox[{"RandomChoice", "[", 
        RowBox[{"Cases", "[", 
         RowBox[{"labels2", ",", 
          RowBox[{
           RowBox[{"HoldPattern", "[", 
            RowBox[{"v_", "\[Rule]", 
             RowBox[{"l_", "/;", 
              RowBox[{"l", "\[Equal]", "vertex1NonTerm"}]}]}], "]"}], 
           "\[RuleDelayed]", "v"}]}], "]"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"cropped", " ", "=", " ", 
       RowBox[{"DeleteSubtree", "[", 
        RowBox[{"graph1", ",", "labels1", ",", "vertex1"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"sub", " ", "=", " ", 
       RowBox[{"Apply", "[", 
        RowBox[{"RestartLabelsAt", ",", 
         RowBox[{"Subtree", "[", 
          RowBox[{"graph2", ",", "labels2", ",", "vertex2"}], "]"}]}], 
        "]"}]}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"InsertSubtree", "[", 
       RowBox[{
        RowBox[{"First", "[", "cropped", "]"}], ",", 
        RowBox[{"Last", "[", "cropped", "]"}], ",", 
        RowBox[{"First", "[", "sub", "]"}], ",", 
        RowBox[{"Last", "[", "sub", "]"}]}], "]"}]}]}], "\[IndentingNewLine]",
     "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"PopulationCrossover", "[", 
    RowBox[{"population_", ",", "childrenPerCouple_"}], "]"}], ":=", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", "parts", "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"parts", " ", "=", " ", 
       RowBox[{"Partition", "[", 
        RowBox[{
         RowBox[{"RandomSample", "[", "population", "]"}], ",", "2"}], 
        "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"Apply", "[", 
       RowBox[{"Join", ",", 
        RowBox[{"Table", "[", 
         RowBox[{
          RowBox[{"Map", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"Apply", "[", 
              RowBox[{"Crossover", ",", 
               RowBox[{"Flatten", "[", 
                RowBox[{"#", ",", "1"}], "]"}]}], "]"}], "&"}], ",", 
            "parts"}], "]"}], ",", "childrenPerCouple"}], "]"}]}], "]"}]}]}], 
    "\[IndentingNewLine]", "]"}]}], ";"}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.790466749113225*^9, 3.790466810450017*^9}, {
   3.790466863810899*^9, 3.79046686402149*^9}, {3.7904669464720497`*^9, 
   3.7904669517101917`*^9}, 3.790467327295747*^9, {3.790467400399068*^9, 
   3.790467400859676*^9}, {3.790634527353311*^9, 3.7906345319008837`*^9}, {
   3.790634982566733*^9, 3.790634998194525*^9}, {3.7906350801040993`*^9, 
   3.790635082146304*^9}, {3.790637109810677*^9, 3.790637144445629*^9}, 
   3.790637208867503*^9, {3.7906379520142107`*^9, 3.790637999461555*^9}, {
   3.790639235629305*^9, 3.790639261830152*^9}, {3.790639423956994*^9, 
   3.790639430103713*^9}, {3.7907952053538923`*^9, 3.790795211643199*^9}, {
   3.7908010579852123`*^9, 3.790801062049007*^9}, {3.790801120487714*^9, 
   3.790801121320326*^9}},
 CellLabel->"In[21]:=",ExpressionUUID->"3adbcaa5-4ee8-47d8-95e8-cf3d90c2376b"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"{", 
   RowBox[{"crossoverTree", ",", "crossoverLabels"}], "}"}], " ", "=", " ", 
  RowBox[{"Crossover", "[", 
   RowBox[{"g1", ",", "labels1", ",", "g2", ",", "labels2"}], 
   "]"}]}]], "Input",
 CellChangeTimes->{{3.790466994204937*^9, 3.7904670029552517`*^9}},
 CellLabel->
  "In[991]:=",ExpressionUUID->"ed9c5530-1be9-42a3-8668-b5927b1ee27a"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   GraphicsBox[
    NamespaceBox["NetworkGraphics",
     DynamicModuleBox[{Typeset`graph = HoldComplete[
       Graph[{1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 
        19}, {{{1, 2}, {1, 3}, {1, 4}, {3, 5}, {3, 6}, {3, 7}, {6, 8}, {8, 
         9}, {7, 10}, {10, 11}, {10, 12}, {4, 13}, {4, 14}, {4, 15}, {14, 
         16}, {16, 17}, {15, 18}, {18, 19}}, Null}, {
        VertexLabels -> {
          6 -> $CellContext`NonTerm["numQuant", 5], 
           18 -> $CellContext`NonTerm["expression", 8], 
           3 -> $CellContext`NonTerm["cond", 3], 
           11 -> $CellContext`Term["lag", "3"], 
           5 -> $CellContext`Term["numOp", "Greater"], 
           8 -> $CellContext`NonTerm["expression", 8], 
           7 -> $CellContext`NonTerm["numQuant", 5], 
           14 -> $CellContext`NonTerm["numQuant", 5], 
           10 -> $CellContext`NonTerm["expression", 7], 
           9 -> $CellContext`Term["observable", "High"], 
           4 -> $CellContext`NonTerm["cond", 3], 
           17 -> $CellContext`Term["observable", "Open"], 
           16 -> $CellContext`NonTerm["expression", 8], 
           12 -> $CellContext`Term["observable", "Low"], 
           13 -> $CellContext`Term["numOp", "Less"], 
           2 -> $CellContext`Term["logicOp", "And"], 
           15 -> $CellContext`NonTerm["numQuant", 5], 
           1 -> $CellContext`NonTerm["cond", 1], 
           19 -> $CellContext`Term["observable", "High"]}}]]}, 
      TagBox[GraphicsGroupBox[{
         {Hue[0.6, 0.7, 0.5], Opacity[0.7], Arrowheads[Medium], 
          ArrowBox[CompressedData["
1:eJxTTMoPSmVmYGAQAmImKJYRjEs6ufy3/SPp1i9vPNkdIPRx+1dXkrcXljM6
oMvfSlpmmCHzFqd83H7RyVrGXA4weXT1DFAAUf/dHl0eIv7cHpf8bTD/L1we
3b60ii+h6xNYHHDJw/i45HWapV9cYhKAy6O7B8Z/AKXR3QPjP0DR9xyDDwsH
7Oq/45RHD0dc/oGpR/cPjA+TR1cP48PMR1cP48PkATCkB9M=
           "], 
           0.03702325155936649]}, 
         {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[
          0.7]}], {
           DiskBox[{1.7284635393598995, 2.9110964873429888}, 
            0.03702325155936649], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"cond\"\>", ",", "1"}], ")"}], Offset[{2, 2}, 
            {1.765486790919266, 2.9481197389023555}], ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{0.1819435304589368, 2.183322365507242}, 
            0.03702325155936649], InsetBox[
            RowBox[{"Term", "(", 
             RowBox[{"\<\"logicOp\"\>", ",", "\<\"And\"\>"}], ")"}], 
            Offset[{2, 2}, {0.21896678201830327, 2.2203456170666085}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{0.9097176522946839, 2.183322365507242}, 
            0.03702325155936649], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"cond\"\>", ",", "3"}], ")"}], 
            Offset[{2, 2}, {0.9467409038540504, 2.2203456170666085}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{3.2749835482608622, 2.183322365507242}, 
            0.03702325155936649], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"cond\"\>", ",", "3"}], ")"}], 
            Offset[{2, 2}, {3.312006799820229, 2.2203456170666085}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{0., 1.4555482436714944}, 0.03702325155936649], InsetBox[
            RowBox[{"Term", "(", 
             RowBox[{"\<\"numOp\"\>", ",", "\<\"Greater\"\>"}], ")"}], 
            Offset[{2, 2}, {0.03702325155936649, 1.4925714952308609}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{0.7277741218357472, 1.4555482436714944}, 
            0.03702325155936649], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], 
            Offset[{2, 2}, {0.7647973733951137, 1.4925714952308609}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{1.819435304589368, 1.4555482436714944}, 
            0.03702325155936649], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], 
            Offset[{2, 2}, {1.8564585561487346, 1.4925714952308609}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{0.7277741218357472, 0.727774121835747}, 
            0.03702325155936649], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"expression\"\>", ",", "8"}], ")"}], 
            Offset[{2, 2}, {0.7647973733951137, 0.7647973733951134}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{0.7277741218357472, 0.}, 0.03702325155936649], InsetBox[
            RowBox[{"Term", "(", 
             RowBox[{"\<\"observable\"\>", ",", "\<\"High\"\>"}], ")"}], 
            Offset[{2, 2}, {0.7647973733951137, 0.03702325155936649}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{1.819435304589368, 0.727774121835747}, 
            0.03702325155936649], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"expression\"\>", ",", "7"}], ")"}], 
            Offset[{2, 2}, {1.8564585561487346, 0.7647973733951134}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{1.4555482436714944, 0.}, 0.03702325155936649], InsetBox[
            RowBox[{"Term", "(", 
             RowBox[{"\<\"lag\"\>", ",", "\<\"3\"\>"}], ")"}], 
            Offset[{2, 2}, {1.4925714952308609, 0.03702325155936649}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{2.183322365507242, 0.}, 0.03702325155936649], InsetBox[
            RowBox[{"Term", "(", 
             RowBox[{"\<\"observable\"\>", ",", "\<\"Low\"\>"}], ")"}], 
            Offset[{2, 2}, {2.2203456170666085, 0.03702325155936649}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{2.5472094264251153, 1.4555482436714944}, 
            0.03702325155936649], InsetBox[
            RowBox[{"Term", "(", 
             RowBox[{"\<\"numOp\"\>", ",", "\<\"Less\"\>"}], ")"}], 
            Offset[{2, 2}, {2.584232677984482, 1.4925714952308609}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{3.2749835482608622, 1.4555482436714944}, 
            0.03702325155936649], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], 
            Offset[{2, 2}, {3.312006799820229, 1.4925714952308609}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{4.00275767009661, 1.4555482436714944}, 
            0.03702325155936649], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], 
            Offset[{2, 2}, {4.039780921655977, 1.4925714952308609}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{3.2749835482608622, 0.727774121835747}, 
            0.03702325155936649], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"expression\"\>", ",", "8"}], ")"}], 
            Offset[{2, 2}, {3.312006799820229, 0.7647973733951134}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{3.2749835482608622, 0.}, 0.03702325155936649], InsetBox[
            RowBox[{"Term", "(", 
             RowBox[{"\<\"observable\"\>", ",", "\<\"Open\"\>"}], ")"}], 
            Offset[{2, 2}, {3.312006799820229, 0.03702325155936649}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{4.00275767009661, 0.727774121835747}, 
            0.03702325155936649], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"expression\"\>", ",", "8"}], ")"}], 
            Offset[{2, 2}, {4.039780921655977, 0.7647973733951134}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{4.00275767009661, 0.}, 0.03702325155936649], InsetBox[
            RowBox[{"Term", "(", 
             RowBox[{"\<\"observable\"\>", ",", "\<\"High\"\>"}], ")"}], 
            Offset[{2, 2}, {4.039780921655977, 0.03702325155936649}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}}}],
       MouseAppearanceTag["NetworkGraphics"]],
      AllowKernelInitialization->False]],
    DefaultBaseStyle->{
     "NetworkGraphics", FrontEnd`GraphicsHighlightColor -> Hue[0.8, 1., 0.6]},
    
    FormatType->TraditionalForm,
    FrameTicks->None,
    ImageSize->{359., Automatic}], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"1", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"cond\"\>", ",", "1"}], "]"}]}], ",", 
     RowBox[{"2", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\<\"logicOp\"\>", ",", "\<\"And\"\>"}], "]"}]}], ",", 
     RowBox[{"3", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"cond\"\>", ",", "3"}], "]"}]}], ",", 
     RowBox[{"4", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"cond\"\>", ",", "3"}], "]"}]}], ",", 
     RowBox[{"5", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\<\"numOp\"\>", ",", "\<\"Greater\"\>"}], "]"}]}], ",", 
     RowBox[{"6", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"numQuant\"\>", ",", "5"}], "]"}]}], ",", 
     RowBox[{"7", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"numQuant\"\>", ",", "5"}], "]"}]}], ",", 
     RowBox[{"8", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"expression\"\>", ",", "8"}], "]"}]}], ",", 
     RowBox[{"9", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\<\"observable\"\>", ",", "\<\"High\"\>"}], "]"}]}], ",", 
     RowBox[{"10", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"expression\"\>", ",", "7"}], "]"}]}], ",", 
     RowBox[{"11", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\<\"lag\"\>", ",", "\<\"3\"\>"}], "]"}]}], ",", 
     RowBox[{"12", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\<\"observable\"\>", ",", "\<\"Low\"\>"}], "]"}]}], ",", 
     RowBox[{"13", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\<\"numOp\"\>", ",", "\<\"Less\"\>"}], "]"}]}], ",", 
     RowBox[{"14", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"numQuant\"\>", ",", "5"}], "]"}]}], ",", 
     RowBox[{"15", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"numQuant\"\>", ",", "5"}], "]"}]}], ",", 
     RowBox[{"16", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"expression\"\>", ",", "8"}], "]"}]}], ",", 
     RowBox[{"17", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\<\"observable\"\>", ",", "\<\"Open\"\>"}], "]"}]}], ",", 
     RowBox[{"18", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"expression\"\>", ",", "8"}], "]"}]}], ",", 
     RowBox[{"19", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\<\"observable\"\>", ",", "\<\"High\"\>"}], "]"}]}]}], 
    "}"}]}], "}"}]], "Output",
 CellChangeTimes->{{3.790466992581543*^9, 3.7904670031818943`*^9}, {
   3.790467038969281*^9, 3.79046705629073*^9}, {3.790467330137656*^9, 
   3.790467372427169*^9}, 3.7906371660820713`*^9, {3.7906372110854673`*^9, 
   3.7906372174427357`*^9}, {3.7906390409950237`*^9, 3.790639052104679*^9}, {
   3.790639265420136*^9, 3.790639267838518*^9}, 3.790639435007971*^9, 
   3.790779171210329*^9, {3.7907952161389503`*^9, 3.790795224466167*^9}, {
   3.790797371305059*^9, 3.790797383563361*^9}},
 CellLabel->
  "Out[991]=",ExpressionUUID->"fbc899ce-a0df-4414-917c-487aabde9478"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"SynthesizeTree", "[", 
   RowBox[{"crossoverTree", ",", "crossoverLabels", ",", "grammar"}], "]"}], "//",
   " ", "FullForm"}]], "Input",
 CellChangeTimes->{{3.7904668837630663`*^9, 3.790466892338079*^9}, {
  3.790466972237011*^9, 3.79046701970192*^9}},
 CellLabel->
  "In[647]:=",ExpressionUUID->"b419ca0e-3884-44b4-83f9-f19462c0db42"],

Cell[BoxData[
 TagBox[
  StyleBox[
   RowBox[{"And", "[", 
    RowBox[{
     RowBox[{"Greater", "[", 
      RowBox[{"\"\<High\>\"", ",", 
       RowBox[{"Prev", "[", 
        RowBox[{"\"\<Low\>\"", ",", "3"}], "]"}]}], "]"}], ",", 
     RowBox[{"Less", "[", 
      RowBox[{"\"\<Open\>\"", ",", "\"\<Close\>\""}], "]"}]}], "]"}],
   ShowSpecialCharacters->False,
   ShowStringCharacters->True,
   NumberMarks->True],
  FullForm]], "Output",
 CellChangeTimes->{
  3.790466893181904*^9, {3.790466953156445*^9, 3.790466982535943*^9}, {
   3.790467013072295*^9, 3.790467057159038*^9}, {3.7904673319765387`*^9, 
   3.790467373072021*^9}, {3.790639050175517*^9, 3.790639053355798*^9}, {
   3.7907952201501913`*^9, 3.7907952256213827`*^9}},
 CellLabel->
  "Out[647]//FullForm=",ExpressionUUID->"dc00a929-ff37-4aff-9a2a-\
192e615f8a5b"]
}, Open  ]]
}, Closed]],

Cell[CellGroupData[{

Cell["Mutation", "Section",
 CellChangeTimes->{{3.790467419191723*^9, 
  3.790467421120267*^9}},ExpressionUUID->"2de844f5-b328-4128-981c-\
36589e6bf85d"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"TreeMutation", "[", 
    RowBox[{"graph_", ",", "labels_"}], "]"}], ":=", 
   RowBox[{"Crossover", "[", 
    RowBox[{"graph", ",", "labels", ",", "graph", ",", "labels"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"TerminalMutation", "[", 
    RowBox[{"labels_", ",", "terminalSet_"}], "]"}], ":=", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"choice", ",", "type", ",", "newTerm", ",", "availableTerms"}], 
      "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"choice", " ", "=", " ", 
       RowBox[{"RandomChoice", "[", 
        RowBox[{"Cases", "[", 
         RowBox[{"labels", ",", 
          RowBox[{"HoldPattern", "[", 
           RowBox[{"_", "\[Rule]", "_Term"}], "]"}]}], "]"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"type", " ", "=", " ", 
       RowBox[{"First", "[", 
        RowBox[{"Level", "[", 
         RowBox[{
          RowBox[{"Last", "[", "choice", "]"}], ",", 
          RowBox[{"{", "1", "}"}]}], "]"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"availableTerms", " ", "=", " ", 
       RowBox[{"Complement", "[", 
        RowBox[{
         RowBox[{"Cases", "[", 
          RowBox[{"terminalSet", ",", 
           RowBox[{"Term", "[", 
            RowBox[{"type", ",", "_"}], "]"}]}], "]"}], ",", 
         RowBox[{"{", 
          RowBox[{"Last", "[", "choice", "]"}], "}"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"availableTerms", " ", "\[NotEqual]", " ", 
         RowBox[{"{", "}"}]}], ",", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"newTerm", " ", "=", " ", 
          RowBox[{"RandomChoice", "[", "availableTerms", "]"}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"ReplacePart", "[", 
          RowBox[{"labels", ",", 
           RowBox[{
            RowBox[{"First", "[", "choice", "]"}], "\[Rule]", 
            RowBox[{"(", 
             RowBox[{
              RowBox[{"First", "[", "choice", "]"}], "\[Rule]", "newTerm"}], 
             ")"}]}]}], "]"}]}], "\[IndentingNewLine]", ",", 
        "\[IndentingNewLine]", "labels"}], "\[IndentingNewLine]", "]"}]}]}], 
    "\[IndentingNewLine]", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"Mutation", "[", 
    RowBox[{"graph_", ",", "labels_", ",", "terminalSet_"}], "]"}], ":=", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", "mutatedSymbols", "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{"If", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"RandomReal", "[", "]"}], "\[GreaterEqual]", "0.5"}], ",", 
       "\[IndentingNewLine]", 
       RowBox[{"TreeMutation", "[", 
        RowBox[{"graph", ",", "labels"}], "]"}], ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"mutatedSymbols", " ", "=", " ", 
         RowBox[{"TerminalMutation", "[", 
          RowBox[{"labels", ",", "terminalSet"}], "]"}]}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"Graph", "[", 
           RowBox[{
            RowBox[{"EdgeList", "[", "graph", "]"}], ",", 
            RowBox[{"VertexLabels", "\[Rule]", "mutatedSymbols"}]}], "]"}], 
          ",", "mutatedSymbols"}], "}"}]}]}], "\[IndentingNewLine]", "]"}]}], 
    "\[IndentingNewLine]", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"PopulationMutate", "[", 
    RowBox[{"population_", ",", "probability_", ",", "terminalSet_"}], "]"}], 
   ":=", 
   RowBox[{"Map", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"RandomReal", "[", "]"}], "<", "probability"}], ",", 
        RowBox[{"Mutation", "[", 
         RowBox[{
          RowBox[{"First", "[", "#", "]"}], ",", 
          RowBox[{"Last", "[", "#", "]"}], ",", "terminalSet"}], "]"}], ",", 
        "#"}], "]"}], "&"}], ",", "population"}], "]"}]}], ";"}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.790467590078511*^9, 3.790467606299004*^9}, {
   3.790469761626421*^9, 3.790469834358567*^9}, {3.790469908034996*^9, 
   3.790469949268796*^9}, {3.790470046263938*^9, 3.7904700465336723`*^9}, {
   3.790630645764824*^9, 3.790630648169147*^9}, {3.7906323721491537`*^9, 
   3.790632420133245*^9}, 3.7906331090384607`*^9},
 CellLabel->"In[23]:=",ExpressionUUID->"312ef10a-a074-4597-b6a0-f711298c9fb9"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"{", 
   RowBox[{"mutatedTree", ",", "mutatedLabels"}], "}"}], " ", "=", " ", 
  RowBox[{"Mutation", "[", 
   RowBox[{"g1", ",", "labels1", ",", "terminalSet"}], "]"}]}]], "Input",
 CellChangeTimes->{{3.790469988659707*^9, 3.79046999659832*^9}},
 CellLabel->
  "In[177]:=",ExpressionUUID->"a82a72d0-25c5-486e-8bea-974d20c28ac8"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   GraphicsBox[
    NamespaceBox["NetworkGraphics",
     DynamicModuleBox[{Typeset`graph = HoldComplete[
       Graph[{1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 
        19}, {{{1, 2}, {1, 3}, {1, 4}, {3, 5}, {3, 6}, {3, 7}, {6, 8}, {8, 
         9}, {7, 10}, {10, 11}, {10, 12}, {4, 13}, {4, 14}, {4, 15}, {14, 
         16}, {16, 17}, {15, 18}, {18, 19}}, Null}, {
        VertexLabels -> {
          6 -> $CellContext`NonTerm["numQuant", 5], 
           18 -> $CellContext`NonTerm["expression", 8], 
           3 -> $CellContext`NonTerm["cond", 3], 
           11 -> $CellContext`Term["lag", "4"], 
           5 -> $CellContext`Term["numOp", "Greater"], 
           8 -> $CellContext`NonTerm["expression", 8], 
           7 -> $CellContext`NonTerm["numQuant", 5], 
           14 -> $CellContext`NonTerm["numQuant", 5], 
           10 -> $CellContext`NonTerm["expression", 7], 
           9 -> $CellContext`Term["observable", "High"], 
           4 -> $CellContext`NonTerm["cond", 3], 
           17 -> $CellContext`Term["observable", "Open"], 
           16 -> $CellContext`NonTerm["expression", 8], 
           12 -> $CellContext`Term["observable", "Low"], 
           13 -> $CellContext`Term["numOp", "Less"], 
           2 -> $CellContext`Term["logicOp", "And"], 
           15 -> $CellContext`NonTerm["numQuant", 5], 
           1 -> $CellContext`NonTerm["cond", 1], 
           19 -> $CellContext`Term["observable", "Close"]}}]]}, 
      TagBox[GraphicsGroupBox[{
         {Hue[0.6, 0.7, 0.5], Opacity[0.7], Arrowheads[Medium], 
          ArrowBox[CompressedData["
1:eJxTTMoPSmVmYGAQAmImKJYRjEs6ufy3/SPp1i9vPNkdIPRx+1dXkrcXljM6
oMvfSlpmmCHzFqd83H7RyVrGXA4weXT1DFAAUf/dHl0eIv7cHpf8bTD/L1we
3b60ii+h6xNYHHDJw/i45HWapV9cYhKAy6O7B8Z/AKXR3QPjP0DR9xyDDwsH
7Oq/45RHD0dc/oGpR/cPjA+TR1cP48PMR1cP48PkATCkB9M=
           "], 
           0.03702325155936649]}, 
         {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[
          0.7]}], {
           DiskBox[{1.7284635393598995, 2.9110964873429888}, 
            0.03702325155936649], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"cond\"\>", ",", "1"}], ")"}], Offset[{2, 2}, 
            {1.765486790919266, 2.9481197389023555}], ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{0.1819435304589368, 2.183322365507242}, 
            0.03702325155936649], InsetBox[
            RowBox[{"Term", "(", 
             RowBox[{"\<\"logicOp\"\>", ",", "\<\"And\"\>"}], ")"}], 
            Offset[{2, 2}, {0.21896678201830327, 2.2203456170666085}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{0.9097176522946839, 2.183322365507242}, 
            0.03702325155936649], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"cond\"\>", ",", "3"}], ")"}], 
            Offset[{2, 2}, {0.9467409038540504, 2.2203456170666085}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{3.2749835482608622, 2.183322365507242}, 
            0.03702325155936649], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"cond\"\>", ",", "3"}], ")"}], 
            Offset[{2, 2}, {3.312006799820229, 2.2203456170666085}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{0., 1.4555482436714944}, 0.03702325155936649], InsetBox[
            RowBox[{"Term", "(", 
             RowBox[{"\<\"numOp\"\>", ",", "\<\"Greater\"\>"}], ")"}], 
            Offset[{2, 2}, {0.03702325155936649, 1.4925714952308609}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{0.7277741218357472, 1.4555482436714944}, 
            0.03702325155936649], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], 
            Offset[{2, 2}, {0.7647973733951137, 1.4925714952308609}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{1.819435304589368, 1.4555482436714944}, 
            0.03702325155936649], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], 
            Offset[{2, 2}, {1.8564585561487346, 1.4925714952308609}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{0.7277741218357472, 0.727774121835747}, 
            0.03702325155936649], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"expression\"\>", ",", "8"}], ")"}], 
            Offset[{2, 2}, {0.7647973733951137, 0.7647973733951134}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{0.7277741218357472, 0.}, 0.03702325155936649], InsetBox[
            RowBox[{"Term", "(", 
             RowBox[{"\<\"observable\"\>", ",", "\<\"High\"\>"}], ")"}], 
            Offset[{2, 2}, {0.7647973733951137, 0.03702325155936649}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{1.819435304589368, 0.727774121835747}, 
            0.03702325155936649], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"expression\"\>", ",", "7"}], ")"}], 
            Offset[{2, 2}, {1.8564585561487346, 0.7647973733951134}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{1.4555482436714944, 0.}, 0.03702325155936649], InsetBox[
            RowBox[{"Term", "(", 
             RowBox[{"\<\"lag\"\>", ",", "\<\"4\"\>"}], ")"}], 
            Offset[{2, 2}, {1.4925714952308609, 0.03702325155936649}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{2.183322365507242, 0.}, 0.03702325155936649], InsetBox[
            RowBox[{"Term", "(", 
             RowBox[{"\<\"observable\"\>", ",", "\<\"Low\"\>"}], ")"}], 
            Offset[{2, 2}, {2.2203456170666085, 0.03702325155936649}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{2.5472094264251153, 1.4555482436714944}, 
            0.03702325155936649], InsetBox[
            RowBox[{"Term", "(", 
             RowBox[{"\<\"numOp\"\>", ",", "\<\"Less\"\>"}], ")"}], 
            Offset[{2, 2}, {2.584232677984482, 1.4925714952308609}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{3.2749835482608622, 1.4555482436714944}, 
            0.03702325155936649], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], 
            Offset[{2, 2}, {3.312006799820229, 1.4925714952308609}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{4.00275767009661, 1.4555482436714944}, 
            0.03702325155936649], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], 
            Offset[{2, 2}, {4.039780921655977, 1.4925714952308609}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{3.2749835482608622, 0.727774121835747}, 
            0.03702325155936649], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"expression\"\>", ",", "8"}], ")"}], 
            Offset[{2, 2}, {3.312006799820229, 0.7647973733951134}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{3.2749835482608622, 0.}, 0.03702325155936649], InsetBox[
            RowBox[{"Term", "(", 
             RowBox[{"\<\"observable\"\>", ",", "\<\"Open\"\>"}], ")"}], 
            Offset[{2, 2}, {3.312006799820229, 0.03702325155936649}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{4.00275767009661, 0.727774121835747}, 
            0.03702325155936649], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"expression\"\>", ",", "8"}], ")"}], 
            Offset[{2, 2}, {4.039780921655977, 0.7647973733951134}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{4.00275767009661, 0.}, 0.03702325155936649], InsetBox[
            RowBox[{"Term", "(", 
             RowBox[{"\<\"observable\"\>", ",", "\<\"Close\"\>"}], ")"}], 
            Offset[{2, 2}, {4.039780921655977, 0.03702325155936649}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}}}],
       MouseAppearanceTag["NetworkGraphics"]],
      AllowKernelInitialization->False]],
    DefaultBaseStyle->{
     "NetworkGraphics", FrontEnd`GraphicsHighlightColor -> Hue[0.8, 1., 0.6]},
    
    FormatType->TraditionalForm,
    FrameTicks->None], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"1", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"cond\"\>", ",", "1"}], "]"}]}], ",", 
     RowBox[{"2", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\<\"logicOp\"\>", ",", "\<\"And\"\>"}], "]"}]}], ",", 
     RowBox[{"3", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"cond\"\>", ",", "3"}], "]"}]}], ",", 
     RowBox[{"4", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"cond\"\>", ",", "3"}], "]"}]}], ",", 
     RowBox[{"5", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\<\"numOp\"\>", ",", "\<\"Greater\"\>"}], "]"}]}], ",", 
     RowBox[{"6", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"numQuant\"\>", ",", "5"}], "]"}]}], ",", 
     RowBox[{"7", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"numQuant\"\>", ",", "5"}], "]"}]}], ",", 
     RowBox[{"8", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"expression\"\>", ",", "8"}], "]"}]}], ",", 
     RowBox[{"9", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\<\"observable\"\>", ",", "\<\"High\"\>"}], "]"}]}], ",", 
     RowBox[{"10", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"expression\"\>", ",", "7"}], "]"}]}], ",", 
     RowBox[{"11", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\<\"lag\"\>", ",", "\<\"4\"\>"}], "]"}]}], ",", 
     RowBox[{"12", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\<\"observable\"\>", ",", "\<\"Low\"\>"}], "]"}]}], ",", 
     RowBox[{"13", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\<\"numOp\"\>", ",", "\<\"Less\"\>"}], "]"}]}], ",", 
     RowBox[{"14", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"numQuant\"\>", ",", "5"}], "]"}]}], ",", 
     RowBox[{"15", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"numQuant\"\>", ",", "5"}], "]"}]}], ",", 
     RowBox[{"16", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"expression\"\>", ",", "8"}], "]"}]}], ",", 
     RowBox[{"17", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\<\"observable\"\>", ",", "\<\"Open\"\>"}], "]"}]}], ",", 
     RowBox[{"18", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"expression\"\>", ",", "8"}], "]"}]}], ",", 
     RowBox[{"19", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\<\"observable\"\>", ",", "\<\"Close\"\>"}], "]"}]}]}], 
    "}"}]}], "}"}]], "Output",
 CellChangeTimes->{{3.790469986281681*^9, 3.790470011955103*^9}},
 CellLabel->
  "Out[177]=",ExpressionUUID->"2f29cb10-efad-4d8a-b628-20b254ba4d64"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"SynthesizeTree", "[", 
  RowBox[{"mutatedTree", ",", "mutatedLabels", ",", "grammar"}], 
  "]"}]], "Input",
 CellChangeTimes->{{3.7904699504560432`*^9, 3.790470001254924*^9}},
 CellLabel->
  "In[178]:=",ExpressionUUID->"f7e83c78-fc42-4a1a-befb-ab0149dc66dc"],

Cell[BoxData[
 RowBox[{
  RowBox[{"High", ">", 
   RowBox[{"Prev", "[", 
    RowBox[{"Low", ",", "4"}], "]"}]}], "&&", 
  RowBox[{"Open", "<", "Close"}]}]], "Output",
 CellChangeTimes->{{3.790469960586241*^9, 3.790470012539222*^9}},
 CellLabel->
  "Out[178]=",ExpressionUUID->"6349a885-0a94-4b14-82b9-00c7ad1675e0"]
}, Open  ]]
}, Closed]],

Cell[CellGroupData[{

Cell["Fitness function", "Section",
 CellChangeTimes->{{3.790470072512094*^9, 
  3.790470076306596*^9}},ExpressionUUID->"dc03ccae-1210-4d2a-b9c5-\
1264261085e5"],

Cell[CellGroupData[{

Cell["Database creation", "Subsection",
 CellChangeTimes->{{3.790624942461688*^9, 
  3.7906249463657513`*^9}},ExpressionUUID->"bf6bc8c3-13c3-4ca9-995f-\
a4edcf596f11"],

Cell[BoxData[
 RowBox[{
  RowBox[{"dateFolders", " ", "=", " ", 
   RowBox[{"Select", "[", 
    RowBox[{
     RowBox[{"FileNames", "[", 
      RowBox[{"\"\<*\>\"", ",", 
       RowBox[{"FileNameJoin", "[", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"ParentDirectory", "@", 
           RowBox[{"NotebookDirectory", "[", "]"}]}], ",", "\"\<Datasets\>\"",
           ",", "\"\<BMV\>\""}], "}"}], "]"}]}], "]"}], ",", 
     RowBox[{
      RowBox[{
       RowBox[{"FileExtension", "[", "#", "]"}], "\[Equal]", "\"\<\>\""}], 
      "&"}]}], "]"}]}], ";"}]], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.788882939200996*^9, 3.788882957447665*^9}},
 CellLabel->"In[27]:=",ExpressionUUID->"34b3163e-8242-463e-b6c1-c9113fa72a26"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"dates", " ", "=", " ", 
  RowBox[{"Map", "[", 
   RowBox[{"FileBaseName", ",", "dateFolders"}], "]"}]}]], "Input",
 InitializationCell->True,
 CellChangeTimes->{3.790610461559256*^9},
 CellLabel->"In[28]:=",ExpressionUUID->"1a57f338-2868-4173-b9ba-4694629fd163"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"\<\"2020-01-20\"\>", ",", "\<\"2020-01-21\"\>", 
   ",", "\<\"2020-01-22\"\>", ",", "\<\"2020-01-23\"\>", 
   ",", "\<\"2020-01-24\"\>", ",", "\<\"2020-01-27\"\>", 
   ",", "\<\"2020-01-28\"\>", ",", "\<\"2020-01-29\"\>", 
   ",", "\<\"2020-01-30\"\>", ",", "\<\"2020-01-31\"\>", 
   ",", "\<\"2020-02-04\"\>", ",", "\<\"2020-02-05\"\>", 
   ",", "\<\"2020-02-06\"\>", ",", "\<\"2020-02-07\"\>", 
   ",", "\<\"2020-02-10\"\>", ",", "\<\"2020-02-11\"\>", 
   ",", "\<\"2020-02-12\"\>", ",", "\<\"2020-02-13\"\>"}], "}"}]], "Output",
 CellChangeTimes->{
  3.790631192551043*^9, 3.790631419389515*^9, 3.790631504433189*^9, 
   3.7906315422822533`*^9, 3.7906316057383738`*^9, 3.790631644606977*^9, 
   3.790631680179603*^9, 3.790631755819853*^9, 3.790635731421492*^9, 
   3.790636246713114*^9, 3.790636360244657*^9, 3.790636948306704*^9, {
   3.790637689294608*^9, 3.7906377153097363`*^9}, 3.790637805226366*^9, 
   3.790638473378263*^9, 3.790689372215789*^9, 3.79077630447714*^9, 
   3.7907843625064163`*^9, 3.79080039889672*^9, 3.790800456380513*^9, 
   3.7908022711854753`*^9, 3.790803455622735*^9},
 CellLabel->"Out[28]=",ExpressionUUID->"17485191-875c-4d94-b80d-73d73887b5d9"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"{", 
    RowBox[{"trainingDates", ",", "validationDates"}], "}"}], " ", "=", " ", 
   RowBox[{"TakeDrop", "[", 
    RowBox[{"dates", ",", 
     RowBox[{"Ceiling", "[", 
      RowBox[{"0.8", 
       RowBox[{"Length", "[", "dates", "]"}]}], "]"}]}], "]"}]}], 
  ";"}]], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.790627676383193*^9, 3.79062771741317*^9}, {
  3.790629399118*^9, 3.790629407657918*^9}},
 CellLabel->"In[29]:=",ExpressionUUID->"1705bd13-18bb-404e-bfbe-a59d1e71a895"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"stockPaths", " ", "=", " ", 
   RowBox[{"FileNames", "[", 
    RowBox[{"\"\<*\>\"", ",", 
     RowBox[{"FileNameJoin", "[", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"ParentDirectory", "@", 
         RowBox[{"NotebookDirectory", "[", "]"}]}], ",", "\"\<Datasets\>\"", 
        ",", "\"\<BMV\>\"", ",", 
        RowBox[{"First", "[", "dates", "]"}]}], "}"}], "]"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"stocks", " ", "=", " ", 
  RowBox[{"Map", "[", 
   RowBox[{"FileBaseName", ",", "stockPaths"}], "]"}]}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.790607899077216*^9, 3.7906079437946787`*^9}, {
  3.790609903315957*^9, 3.790609905123448*^9}, {3.790610131661234*^9, 
  3.7906101332286*^9}, {3.790610193323923*^9, 3.790610195083009*^9}},
 CellLabel->"In[30]:=",ExpressionUUID->"3ed9ee7c-402c-464f-86f5-cc4f9cb875f4"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"\<\"AC.MX\"\>", ",", "\<\"ALPEKA.MX\"\>", ",", "\<\"ALSEA.MX\"\>", 
   ",", "\<\"AMXL.MX\"\>", ",", "\<\"ASURB.MX\"\>", ",", "\<\"BBAJIOO.MX\"\>",
    ",", "\<\"BIMBOA.MX\"\>", ",", "\<\"BOLSAA.MX\"\>", 
   ",", "\<\"BSMXB.MX\"\>", ",", "\<\"CEMEXCPO.MX\"\>", 
   ",", "\<\"CUERVO.MX\"\>", ",", "\<\"GAPB.MX\"\>", 
   ",", "\<\"GCARSOA1.MX\"\>", ",", "\<\"GCC.MX\"\>", 
   ",", "\<\"GENTERA.MX\"\>", ",", "\<\"GFNORTEO.MX\"\>", 
   ",", "\<\"GMEXICOB.MX\"\>", ",", "\<\"GRUMAB.MX\"\>", 
   ",", "\<\"IENOVA.MX\"\>", ",", "\<\"KIMBERA.MX\"\>", 
   ",", "\<\"KOFUBL.MX\"\>", ",", "\<\"LABB.MX\"\>", 
   ",", "\<\"LIVEPOLC-1.MX\"\>", ",", "\<\"MEGACPO.MX\"\>", 
   ",", "\<\"OMAB.MX\"\>", ",", "\<\"ORBIA.MX\"\>", ",", "\<\"PE&OLES.MX\"\>",
    ",", "\<\"PINFRA.MX\"\>", ",", "\<\"RA.MX\"\>", 
   ",", "\<\"TLEVISACPO.MX\"\>"}], "}"}]], "Output",
 CellChangeTimes->{
  3.7906101341310463`*^9, 3.790610195268833*^9, 3.790620802448702*^9, 
   3.790631192636964*^9, 3.790631419450148*^9, 3.790631504509594*^9, {
   3.790631542388895*^9, 3.790631543312458*^9}, 3.790631605829061*^9, 
   3.790631644682591*^9, 3.790631681161956*^9, 3.790631756118432*^9, 
   3.7906357315029984`*^9, 3.7906362468205347`*^9, 3.79063636063664*^9, 
   3.7906369483851357`*^9, {3.790637689429286*^9, 3.790637715448543*^9}, 
   3.790637805355695*^9, 3.790638473482689*^9, 3.790689372255484*^9, 
   3.790776304553379*^9, 3.790784363193576*^9, 3.790800399245614*^9, 
   3.790800456718313*^9, 3.790802271263049*^9, 3.790803455706005*^9},
 CellLabel->"Out[31]=",ExpressionUUID->"ba109d97-550c-4b58-a38a-1886c7b1e301"]
}, Open  ]],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"AdaptativeMovingAverage", "[", 
    RowBox[{"maFunc_", ",", "list_", ",", "r_"}], "]"}], ":=", 
   RowBox[{"Join", "[", 
    RowBox[{
     RowBox[{"Table", "[", 
      RowBox[{
       RowBox[{"First", "@", 
        RowBox[{"maFunc", "[", 
         RowBox[{
          RowBox[{"Take", "[", 
           RowBox[{"list", ",", "n"}], "]"}], ",", "n"}], "]"}]}], ",", 
       RowBox[{"{", 
        RowBox[{"n", ",", "1", ",", 
         RowBox[{"r", "-", "1"}]}], "}"}]}], "]"}], ",", 
     RowBox[{"maFunc", "[", 
      RowBox[{"list", ",", "r"}], "]"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"LaggedList", "[", 
     RowBox[{"list_", ",", "lag_"}], "]"}], ":=", 
    RowBox[{"Join", "[", 
     RowBox[{
      RowBox[{"ConstantArray", "[", 
       RowBox[{
        RowBox[{"First", "[", "list", "]"}], ",", "lag"}], "]"}], ",", 
      RowBox[{"Drop", "[", 
       RowBox[{"list", ",", 
        RowBox[{"-", "lag"}]}], "]"}]}], "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"BuildDerivatives", "[", "dataset_", "]"}], ":=", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "keys", ",", "windows", ",", "obsWindowTuples", ",", "sma", ",", "ema", 
       ",", "lags", ",", "obsLagTuples", ",", "prev", ",", "derivatives", ",",
        "derivativesData"}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"keys", " ", "=", " ", 
       RowBox[{"Drop", "[", 
        RowBox[{
         RowBox[{"Keys", "[", 
          RowBox[{"First", "[", "dataset", "]"}], "]"}], ",", 
         RowBox[{"-", "1"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"windows", " ", "=", " ", 
       RowBox[{"Range", "[", 
        RowBox[{"10", ",", "50", ",", "10"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"obsWindowTuples", " ", "=", " ", 
       RowBox[{"Tuples", "[", 
        RowBox[{"{", 
         RowBox[{"keys", ",", "windows"}], "}"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"lags", " ", "=", " ", 
       RowBox[{"Range", "[", 
        RowBox[{"1", ",", "5"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"obsLagTuples", " ", "=", " ", 
       RowBox[{"Tuples", "[", 
        RowBox[{"{", 
         RowBox[{"keys", ",", "lags"}], "}"}], "]"}]}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"sma", " ", "=", 
       RowBox[{"Map", "[", 
        RowBox[{
         RowBox[{
          RowBox[{
           RowBox[{"Apply", "[", 
            RowBox[{"SMA", ",", "#"}], "]"}], "\[Rule]", 
           RowBox[{"AdaptativeMovingAverage", "[", 
            RowBox[{"MovingAverage", ",", 
             RowBox[{"dataset", "[", 
              RowBox[{"[", 
               RowBox[{"All", ",", 
                RowBox[{"First", "[", "#", "]"}]}], "]"}], "]"}], ",", 
             RowBox[{"Last", "[", "#", "]"}]}], "]"}]}], "&"}], ",", 
         "obsWindowTuples"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"ema", " ", "=", 
       RowBox[{"Map", "[", 
        RowBox[{
         RowBox[{
          RowBox[{
           RowBox[{"Apply", "[", 
            RowBox[{"EMA", ",", "#"}], "]"}], "\[Rule]", 
           RowBox[{"ExponentialMovingAverage", "[", 
            RowBox[{
             RowBox[{"dataset", "[", 
              RowBox[{"[", 
               RowBox[{"All", ",", 
                RowBox[{"First", "[", "#", "]"}]}], "]"}], "]"}], ",", 
             FractionBox[
              RowBox[{"Last", "[", "#", "]"}], "50"]}], "]"}]}], "&"}], ",", 
         "obsWindowTuples"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"prev", " ", "=", " ", 
       RowBox[{"Map", "[", 
        RowBox[{
         RowBox[{
          RowBox[{
           RowBox[{"Apply", "[", 
            RowBox[{"Prev", ",", "#"}], "]"}], "\[Rule]", 
           RowBox[{"LaggedList", "[", 
            RowBox[{
             RowBox[{"dataset", "[", 
              RowBox[{"[", 
               RowBox[{"All", ",", 
                RowBox[{"First", "[", "#", "]"}]}], "]"}], "]"}], ",", 
             RowBox[{"Last", "[", "#", "]"}]}], "]"}]}], "&"}], ",", 
         "obsLagTuples"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"derivatives", " ", "=", " ", 
       RowBox[{"Map", "[", 
        RowBox[{"Thread", ",", 
         RowBox[{"Join", "[", 
          RowBox[{"sma", ",", "ema", ",", "prev"}], "]"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"derivativesData", " ", "=", " ", 
       RowBox[{"Map", "[", 
        RowBox[{"Association", ",", 
         RowBox[{"Transpose", "[", "derivatives", "]"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"MapThread", "[", 
       RowBox[{"Join", ",", 
        RowBox[{"{", 
         RowBox[{"derivativesData", ",", "dataset"}], "}"}]}], "]"}]}]}], 
    "\[IndentingNewLine]", "\[IndentingNewLine]", "]"}]}], ";"}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.790622891853881*^9, 3.7906228923873253`*^9}, {
  3.790623636871862*^9, 3.790623736807273*^9}, {3.79062377767137*^9, 
  3.790623824694727*^9}, {3.790623976635293*^9, 3.7906239793836727`*^9}, {
  3.790624226861888*^9, 3.790624238428788*^9}, {3.790624439841782*^9, 
  3.790624456410771*^9}, {3.790625089428602*^9, 3.790625105943892*^9}},
 CellLabel->"In[32]:=",ExpressionUUID->"2bc15f53-9f9e-4bbb-bc1a-61ae98e23550"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"CreateTick", "[", 
    RowBox[{"{", 
     RowBox[{
     "open_", ",", "high_", ",", "low_", ",", "close_", ",", "volume_"}], 
     "}"}], "]"}], ":=", 
   RowBox[{"<|", 
    RowBox[{
     RowBox[{"\"\<Open\>\"", "\[Rule]", "open"}], ",", 
     RowBox[{"\"\<High\>\"", "\[Rule]", "high"}], ",", 
     RowBox[{"\"\<Low\>\"", "\[Rule]", "low"}], ",", 
     RowBox[{"\"\<Close\>\"", "\[Rule]", "close"}], ",", 
     RowBox[{"\"\<Volume\>\"", "\[Rule]", "volume"}]}], "|>"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"CreateTickDatabase", "[", 
    RowBox[{"date_", ",", "stock_"}], "]"}], ":=", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"path", ",", "dataset"}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"path", " ", "=", " ", 
       RowBox[{"FileNameJoin", "[", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"ParentDirectory", "@", 
           RowBox[{"NotebookDirectory", "[", "]"}]}], ",", "\"\<Datasets\>\"",
           ",", "\"\<BMV\>\"", ",", "date"}], "}"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"dataset", " ", "=", " ", 
       RowBox[{"DeleteCases", "[", 
        RowBox[{
         RowBox[{"Import", "[", 
          RowBox[{"FileNameJoin", "[", 
           RowBox[{"{", 
            RowBox[{"path", ",", 
             RowBox[{"StringJoin", "[", 
              RowBox[{"stock", ",", "\"\<.csv\>\""}], "]"}]}], "}"}], "]"}], 
          "]"}], ",", 
         RowBox[{"{", 
          RowBox[{
          "_", ",", "\"\<\>\"", ",", "\"\<\>\"", ",", "\"\<\>\"", ",", 
           "\"\<\>\"", ",", "\"\<\>\""}], "}"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"BuildDerivatives", "@", 
       RowBox[{"Map", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"CreateTick", "[", 
           RowBox[{"Drop", "[", 
            RowBox[{"#", ",", "1"}], "]"}], "]"}], "&"}], ",", 
         RowBox[{"Drop", "[", 
          RowBox[{"dataset", ",", "1"}], "]"}]}], "]"}]}]}]}], 
    "\[IndentingNewLine]", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"CreateMarketDailyDatabase", "[", 
    RowBox[{"date_", ",", "stocks_"}], "]"}], ":=", 
   RowBox[{"Association", "[", 
    RowBox[{"Map", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"#", "\[Rule]", 
        RowBox[{"CreateTickDatabase", "[", 
         RowBox[{"date", ",", "#"}], "]"}]}], "&"}], ",", "stocks"}], "]"}], 
    "]"}]}], ";"}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.790609541860806*^9, 3.7906096119783297`*^9}, {
  3.790609782486751*^9, 3.790609867461397*^9}, {3.790609936619285*^9, 
  3.7906099509151363`*^9}, {3.790610262117391*^9, 3.790610290587435*^9}, {
  3.7906240005548553`*^9, 3.790624001652882*^9}, {3.790624200257618*^9, 
  3.790624203573367*^9}},
 CellLabel->"In[35]:=",ExpressionUUID->"b23233a9-6cd3-49e1-b111-27f957ae2d81"],

Cell[BoxData[{
 RowBox[{
  RowBox[{"databaseFile", " ", "=", " ", 
   RowBox[{"FileNameJoin", "[", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"NotebookDirectory", "[", "]"}], ",", 
      "\"\<gp_database.mx\>\""}], "}"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"If", "[", 
   RowBox[{
    RowBox[{"FileExistsQ", "[", "databaseFile", "]"}], ",", 
    "\[IndentingNewLine]", 
    RowBox[{"stockDatabase", " ", "=", " ", 
     RowBox[{"Import", "[", "databaseFile", "]"}]}], ",", 
    "\[IndentingNewLine]", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"stockDatabase", " ", "=", " ", 
      RowBox[{"ProgressMap", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"CreateMarketDailyDatabase", "[", 
          RowBox[{"#", ",", "stocks"}], "]"}], "&"}], ",", "dates"}], "]"}]}],
      ";", "\[IndentingNewLine]", 
     RowBox[{"Export", "[", 
      RowBox[{"databaseFile", ",", "stockDatabase"}], "]"}], ";"}]}], 
   "\[IndentingNewLine]", "]"}], ";"}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.7906364375044403`*^9, 3.79063653810015*^9}, {
  3.790636735607856*^9, 3.790636735722968*^9}},
 CellLabel->"In[38]:=",ExpressionUUID->"75548f01-00a5-489f-9ef2-c54e9af0d979"]
}, Closed]],

Cell[CellGroupData[{

Cell["Backtesting implementation", "Subsection",
 CellChangeTimes->{{3.7906249524056253`*^9, 
  3.790624957861579*^9}},ExpressionUUID->"5a0581db-5369-456f-ba8a-\
15a102fa76fe"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"StrategyValues", "[", 
    RowBox[{"strategyFunc_", ",", "tradingDayData_"}], "]"}], ":=", 
   RowBox[{"Map", "[", 
    RowBox[{
     RowBox[{
      RowBox[{"ReplaceAll", "[", 
       RowBox[{
        StyleBox["strategyFunc",
         ShowSpecialCharacters->False,
         ShowStringCharacters->True,
         NumberMarks->True], 
        StyleBox[",",
         ShowSpecialCharacters->False,
         ShowStringCharacters->True,
         NumberMarks->True], "#"}], "]"}], "&"}], ",", "tradingDayData"}], 
    "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"StrategySignals", "[", 
    RowBox[{"strategyFunc_", ",", "tradingDayData_"}], "]"}], ":=", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"strategyValues", ",", "signals"}], "}"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"strategyValues", " ", "=", " ", 
       RowBox[{"Join", "[", 
        RowBox[{
         RowBox[{"Drop", "[", 
          RowBox[{
           RowBox[{"StrategyValues", "[", 
            RowBox[{"strategyFunc", ",", "tradingDayData"}], "]"}], ",", 
           RowBox[{"-", "2"}]}], "]"}], ",", 
         RowBox[{"{", 
          RowBox[{"False", ",", "False"}], "}"}]}], "]"}]}], ";", " ", 
      RowBox[{"(*", " ", 
       RowBox[{"Always", " ", "sell", " ", "at", " ", "the", " ", "end"}], 
       " ", "*)"}], "\[IndentingNewLine]", 
      RowBox[{"signals", " ", "=", " ", 
       RowBox[{"Flatten", "[", 
        RowBox[{"Map", "[", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{
           RowBox[{"Join", "[", "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{"{", 
              RowBox[{
               RowBox[{"First", "[", "#", "]"}], "/.", 
               RowBox[{"{", 
                RowBox[{
                 RowBox[{"True", "\[Rule]", "\"\<Enter\>\""}], ",", 
                 RowBox[{"False", "\[Rule]", "\"\<Exit\>\""}]}], "}"}]}], 
              "}"}], ",", "\[IndentingNewLine]", 
             RowBox[{"ConstantArray", "[", 
              RowBox[{"\"\<Hold\>\"", ",", 
               RowBox[{
                RowBox[{"Length", "[", "#", "]"}], "-", "1"}]}], "]"}]}], 
            "\[IndentingNewLine]", "]"}], "&"}], ",", 
          RowBox[{"Split", "[", "strategyValues", "]"}]}], 
         "\[IndentingNewLine]", "]"}], "\[IndentingNewLine]", "]"}]}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"First", "[", "signals", "]"}], "\[Equal]", "\"\<Exit\>\""}],
         ",", 
        RowBox[{"ReplacePart", "[", 
         RowBox[{"signals", ",", 
          RowBox[{"1", "\[Rule]", "\"\<Hold\>\""}]}], "]"}], ",", "signals"}],
        "]"}]}]}], "\[IndentingNewLine]", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"StrategyReturn", "[", 
    RowBox[{
    "strategyFunc_", ",", "tradingDayData_", ",", "transactionCost_"}], "]"}],
    ":=", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "signals", ",", "enterPositions", ",", "exitPositions", ",", 
       "buyPrices", ",", "sellPrices"}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"signals", " ", "=", " ", 
       RowBox[{"StrategySignals", "[", 
        RowBox[{
         StyleBox["strategyFunc",
          ShowSpecialCharacters->False,
          ShowStringCharacters->True,
          NumberMarks->True], 
         StyleBox[",",
          ShowSpecialCharacters->False,
          ShowStringCharacters->True,
          NumberMarks->True], "tradingDayData"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"enterPositions", " ", "=", " ", 
       RowBox[{
        RowBox[{"Position", "[", 
         RowBox[{
          RowBox[{"Drop", "[", 
           RowBox[{"signals", ",", 
            RowBox[{"-", "2"}]}], "]"}], ",", "\"\<Enter\>\""}], "]"}], "+", 
        "1"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"exitPositions", " ", "=", " ", 
       RowBox[{
        RowBox[{"Position", "[", 
         RowBox[{
          RowBox[{"Drop", "[", 
           RowBox[{"signals", ",", 
            RowBox[{"-", "2"}]}], "]"}], ",", "\"\<Exit\>\""}], "]"}], "+", 
        "1"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"enterPositions", "\[Equal]", 
          RowBox[{"{", "}"}]}], " ", "||", " ", 
         RowBox[{"exitPositions", " ", "\[Equal]", " ", "0"}]}], ",", 
        RowBox[{"Return", "[", "0.0", "]"}]}], "]"}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"buyPrices", " ", "=", " ", 
       RowBox[{
        RowBox[{"Extract", "[", 
         RowBox[{"tradingDayData", ",", "enterPositions"}], "]"}], "[", 
        RowBox[{"[", 
         RowBox[{"All", ",", "\"\<Open\>\""}], "]"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"sellPrices", " ", "=", " ", 
       RowBox[{
        RowBox[{"Extract", "[", 
         RowBox[{"tradingDayData", ",", "exitPositions"}], "]"}], "[", 
        RowBox[{"[", 
         RowBox[{"All", ",", "\"\<Open\>\""}], "]"}], "]"}]}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"Total", "[", 
        RowBox[{"Log", "[", 
         RowBox[{"sellPrices", 
          RowBox[{"(", 
           RowBox[{"1", "-", "transactionCost"}], ")"}]}], "]"}], "]"}], "-", 
       
       RowBox[{"Total", "[", 
        RowBox[{"Log", "[", 
         RowBox[{"buyPrices", 
          RowBox[{"(", 
           RowBox[{"1", "+", "transactionCost"}], ")"}]}], "]"}], "]"}]}]}]}],
     "\[IndentingNewLine]", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"StrategyPerformanceOverTime", "[", 
    RowBox[{
    "strategyFunc_", ",", "tradingDayData_", ",", "transactionCost_"}], "]"}],
    ":=", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"signals", ",", "balance", ",", "laggedSignals"}], "}"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"signals", " ", "=", " ", 
       RowBox[{"StrategySignals", "[", 
        RowBox[{
         StyleBox["strategyFunc",
          ShowSpecialCharacters->False,
          ShowStringCharacters->True,
          NumberMarks->True], 
         StyleBox[",",
          ShowSpecialCharacters->False,
          ShowStringCharacters->True,
          NumberMarks->True], "tradingDayData"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"balance", " ", "=", " ", "0"}], ";", "\[IndentingNewLine]", 
      RowBox[{"laggedSignals", " ", "=", " ", 
       RowBox[{"Prepend", "[", 
        RowBox[{
         RowBox[{"Drop", "[", 
          RowBox[{"signals", ",", 
           RowBox[{"-", "1"}]}], "]"}], ",", 
         RowBox[{"Last", "[", "signals", "]"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"Table", "[", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"laggedSignals", "[", 
             RowBox[{"[", "i", "]"}], "]"}], "\[Equal]", "\"\<Enter\>\""}], 
           ",", 
           RowBox[{"balance", " ", "-=", " ", 
            RowBox[{
             RowBox[{
              RowBox[{"tradingDayData", "[", 
               RowBox[{"[", "i", "]"}], "]"}], "[", "\"\<Open\>\"", "]"}], 
             "*", 
             RowBox[{"(", 
              RowBox[{"1", "+", "transactionCost"}], ")"}]}]}]}], "]"}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"If", "[", 
          RowBox[{
           RowBox[{
            RowBox[{"laggedSignals", "[", 
             RowBox[{"[", "i", "]"}], "]"}], "\[Equal]", "\"\<Exit\>\""}], 
           ",", 
           RowBox[{"balance", " ", "+=", " ", 
            RowBox[{
             RowBox[{
              RowBox[{"tradingDayData", "[", 
               RowBox[{"[", "i", "]"}], "]"}], "[", "\"\<Open\>\"", "]"}], 
             "*", 
             RowBox[{"(", 
              RowBox[{"1", "-", "transactionCost"}], ")"}]}]}]}], "]"}], ";", 
         "\[IndentingNewLine]", "balance"}], "\[IndentingNewLine]", ",", 
        RowBox[{"{", 
         RowBox[{"i", ",", "1", ",", 
          RowBox[{"Length", "[", "tradingDayData", "]"}]}], "}"}]}], 
       "\[IndentingNewLine]", "]"}]}]}], "\[IndentingNewLine]", "]"}]}], 
  ";"}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.7906250384062643`*^9, 3.790625042053491*^9}, {
  3.7906251977229633`*^9, 3.790625272143729*^9}, {3.790626278417849*^9, 
  3.7906263480137043`*^9}, {3.7906264164256268`*^9, 3.790626441693714*^9}, {
  3.790627360431959*^9, 3.7906274294361563`*^9}, {3.790628173692943*^9, 
  3.790628179385305*^9}, {3.790628253559271*^9, 3.790628260752451*^9}, {
  3.790628316865144*^9, 3.7906283197348757`*^9}, {3.790628490813168*^9, 
  3.790628532156981*^9}, {3.790638658561034*^9, 3.790638681749589*^9}, {
  3.7906387378332453`*^9, 3.790638776700083*^9}, {3.7906388707336197`*^9, 
  3.790638888299535*^9}, {3.790639813011365*^9, 3.790639813459591*^9}, {
  3.790639883728793*^9, 3.7906398842030277`*^9}, {3.790778309965961*^9, 
  3.790778339724371*^9}, {3.7907985806064463`*^9, 3.790798623276667*^9}, {
  3.790798933526053*^9, 3.79079898748695*^9}},
 CellLabel->"In[40]:=",ExpressionUUID->"b1e9e30c-246b-4d7c-8303-1e64f7008a2a"],

Cell[BoxData[
 RowBox[{
  RowBox[{"strategyFunc", " ", "=", " ", 
   StyleBox[
    RowBox[{"Or", "[", 
     RowBox[{
      RowBox[{"Less", "[", 
       RowBox[{
        RowBox[{"Times", "[", 
         RowBox[{"1.05`", ",", 
          RowBox[{"SMA", "[", 
           RowBox[{"\"\<Close\>\"", ",", "20"}], "]"}]}], "]"}], ",", 
        RowBox[{"SMA", "[", 
         RowBox[{"\"\<Close\>\"", ",", "40"}], "]"}]}], "]"}], ",", 
      RowBox[{"Less", "[", 
       RowBox[{
        RowBox[{"Prev", "[", 
         RowBox[{"\"\<Close\>\"", ",", "2"}], "]"}], ",", "\"\<High\>\""}], 
       "]"}]}], "]"}],
    ShowSpecialCharacters->False,
    ShowStringCharacters->True,
    NumberMarks->True]}], 
  StyleBox[";",
   ShowSpecialCharacters->False,
   ShowStringCharacters->True,
   NumberMarks->True]}]], "Input",
 CellChangeTimes->{{3.7906264490369377`*^9, 3.7906264515805387`*^9}},
 CellLabel->"In[61]:=",ExpressionUUID->"04291db9-7a4e-4267-b5e4-ae9f0839ce5f"],

Cell[BoxData[
 RowBox[{
  RowBox[{"tradingDayData", " ", "=", " ", 
   RowBox[{"stockDatabase", "[", 
    RowBox[{"[", 
     RowBox[{"1", ",", "\"\<AC.MX\>\""}], "]"}], "]"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.790638494164711*^9, 3.790638523444089*^9}},
 CellLabel->
  "In[1016]:=",ExpressionUUID->"6514ee92-65c3-4cc4-939e-9c548b2ea13a"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"StrategyValues", "[", 
  RowBox[{
   StyleBox["strategyFunc",
    ShowSpecialCharacters->False,
    ShowStringCharacters->True,
    NumberMarks->True], 
   StyleBox[",",
    ShowSpecialCharacters->False,
    ShowStringCharacters->True,
    NumberMarks->True], "tradingDayData"}], "]"}]], "Input",
 CellChangeTimes->{3.79062646183453*^9},
 CellLabel->"In[97]:=",ExpressionUUID->"7615f13f-cdfd-4709-896d-dde01ad5ccc8"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
  "True", ",", "True", ",", "True", ",", "False", ",", "False", ",", "True", 
   ",", "True", ",", "True", ",", "False", ",", "False", ",", "True", ",", 
   "True", ",", "True", ",", "True", ",", "False", ",", "False", ",", "False",
    ",", "True", ",", "False", ",", "False", ",", "False", ",", "False", ",", 
   "True", ",", "True", ",", "True", ",", "False", ",", "True", ",", "True", 
   ",", "False", ",", "False", ",", "False", ",", "False", ",", "True", ",", 
   "True", ",", "False", ",", "False", ",", "False", ",", "False", ",", 
   "True", ",", "False", ",", "False", ",", "False", ",", "False", ",", 
   "False", ",", "False", ",", "False", ",", "False", ",", "False", ",", 
   "False", ",", "False", ",", "False", ",", "False", ",", "False", ",", 
   "False", ",", "False", ",", "False", ",", "True", ",", "True", ",", 
   "False", ",", "False", ",", "False", ",", "False", ",", "True", ",", 
   "True", ",", "False", ",", "False", ",", "True", ",", "False", ",", "True",
    ",", "True", ",", "True", ",", "False", ",", "False", ",", "False", ",", 
   "True", ",", "True", ",", "True", ",", "False", ",", "False", ",", "False",
    ",", "False", ",", "False", ",", "True", ",", "True", ",", "True", ",", 
   "False", ",", "False", ",", "False", ",", "False", ",", "False", ",", 
   "False", ",", "False", ",", "False", ",", "True", ",", "True", ",", "True",
    ",", "False", ",", "True", ",", "True", ",", "False", ",", "False", ",", 
   "False", ",", "False", ",", "False", ",", "False", ",", "True", ",", 
   "True", ",", "False", ",", "True", ",", "False", ",", "False", ",", "True",
    ",", "False", ",", "False", ",", "False", ",", "False", ",", "True", ",", 
   "True", ",", "False", ",", "False", ",", "True", ",", "True", ",", "False",
    ",", "False", ",", "False", ",", "False", ",", "False", ",", "False", ",",
    "False", ",", "False", ",", "False", ",", "False", ",", "False", ",", 
   "False", ",", "False", ",", "False", ",", "False", ",", "False", ",", 
   "False", ",", "False", ",", "False", ",", "False", ",", "False", ",", 
   "False", ",", "True", ",", "True", ",", "False", ",", "False", ",", 
   "False", ",", "True", ",", "True", ",", "True", ",", "True", ",", "False", 
   ",", "False", ",", "False", ",", "False", ",", "False", ",", "False", ",", 
   "False", ",", "True", ",", "True", ",", "True", ",", "False", ",", "False",
    ",", "False", ",", "False", ",", "False", ",", "False", ",", "False", ",",
    "False", ",", "False", ",", "False", ",", "True", ",", "False", ",", 
   "True", ",", "True", ",", "True", ",", "True", ",", "True", ",", "True", 
   ",", "True", ",", "True"}], "}"}]], "Output",
 CellChangeTimes->{
  3.790626462382633*^9, {3.790638496943771*^9, 3.790638525606555*^9}, {
   3.79063878430695*^9, 3.790638791089733*^9}},
 CellLabel->"Out[97]=",ExpressionUUID->"6bc97f59-0901-43bb-a451-998c58fb00a2"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"signals", " ", "=", " ", 
  RowBox[{"StrategySignals", "[", 
   RowBox[{
    StyleBox["strategyFunc",
     ShowSpecialCharacters->False,
     ShowStringCharacters->True,
     NumberMarks->True], 
    StyleBox[",",
     ShowSpecialCharacters->False,
     ShowStringCharacters->True,
     NumberMarks->True], "tradingDayData"}], "]"}]}]], "Input",
 CellChangeTimes->{{3.790625273304099*^9, 3.790625287588245*^9}, {
   3.790625510533759*^9, 3.7906255125405807`*^9}, 3.790626455684667*^9, 
   3.790638690386363*^9},
 CellLabel->"In[98]:=",ExpressionUUID->"a670fc4f-11ba-46b5-9c90-6d754220c382"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{"\<\"Enter\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", 
   ",", "\<\"Exit\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Enter\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Exit\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Enter\"\>", ",", "\<\"Hold\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Exit\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Enter\"\>", 
   ",", "\<\"Exit\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Enter\"\>", ",", "\<\"Hold\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Exit\"\>", ",", "\<\"Enter\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Exit\"\>", ",", "\<\"Hold\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Enter\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Exit\"\>", ",", "\<\"Hold\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Enter\"\>", 
   ",", "\<\"Exit\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Enter\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Exit\"\>", ",", "\<\"Hold\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Enter\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Exit\"\>", ",", "\<\"Hold\"\>", 
   ",", "\<\"Enter\"\>", ",", "\<\"Exit\"\>", ",", "\<\"Enter\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Exit\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Enter\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Exit\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Enter\"\>", ",", "\<\"Hold\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Exit\"\>", ",", "\<\"Hold\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", 
   ",", "\<\"Enter\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", 
   ",", "\<\"Exit\"\>", ",", "\<\"Enter\"\>", ",", "\<\"Hold\"\>", 
   ",", "\<\"Exit\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", 
   ",", "\<\"Enter\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Exit\"\>", 
   ",", "\<\"Enter\"\>", ",", "\<\"Exit\"\>", ",", "\<\"Hold\"\>", 
   ",", "\<\"Enter\"\>", ",", "\<\"Exit\"\>", ",", "\<\"Hold\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Enter\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Exit\"\>", ",", "\<\"Hold\"\>", 
   ",", "\<\"Enter\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Exit\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", 
   ",", "\<\"Enter\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Exit\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Enter\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", 
   ",", "\<\"Exit\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Enter\"\>", ",", "\<\"Hold\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Exit\"\>", ",", "\<\"Hold\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Enter\"\>", 
   ",", "\<\"Exit\"\>", ",", "\<\"Enter\"\>", ",", "\<\"Hold\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", ",", "\<\"Hold\"\>", 
   ",", "\<\"Hold\"\>", ",", "\<\"Exit\"\>", ",", "\<\"Hold\"\>"}], 
  "}"}]], "Output",
 CellChangeTimes->{
  3.79062528827605*^9, 3.790625512861006*^9, 3.790626365244323*^9, {
   3.790626444770033*^9, 3.790626456589962*^9}, 3.790638530189982*^9, {
   3.790638781500291*^9, 3.7906388008278923`*^9}},
 CellLabel->"Out[98]=",ExpressionUUID->"e06d7855-8885-41d6-af74-080ea66cdc36"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"StrategyReturn", "[", 
  RowBox[{
   StyleBox["strategyFunc",
    ShowSpecialCharacters->False,
    ShowStringCharacters->True,
    NumberMarks->True], 
   StyleBox[",",
    ShowSpecialCharacters->False,
    ShowStringCharacters->True,
    NumberMarks->True], "tradingDayData", ",", "0.0025"}], "]"}]], "Input",
 CellChangeTimes->{{3.790627438310454*^9, 3.790627453921967*^9}},
 CellLabel->
  "In[111]:=",ExpressionUUID->"f5dafcd2-8d13-484f-a894-fe7f35c416ed"],

Cell[BoxData[
 RowBox[{"-", "4.79953619886092`"}]], "Output",
 CellChangeTimes->{
  3.790627454116459*^9, 3.790628264535619*^9, 3.790628535441326*^9, {
   3.7906389120984573`*^9, 3.790638918065566*^9}},
 CellLabel->
  "Out[111]=",ExpressionUUID->"176941d9-1bb2-4186-8d01-c7e8cfd666c4"]
}, Open  ]]
}, Closed]],

Cell[CellGroupData[{

Cell["Population evaluation", "Subsection",
 CellChangeTimes->{{3.790627760332687*^9, 
  3.7906277629967823`*^9}},ExpressionUUID->"932a4b92-5ea6-42cd-a335-\
141f44d792f5"],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"EvaluatePopulation", "[", 
    RowBox[{
    "population_", ",", "trainingDates_", ",", "transactionCost_", ",", 
     RowBox[{"bloatControl_", " ", ":", "0.0"}]}], "]"}], ":=", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "stock", ",", "date", ",", "tradingDayData", ",", 
       "populationAsFunctions"}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"stock", " ", "=", " ", 
       RowBox[{"RandomChoice", "[", "stocks", "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"date", " ", "=", " ", 
       RowBox[{"RandomInteger", "[", 
        RowBox[{"{", 
         RowBox[{"1", ",", 
          RowBox[{"Length", "[", "trainingDates", "]"}]}], "}"}], "]"}]}], 
      ";", "\[IndentingNewLine]", 
      RowBox[{"tradingDayData", " ", "=", " ", 
       RowBox[{"stockDatabase", "[", 
        RowBox[{"[", 
         RowBox[{"date", ",", "stock"}], "]"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"populationAsFunctions", " ", "=", " ", 
       RowBox[{"Map", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"SynthesizeTree", "[", 
           RowBox[{
            RowBox[{"First", "[", "#", "]"}], ",", 
            RowBox[{"Last", "[", "#", "]"}], ",", "grammar"}], "]"}], "&"}], 
         ",", "population"}], "]"}]}], ";", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{"MapThread", "[", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{
         RowBox[{"<|", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"\"\<Genome\>\"", "\[Rule]", "#1"}], ",", 
           "\[IndentingNewLine]", 
           RowBox[{"\"\<Score\>\"", "\[Rule]", 
            RowBox[{
             RowBox[{"Ramp", "[", 
              RowBox[{"StrategyReturn", "[", 
               RowBox[{
                StyleBox["#2",
                 ShowSpecialCharacters->False,
                 ShowStringCharacters->True,
                 NumberMarks->True], 
                StyleBox[",",
                 ShowSpecialCharacters->False,
                 ShowStringCharacters->True,
                 NumberMarks->True], "tradingDayData", ",", 
                "transactionCost"}], "]"}], "]"}], "-", 
             RowBox[{"bloatControl", "*", 
              RowBox[{"LeafCount", "[", 
               StyleBox["#2",
                ShowSpecialCharacters->False,
                ShowStringCharacters->True,
                NumberMarks->True], "]"}]}]}]}]}], "\[IndentingNewLine]", 
          "|>"}], "&"}], ",", "\[IndentingNewLine]", 
        RowBox[{"{", 
         RowBox[{"population", ",", "populationAsFunctions"}], "}"}]}], 
       "\[IndentingNewLine]", "]"}]}]}], "\[IndentingNewLine]", "]"}]}], 
  ";"}]], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.7906279713459682`*^9, 3.790627982521824*^9}, {
  3.790628034137097*^9, 3.790628036353374*^9}, {3.790628074368805*^9, 
  3.790628088041815*^9}, {3.790628591065585*^9, 3.7906286411626587`*^9}, {
  3.790628699986569*^9, 3.7906287268990307`*^9}, {3.790628760834445*^9, 
  3.790628779963571*^9}, {3.790629597628872*^9, 3.790629607537722*^9}, {
  3.790629647914803*^9, 3.7906296932492027`*^9}, {3.790629897059407*^9, 
  3.790629908559587*^9}, {3.790800162489612*^9, 3.7908001628064423`*^9}, {
  3.790800208459581*^9, 3.790800244918298*^9}, {3.790800297782016*^9, 
  3.790800325709178*^9}, {3.7908024781317387`*^9, 3.7908024815090923`*^9}, {
  3.790802525959302*^9, 3.7908025305170918`*^9}},
 CellLabel->"In[44]:=",ExpressionUUID->"fd2de227-3560-4c20-8935-9f2472fd267a"],

Cell[BoxData[
 RowBox[{
  RowBox[{"population", " ", "=", " ", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"g1", ",", "labels1"}], "}"}], ",", 
     RowBox[{"{", 
      RowBox[{"g2", ",", "labels2"}], "}"}]}], "}"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.790629959616577*^9, 3.790629973973564*^9}},
 CellLabel->"In[68]:=",ExpressionUUID->"a7386762-4404-4fdc-bd9e-130b7779d466"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"EvaluatePopulation", "[", 
  RowBox[{"population", ",", "trainingDates", ",", "0.0025"}], "]"}]], "Input",\

 CellChangeTimes->{{3.7906288044188433`*^9, 3.790628814802247*^9}},
 CellLabel->"In[72]:=",ExpressionUUID->"e1f455cf-b69d-4494-8ff2-84b38849c0f5"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"\[LeftAssociation]", 
    RowBox[{
     RowBox[{"\<\"Genome\"\>", "\[Rule]", 
      RowBox[{"{", 
       RowBox[{
        GraphicsBox[
         NamespaceBox["NetworkGraphics",
          DynamicModuleBox[{Typeset`graph = HoldComplete[
            
            Graph[{1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 
             18, 19}, {{{1, 2}, {1, 3}, {1, 4}, {3, 5}, {3, 6}, {3, 7}, {6, 
              8}, {8, 9}, {7, 10}, {10, 11}, {10, 12}, {4, 13}, {4, 14}, {4, 
              15}, {14, 16}, {16, 17}, {15, 18}, {18, 19}}, Null}, {
             VertexLabels -> {
               6 -> $CellContext`NonTerm["numQuant", 5], 
                18 -> $CellContext`NonTerm["expression", 8], 
                3 -> $CellContext`NonTerm["cond", 3], 
                11 -> $CellContext`Term["lag", "3"], 
                5 -> $CellContext`Term["numOp", "Greater"], 
                8 -> $CellContext`NonTerm["expression", 8], 
                7 -> $CellContext`NonTerm["numQuant", 5], 
                14 -> $CellContext`NonTerm["numQuant", 5], 
                10 -> $CellContext`NonTerm["expression", 7], 
                9 -> $CellContext`Term["observable", "High"], 
                4 -> $CellContext`NonTerm["cond", 3], 
                17 -> $CellContext`Term["observable", "Open"], 
                16 -> $CellContext`NonTerm["expression", 8], 
                12 -> $CellContext`Term["observable", "Low"], 
                13 -> $CellContext`Term["numOp", "Less"], 
                2 -> $CellContext`Term["logicOp", "And"], 
                15 -> $CellContext`NonTerm["numQuant", 5], 
                1 -> $CellContext`NonTerm["cond", 1], 
                19 -> $CellContext`Term["observable", "Close"]}}]]}, 
           TagBox[GraphicsGroupBox[{
              {Hue[0.6, 0.7, 0.5], Opacity[0.7], Arrowheads[Medium], 
               ArrowBox[CompressedData["
1:eJxTTMoPSmVmYGAQAmImKJYRjEs6ufy3/SPp1i9vPNkdIPRx+1dXkrcXljM6
oMvfSlpmmCHzFqd83H7RyVrGXA4weXT1DFAAUf/dHl0eIv7cHpf8bTD/L1we
3b60ii+h6xNYHHDJw/i45HWapV9cYhKAy6O7B8Z/AKXR3QPjP0DR9xyDDwsH
7Oq/45RHD0dc/oGpR/cPjA+TR1cP48PMR1cP48PkATCkB9M=
                "], 
                0.03702325155936649]}, 
              {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[
               0.7]}], {
                DiskBox[{1.7284635393598995, 2.9110964873429888}, 
                 0.03702325155936649], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"cond\"\>", ",", "1"}], ")"}], 
                 Offset[{2, 2}, {1.765486790919266, 2.9481197389023555}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{0.1819435304589368, 2.183322365507242}, 
                 0.03702325155936649], InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"logicOp\"\>", ",", "\<\"And\"\>"}], ")"}], 
                 Offset[{2, 2}, {0.21896678201830327, 2.2203456170666085}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{0.9097176522946839, 2.183322365507242}, 
                 0.03702325155936649], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"cond\"\>", ",", "3"}], ")"}], 
                 Offset[{2, 2}, {0.9467409038540504, 2.2203456170666085}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{3.2749835482608622, 2.183322365507242}, 
                 0.03702325155936649], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"cond\"\>", ",", "3"}], ")"}], 
                 Offset[{2, 2}, {3.312006799820229, 2.2203456170666085}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{0., 1.4555482436714944}, 0.03702325155936649], 
                InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"numOp\"\>", ",", "\<\"Greater\"\>"}], ")"}], 
                 Offset[{2, 2}, {0.03702325155936649, 1.4925714952308609}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{0.7277741218357472, 1.4555482436714944}, 
                 0.03702325155936649], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], 
                 Offset[{2, 2}, {0.7647973733951137, 1.4925714952308609}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{1.819435304589368, 1.4555482436714944}, 
                 0.03702325155936649], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], 
                 Offset[{2, 2}, {1.8564585561487346, 1.4925714952308609}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{0.7277741218357472, 0.727774121835747}, 
                 0.03702325155936649], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"expression\"\>", ",", "8"}], ")"}], 
                 Offset[{2, 2}, {0.7647973733951137, 0.7647973733951134}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{0.7277741218357472, 0.}, 0.03702325155936649], 
                InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"observable\"\>", ",", "\<\"High\"\>"}], ")"}], 
                 Offset[{2, 2}, {0.7647973733951137, 0.03702325155936649}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{1.819435304589368, 0.727774121835747}, 
                 0.03702325155936649], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"expression\"\>", ",", "7"}], ")"}], 
                 Offset[{2, 2}, {1.8564585561487346, 0.7647973733951134}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{1.4555482436714944, 0.}, 0.03702325155936649], 
                InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"lag\"\>", ",", "\<\"3\"\>"}], ")"}], 
                 Offset[{2, 2}, {1.4925714952308609, 0.03702325155936649}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{2.183322365507242, 0.}, 0.03702325155936649], 
                InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"observable\"\>", ",", "\<\"Low\"\>"}], ")"}], 
                 Offset[{2, 2}, {2.2203456170666085, 0.03702325155936649}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{2.5472094264251153, 1.4555482436714944}, 
                 0.03702325155936649], InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"numOp\"\>", ",", "\<\"Less\"\>"}], ")"}], 
                 Offset[{2, 2}, {2.584232677984482, 1.4925714952308609}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{3.2749835482608622, 1.4555482436714944}, 
                 0.03702325155936649], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], 
                 Offset[{2, 2}, {3.312006799820229, 1.4925714952308609}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{4.00275767009661, 1.4555482436714944}, 
                 0.03702325155936649], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], 
                 Offset[{2, 2}, {4.039780921655977, 1.4925714952308609}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{3.2749835482608622, 0.727774121835747}, 
                 0.03702325155936649], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"expression\"\>", ",", "8"}], ")"}], 
                 Offset[{2, 2}, {3.312006799820229, 0.7647973733951134}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{3.2749835482608622, 0.}, 0.03702325155936649], 
                InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"observable\"\>", ",", "\<\"Open\"\>"}], ")"}], 
                 Offset[{2, 2}, {3.312006799820229, 0.03702325155936649}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{4.00275767009661, 0.727774121835747}, 
                 0.03702325155936649], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"expression\"\>", ",", "8"}], ")"}], 
                 Offset[{2, 2}, {4.039780921655977, 0.7647973733951134}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{4.00275767009661, 0.}, 0.03702325155936649], InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"observable\"\>", ",", "\<\"Close\"\>"}], ")"}],
                  Offset[{2, 2}, {4.039780921655977, 0.03702325155936649}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}}}],
            MouseAppearanceTag["NetworkGraphics"]],
           AllowKernelInitialization->False]],
         DefaultBaseStyle->{
          "NetworkGraphics", FrontEnd`GraphicsHighlightColor -> 
           Hue[0.8, 1., 0.6]},
         FormatType->TraditionalForm,
         FrameTicks->None], ",", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"1", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"cond\"\>", ",", "1"}], "]"}]}], ",", 
          RowBox[{"2", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"logicOp\"\>", ",", "\<\"And\"\>"}], "]"}]}], ",", 
          RowBox[{"3", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"cond\"\>", ",", "3"}], "]"}]}], ",", 
          RowBox[{"4", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"cond\"\>", ",", "3"}], "]"}]}], ",", 
          RowBox[{"5", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"numOp\"\>", ",", "\<\"Greater\"\>"}], "]"}]}], ",", 
          RowBox[{"6", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"numQuant\"\>", ",", "5"}], "]"}]}], ",", 
          RowBox[{"7", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"numQuant\"\>", ",", "5"}], "]"}]}], ",", 
          RowBox[{"8", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"expression\"\>", ",", "8"}], "]"}]}], ",", 
          RowBox[{"9", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"observable\"\>", ",", "\<\"High\"\>"}], "]"}]}], ",", 
          RowBox[{"10", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"expression\"\>", ",", "7"}], "]"}]}], ",", 
          RowBox[{"11", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"lag\"\>", ",", "\<\"3\"\>"}], "]"}]}], ",", 
          RowBox[{"12", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"observable\"\>", ",", "\<\"Low\"\>"}], "]"}]}], ",", 
          
          RowBox[{"13", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"numOp\"\>", ",", "\<\"Less\"\>"}], "]"}]}], ",", 
          RowBox[{"14", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"numQuant\"\>", ",", "5"}], "]"}]}], ",", 
          RowBox[{"15", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"numQuant\"\>", ",", "5"}], "]"}]}], ",", 
          RowBox[{"16", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"expression\"\>", ",", "8"}], "]"}]}], ",", 
          RowBox[{"17", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"observable\"\>", ",", "\<\"Open\"\>"}], "]"}]}], ",", 
          RowBox[{"18", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"expression\"\>", ",", "8"}], "]"}]}], ",", 
          RowBox[{"19", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"observable\"\>", ",", "\<\"Close\"\>"}], "]"}]}]}], 
         "}"}]}], "}"}]}], ",", 
     RowBox[{"\<\"Return\"\>", "\[Rule]", "3.236326930329824`"}]}], 
    "\[RightAssociation]"}], ",", 
   RowBox[{"\[LeftAssociation]", 
    RowBox[{
     RowBox[{"\<\"Genome\"\>", "\[Rule]", 
      RowBox[{"{", 
       RowBox[{
        GraphicsBox[
         NamespaceBox["NetworkGraphics",
          DynamicModuleBox[{Typeset`graph = HoldComplete[
            
            Graph[{1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 
             18, 19, 20, 21, 22, 23, 
             24}, {{{1, 2}, {1, 3}, {1, 4}, {3, 5}, {3, 6}, {3, 7}, {6, 8}, {
              6, 9}, {9, 10}, {9, 11}, {9, 12}, {7, 13}, {13, 14}, {13, 15}, {
              13, 16}, {4, 17}, {4, 18}, {4, 19}, {18, 20}, {20, 21}, {20, 
              22}, {19, 23}, {23, 24}}, Null}, {
             VertexLabels -> {
               6 -> $CellContext`NonTerm["numQuant", 4], 
                21 -> $CellContext`Term["lag", "2"], 
                18 -> $CellContext`NonTerm["numQuant", 5], 
                23 -> $CellContext`NonTerm["expression", 8], 
                24 -> $CellContext`Term["observable", "High"], 
                22 -> $CellContext`Term["observable", "Close"], 
                3 -> $CellContext`NonTerm["cond", 3], 
                20 -> $CellContext`NonTerm["expression", 7], 
                11 -> $CellContext`Term["observable", "Close"], 
                5 -> $CellContext`Term["numOp", "Less"], 
                8 -> $CellContext`Term["factor", "1.05"], 
                7 -> $CellContext`NonTerm["numQuant", 5], 
                14 -> $CellContext`Term["techInd", "SMA"], 
                10 -> $CellContext`Term["techInd", "SMA"], 
                9 -> $CellContext`NonTerm["expression", 6], 
                4 -> $CellContext`NonTerm["cond", 3], 
                17 -> $CellContext`Term["numOp", "Less"], 
                16 -> $CellContext`Term["window", "40"], 
                12 -> $CellContext`Term["window", "20"], 
                13 -> $CellContext`NonTerm["expression", 6], 
                2 -> $CellContext`Term["logicOp", "Or"], 
                15 -> $CellContext`Term["observable", "Close"], 
                1 -> $CellContext`NonTerm["cond", 1], 
                19 -> $CellContext`NonTerm["numQuant", 5]}}]]}, 
           TagBox[GraphicsGroupBox[{
              {Hue[0.6, 0.7, 0.5], Opacity[0.7], Arrowheads[
               0.02143628275493949], ArrowBox[CompressedData["
1:eJxTTMoPSmVmYGAQB2ImKD5wT35tnx2LQ+WSw6WbeZkdpveaBCtcfG6/rWyp
Qe+UP/bo8hySNU8y87/ilOf13bkoy0XQASaPrp4BCiDqP2PIQ8Qf2+OSh/BZ
HWDy6PZtBdM8OOVf6nOz/10tgFMe4h8RuDy6eyD0ZfsqFHGEPMT+N3B5dPfC
+DB5dPUw82HhhC4P4+OSh8Tfd7g8un2vwP5ncMAlD+PjkldjenvwmhEXXB49
PGF8mHr08ITxYfLo6l1ex853/saHYT5M3jAr3e7GHUG4PLp5MD5MHgD0NTcD

                "], 0.0433963923053807]}, 
              {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[
               0.7]}], {
                DiskBox[{2.530545570883845, 2.3816899490671486}, 
                 0.0433963923053807], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"cond\"\>", ",", "1"}], ")"}], 
                 Offset[{2, 2}, {2.5739419631892257, 2.425086341372529}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{0.7442781090834839, 1.7862674618003616}, 
                 0.0433963923053807], InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"logicOp\"\>", ",", "\<\"Or\"\>"}], ")"}], 
                 Offset[{2, 2}, {0.7876745013888646, 1.8296638541057422}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{1.339700596350271, 1.7862674618003616}, 
                 0.0433963923053807], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"cond\"\>", ",", "3"}], ")"}], 
                 Offset[{2, 2}, {1.3830969886556517, 1.8296638541057422}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{4.316813032684206, 1.7862674618003616}, 
                 0.0433963923053807], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"cond\"\>", ",", "3"}], ")"}], 
                 Offset[{2, 2}, {4.360209424989587, 1.8296638541057422}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{0., 1.1908449745335743}, 0.0433963923053807], 
                InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"numOp\"\>", ",", "\<\"Less\"\>"}], ")"}], 
                 Offset[{2, 2}, {0.0433963923053807, 1.234241366838955}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{0.5954224872667871, 1.1908449745335743}, 
                 0.0433963923053807], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"numQuant\"\>", ",", "4"}], ")"}], 
                 Offset[{2, 2}, {0.6388188795721679, 1.234241366838955}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{2.679401192700542, 1.1908449745335743}, 
                 0.0433963923053807], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], 
                 Offset[{2, 2}, {2.7227975850059227, 1.234241366838955}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{0.2977112436333936, 0.5954224872667873}, 
                 0.0433963923053807], InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"factor\"\>", ",", "\<\"1.05\"\>"}], ")"}], 
                 Offset[{2, 2}, {0.34110763593877425, 0.638818879572168}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{0.8931337309001807, 0.5954224872667873}, 
                 0.0433963923053807], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"expression\"\>", ",", "6"}], ")"}], 
                 Offset[{2, 2}, {0.9365301232055614, 0.638818879572168}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{0.2977112436333936, 0.}, 0.0433963923053807], 
                InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"techInd\"\>", ",", "\<\"SMA\"\>"}], ")"}], 
                 Offset[{2, 2}, {0.34110763593877425, 0.0433963923053807}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{0.8931337309001807, 0.}, 0.0433963923053807], 
                InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"observable\"\>", ",", "\<\"Close\"\>"}], ")"}],
                  Offset[{2, 2}, {0.9365301232055614, 0.0433963923053807}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{1.4885562181669678, 0.}, 0.0433963923053807], 
                InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"window\"\>", ",", "\<\"20\"\>"}], ")"}], 
                 Offset[{2, 2}, {1.5319526104723484, 0.0433963923053807}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{2.679401192700542, 0.5954224872667873}, 
                 0.0433963923053807], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"expression\"\>", ",", "6"}], ")"}], Offset[{2, 2},
                  {2.7227975850059227, 0.638818879572168}], ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{2.083978705433755, 0.}, 0.0433963923053807], InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"techInd\"\>", ",", "\<\"SMA\"\>"}], ")"}], 
                 Offset[{2, 2}, {2.1273750977391357, 0.0433963923053807}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{2.679401192700542, 0.}, 0.0433963923053807], InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"observable\"\>", ",", "\<\"Close\"\>"}], ")"}],
                  Offset[{2, 2}, {2.7227975850059227, 0.0433963923053807}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{3.274823679967329, 0.}, 0.0433963923053807], InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"window\"\>", ",", "\<\"40\"\>"}], ")"}], 
                 Offset[{2, 2}, {3.3182200722727098, 0.0433963923053807}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{3.5725349236007227, 1.1908449745335743}, 
                 0.0433963923053807], InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"numOp\"\>", ",", "\<\"Less\"\>"}], ")"}], 
                 Offset[{2, 2}, {3.6159313159061033, 1.234241366838955}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{4.167957410867509, 1.1908449745335743}, 
                 0.0433963923053807], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], 
                 Offset[{2, 2}, {4.21135380317289, 1.234241366838955}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{5.06109114176769, 1.1908449745335743}, 
                 0.0433963923053807], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], 
                 Offset[{2, 2}, {5.104487534073071, 1.234241366838955}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{4.167957410867509, 0.5954224872667873}, 
                 0.0433963923053807], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"expression\"\>", ",", "7"}], ")"}], 
                 Offset[{2, 2}, {4.21135380317289, 0.638818879572168}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{3.870246167234116, 0.}, 0.0433963923053807], InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"lag\"\>", ",", "\<\"2\"\>"}], ")"}], 
                 Offset[{2, 2}, {3.913642559539497, 0.0433963923053807}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{4.465668654500903, 0.}, 0.0433963923053807], InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"observable\"\>", ",", "\<\"Close\"\>"}], ")"}],
                  Offset[{2, 2}, {4.509065046806284, 0.0433963923053807}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{5.06109114176769, 0.5954224872667873}, 
                 0.0433963923053807], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"expression\"\>", ",", "8"}], ")"}], 
                 Offset[{2, 2}, {5.104487534073071, 0.638818879572168}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{5.06109114176769, 0.}, 0.0433963923053807], 
                InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"observable\"\>", ",", "\<\"High\"\>"}], ")"}], 
                 Offset[{2, 2}, {5.104487534073071, 0.0433963923053807}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}}}],
            MouseAppearanceTag["NetworkGraphics"]],
           AllowKernelInitialization->False]],
         DefaultBaseStyle->{
          "NetworkGraphics", FrontEnd`GraphicsHighlightColor -> 
           Hue[0.8, 1., 0.6]},
         FormatType->TraditionalForm,
         FrameTicks->None], ",", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"1", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"cond\"\>", ",", "1"}], "]"}]}], ",", 
          RowBox[{"2", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"logicOp\"\>", ",", "\<\"Or\"\>"}], "]"}]}], ",", 
          RowBox[{"3", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"cond\"\>", ",", "3"}], "]"}]}], ",", 
          RowBox[{"4", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"cond\"\>", ",", "3"}], "]"}]}], ",", 
          RowBox[{"5", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"numOp\"\>", ",", "\<\"Less\"\>"}], "]"}]}], ",", 
          RowBox[{"6", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"numQuant\"\>", ",", "4"}], "]"}]}], ",", 
          RowBox[{"7", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"numQuant\"\>", ",", "5"}], "]"}]}], ",", 
          RowBox[{"8", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"factor\"\>", ",", "\<\"1.05\"\>"}], "]"}]}], ",", 
          RowBox[{"9", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"expression\"\>", ",", "6"}], "]"}]}], ",", 
          RowBox[{"10", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"techInd\"\>", ",", "\<\"SMA\"\>"}], "]"}]}], ",", 
          RowBox[{"11", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"observable\"\>", ",", "\<\"Close\"\>"}], "]"}]}], 
          ",", 
          RowBox[{"12", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"window\"\>", ",", "\<\"20\"\>"}], "]"}]}], ",", 
          RowBox[{"13", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"expression\"\>", ",", "6"}], "]"}]}], ",", 
          RowBox[{"14", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"techInd\"\>", ",", "\<\"SMA\"\>"}], "]"}]}], ",", 
          RowBox[{"15", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"observable\"\>", ",", "\<\"Close\"\>"}], "]"}]}], 
          ",", 
          RowBox[{"16", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"window\"\>", ",", "\<\"40\"\>"}], "]"}]}], ",", 
          RowBox[{"17", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"numOp\"\>", ",", "\<\"Less\"\>"}], "]"}]}], ",", 
          RowBox[{"18", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"numQuant\"\>", ",", "5"}], "]"}]}], ",", 
          RowBox[{"19", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"numQuant\"\>", ",", "5"}], "]"}]}], ",", 
          RowBox[{"20", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"expression\"\>", ",", "7"}], "]"}]}], ",", 
          RowBox[{"21", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"lag\"\>", ",", "\<\"2\"\>"}], "]"}]}], ",", 
          RowBox[{"22", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"observable\"\>", ",", "\<\"Close\"\>"}], "]"}]}], 
          ",", 
          RowBox[{"23", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"expression\"\>", ",", "8"}], "]"}]}], ",", 
          RowBox[{"24", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"observable\"\>", ",", "\<\"High\"\>"}], "]"}]}]}], 
         "}"}]}], "}"}]}], ",", 
     RowBox[{"\<\"Return\"\>", "\[Rule]", 
      RowBox[{"-", "0.35246815327187164`"}]}]}], "\[RightAssociation]"}]}], 
  "}"}]], "Output",
 CellChangeTimes->{{3.790628858829801*^9, 3.790628876062457*^9}, {
  3.7906299757461863`*^9, 3.7906299900340548`*^9}, {3.7906318878574953`*^9, 
  3.7906318917190037`*^9}},
 CellLabel->"Out[72]=",ExpressionUUID->"abed7852-dc34-4f30-9e66-131803ad67b2"]
}, Open  ]]
}, Open  ]]
}, Closed]],

Cell[CellGroupData[{

Cell["Population initialization", "Section",
 CellChangeTimes->{{3.790470083277149*^9, 
  3.790470088442541*^9}},ExpressionUUID->"ba18f69f-6916-4ab5-9b7c-\
4291e64843c2"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"NonTermName", "[", "nonterm_", "]"}], ":=", 
   RowBox[{"ReplaceAll", "[", 
    RowBox[{"nonterm", ",", 
     RowBox[{
      RowBox[{"NonTerm", "[", "x_", "]"}], "\[RuleDelayed]", "x"}]}], "]"}]}],
   ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"NonTermWithProd", "[", 
    RowBox[{"nonterm_", ",", "prodIndex_"}], "]"}], ":=", 
   RowBox[{"NonTerm", "[", 
    RowBox[{
     RowBox[{"NonTermName", "[", "nonterm", "]"}], ",", "prodIndex"}], 
    "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ApplicableProductions", "[", 
    RowBox[{"nonterm_", ",", "grammar_"}], "]"}], ":=", 
   RowBox[{"First", "@", 
    RowBox[{"Transpose", "@", 
     RowBox[{"Position", "[", 
      RowBox[{"grammar", ",", 
       RowBox[{"KeyValuePattern", "[", 
        RowBox[{"\"\<From\>\"", "\[Rule]", 
         RowBox[{"NonTermName", "[", "nonterm", "]"}]}], "]"}]}], "]"}]}]}]}],
   ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"UnassignedProductionQ", "[", "prod_", "]"}], ":=", 
    RowBox[{"MatchQ", "[", 
     RowBox[{"prod", ",", 
      RowBox[{"NonTerm", "[", "_", "]"}]}], "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"ProductionRuleAsGraph", "[", 
     RowBox[{"grammar_", ",", "prodIndex_"}], "]"}], ":=", 
    RowBox[{"Block", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
       "rootNonTerm", ",", "newLeafs", ",", "edgeList", ",", "vertexLabels"}],
        "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"rootNonTerm", " ", "=", " ", 
        RowBox[{"NonTermWithProd", "[", 
         RowBox[{
          RowBox[{"NonTerm", "[", 
           RowBox[{
            RowBox[{"grammar", "[", 
             RowBox[{"[", "prodIndex", "]"}], "]"}], "[", "\"\<From\>\"", 
            "]"}], "]"}], ",", "prodIndex"}], "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"newLeafs", " ", "=", " ", 
        RowBox[{
         RowBox[{"grammar", "[", 
          RowBox[{"[", "prodIndex", "]"}], "]"}], "[", "\"\<To\>\"", "]"}]}], 
       ";", "\[IndentingNewLine]", 
       RowBox[{"edgeList", " ", "=", " ", 
        RowBox[{"Thread", "[", 
         RowBox[{"1", "\[Rule]", 
          RowBox[{"Range", "[", 
           RowBox[{"2", ",", 
            RowBox[{"1", "+", 
             RowBox[{"Length", "[", "newLeafs", "]"}]}]}], "]"}]}], "]"}]}], 
       ";", "\[IndentingNewLine]", 
       RowBox[{"vertexLabels", " ", "=", " ", 
        RowBox[{"Prepend", "[", 
         RowBox[{
          RowBox[{"Thread", "[", 
           RowBox[{
            RowBox[{"Range", "[", 
             RowBox[{"2", ",", 
              RowBox[{"1", "+", 
               RowBox[{"Length", "[", "newLeafs", "]"}]}]}], "]"}], "\[Rule]",
             "newLeafs"}], "]"}], ",", 
          RowBox[{"1", "\[Rule]", "rootNonTerm"}]}], "]"}]}], ";", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"{", 
        RowBox[{
         RowBox[{"Graph", "[", 
          RowBox[{"edgeList", ",", 
           RowBox[{"VertexLabels", "\[Rule]", "vertexLabels"}]}], "]"}], ",", 
         "vertexLabels"}], "}"}]}]}], "\[IndentingNewLine]", "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"GrowTree", "[", 
     RowBox[{"graph_", ",", "labels_", ",", "grammar_", ",", "maxDepth_"}], 
     "]"}], ":=", 
    RowBox[{"Block", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{
       "unassignedVertexes", ",", "replaceIndex", ",", "cropped", ",", 
        "replaceNonTerm", ",", "selectedProduction", ",", "sub", ",", "new"}],
        "}"}], ",", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"graph", "===", "$Failed"}], " ", "||", " ", 
          RowBox[{"labels", " ", "===", "$Failed"}]}], ",", 
         RowBox[{"Return", "[", 
          RowBox[{"{", 
           RowBox[{"$Failed", ",", "$Failed"}], "}"}], "]"}]}], "]"}], ";", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"unassignedVertexes", " ", "=", " ", 
        RowBox[{"Cases", "[", 
         RowBox[{"labels", ",", 
          RowBox[{
           RowBox[{"HoldPattern", "[", 
            RowBox[{"v_", "\[Rule]", 
             RowBox[{"t_", " ", "/;", " ", 
              RowBox[{"UnassignedProductionQ", "[", "t", "]"}]}]}], "]"}], 
           "\[RuleDelayed]", "v"}]}], "]"}]}], ";", "\[IndentingNewLine]", 
       RowBox[{"replaceIndex", " ", "=", " ", 
        RowBox[{"RandomChoice", "[", "unassignedVertexes", "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"cropped", " ", "=", " ", 
        RowBox[{"DeleteSubtree", "[", 
         RowBox[{"graph", ",", "labels", ",", "replaceIndex"}], "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"replaceNonTerm", " ", "=", " ", 
        RowBox[{"Last", "[", 
         RowBox[{"labels", "[", 
          RowBox[{"[", "replaceIndex", "]"}], "]"}], "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"selectedProduction", " ", "=", " ", 
        RowBox[{"RandomChoice", "[", 
         RowBox[{"ApplicableProductions", "[", 
          RowBox[{"replaceNonTerm", ",", "grammar"}], "]"}], "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"sub", " ", "=", " ", 
        RowBox[{"ProductionRuleAsGraph", "[", 
         RowBox[{"grammar", ",", "selectedProduction"}], "]"}]}], ";", 
       "\[IndentingNewLine]", 
       RowBox[{"new", " ", "=", " ", 
        RowBox[{"InsertSubtree", "[", 
         RowBox[{
          RowBox[{"First", "[", "cropped", "]"}], ",", 
          RowBox[{"Last", "[", "cropped", "]"}], ",", 
          RowBox[{"First", "[", "sub", "]"}], ",", 
          RowBox[{"Last", "[", "sub", "]"}]}], "]"}]}], ";", 
       "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"If", "[", 
        RowBox[{
         RowBox[{
          RowBox[{"Length", "[", 
           RowBox[{"Last", "[", "new", "]"}], "]"}], "<", "100"}], ",", "new",
          ",", 
         RowBox[{"{", 
          RowBox[{"$Failed", ",", "$Failed"}], "}"}]}], "]"}]}]}], 
     "\[IndentingNewLine]", "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"GenerateRandomTree", "[", 
    RowBox[{"grammar_", ",", "maxDepth_"}], "]"}], ":=", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", "tree", "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"tree", " ", "=", 
       RowBox[{"ProductionRuleAsGraph", "[", 
        RowBox[{"grammar", ",", 
         RowBox[{"RandomInteger", "[", 
          RowBox[{"{", 
           RowBox[{"1", ",", "3"}], "}"}], "]"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"NestWhile", "[", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{
         RowBox[{"GrowTree", "[", 
          RowBox[{
           RowBox[{"First", "[", "#", "]"}], ",", 
           RowBox[{"Last", "[", "#", "]"}], ",", "grammar", ",", "maxDepth"}],
           "]"}], "&"}], ",", "tree", ",", 
        RowBox[{
         RowBox[{
          RowBox[{"#", "=!=", 
           RowBox[{"{", 
            RowBox[{"$Failed", ",", "$Failed"}], "}"}]}], "&&", 
          RowBox[{"Apply", "[", 
           RowBox[{"Or", ",", 
            RowBox[{"Map", "[", 
             RowBox[{"UnassignedProductionQ", ",", 
              RowBox[{"Cases", "[", 
               RowBox[{
                RowBox[{
                 RowBox[{"Last", "[", "#", "]"}], "[", 
                 RowBox[{"[", 
                  RowBox[{"All", ",", "2"}], "]"}], "]"}], ",", "_NonTerm"}], 
               "]"}]}], "]"}]}], "]"}]}], "&"}]}], "\[IndentingNewLine]", 
       "]"}]}]}], "\[IndentingNewLine]", "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"RandomTerm", "[", 
    RowBox[{"name_", ",", "terminalSet_"}], "]"}], ":=", 
   RowBox[{"RandomChoice", "[", 
    RowBox[{"Cases", "[", 
     RowBox[{"terminalSet", ",", 
      RowBox[{"Term", "[", 
       RowBox[{"name", ",", "_"}], "]"}]}], "]"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"GenerateRandomTerminals", "[", 
     RowBox[{"labels_", ",", "terminalSet_"}], "]"}], ":=", 
    RowBox[{"ReplaceAll", "[", 
     RowBox[{"labels", ",", 
      RowBox[{
       RowBox[{"HoldPattern", "[", 
        RowBox[{"v_", "\[Rule]", 
         RowBox[{"Term", "[", "n_", "]"}]}], "]"}], "\[RuleDelayed]", 
       RowBox[{"(", 
        RowBox[{"v", "\[Rule]", 
         RowBox[{"RandomTerm", "[", 
          RowBox[{"n", ",", "terminalSet"}], "]"}]}], ")"}]}]}], "]"}]}], 
   ";"}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"GenerateRandomFunction", "[", 
    RowBox[{"grammar_", ",", "terminalSet_", ",", "maxDepth_"}], "]"}], ":=", 
   
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
       RowBox[{"g", "=", "$Failed"}], ",", 
       RowBox[{"l", "=", "$Failed"}], ",", "labelsWithTerminals"}], "}"}], 
     ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"While", "[", 
       RowBox[{
        RowBox[{
         RowBox[{"g", "===", "$Failed"}], " ", "||", " ", 
         RowBox[{"l", " ", "===", "$Failed"}]}], ",", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{
          RowBox[{"{", 
           RowBox[{"g", ",", "l"}], "}"}], " ", "=", " ", 
          RowBox[{"GenerateRandomTree", "[", 
           RowBox[{"grammar", ",", "maxDepth"}], "]"}]}], ";"}]}], 
       "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
      RowBox[{"labelsWithTerminals", " ", "=", " ", 
       RowBox[{"GenerateRandomTerminals", "[", 
        RowBox[{"l", ",", "terminalSet"}], "]"}]}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"{", 
       RowBox[{
        RowBox[{"Graph", "[", 
         RowBox[{
          RowBox[{"EdgeList", "[", "g", "]"}], ",", 
          RowBox[{"VertexLabels", "\[Rule]", "labelsWithTerminals"}]}], "]"}],
         ",", "labelsWithTerminals"}], "}"}]}]}], "\[IndentingNewLine]", 
    "]"}]}], ";"}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.79054299450154*^9, 3.790543026260806*^9}, 
   3.790543230575636*^9, 3.7905432653671618`*^9, 3.790543306266807*^9, {
   3.7905434746614847`*^9, 3.790543475105719*^9}, {3.790544183363967*^9, 
   3.790544242331396*^9}, {3.790544926364554*^9, 3.790544980891444*^9}, 
   3.790545037348153*^9, {3.7905450692015657`*^9, 3.79054515508599*^9}, {
   3.790631016307605*^9, 3.7906311435116367`*^9}, {3.790631178622498*^9, 
   3.790631184854507*^9}, {3.790631226586007*^9, 3.790631267618294*^9}, {
   3.790631371178335*^9, 3.790631380862493*^9}, {3.7906319482376738`*^9, 
   3.7906319494418707`*^9}, {3.790632002037753*^9, 3.79063200911351*^9}},
 CellLabel->"In[45]:=",ExpressionUUID->"74feb33b-0d28-4497-82a7-826bf5115c1d"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"{", 
   RowBox[{"g", ",", "l"}], "}"}], " ", "=", " ", 
  RowBox[{"GenerateRandomFunction", "[", 
   RowBox[{"grammar", ",", "terminalSet", ",", "100"}], "]"}]}]], "Input",
 CellChangeTimes->{{3.790545429583273*^9, 3.790545433160524*^9}, {
  3.790631195454877*^9, 3.790631195852841*^9}},
 CellLabel->
  "In[982]:=",ExpressionUUID->"e10f642c-c222-466b-b128-54e4041ea6eb"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   GraphicsBox[
    NamespaceBox["NetworkGraphics",
     DynamicModuleBox[{Typeset`graph = HoldComplete[
       Graph[{1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 
        12}, {{{1, 2}, {1, 3}, {3, 4}, {3, 5}, {5, 6}, {6, 7}, {6, 8}, {6, 
         9}, {3, 10}, {10, 11}, {11, 12}}, Null}, {
        VertexLabels -> {
          6 -> $CellContext`NonTerm["expression", 6], 
           3 -> $CellContext`NonTerm["cond", 3], 
           11 -> $CellContext`NonTerm["expression", 8], 
           5 -> $CellContext`NonTerm["numQuant", 5], 
           8 -> $CellContext`Term["observable", "High"], 
           7 -> $CellContext`Term["techInd", "SMA"], 
           10 -> $CellContext`NonTerm["numQuant", 5], 
           9 -> $CellContext`Term["window", "40"], 
           4 -> $CellContext`Term["numOp", "Greater"], 
           12 -> $CellContext`Term["observable", "High"], 
           2 -> $CellContext`Term["not", "Not"], 
           1 -> $CellContext`NonTerm["cond", 2]}}]]}, 
      TagBox[GraphicsGroupBox[{
         {Hue[0.6, 0.7, 0.5], Opacity[0.7], Arrowheads[Medium], 
          ArrowBox[CompressedData["
1:eJxTTMoPSmVmYGDgBmImKIaBM9b1afMWfLNH5T+zR5eH0Tdz7p8p+8HggJ3/
zJ6QevzybDjVodLo9jyzx+9uhHpc8jB3oMqju4cNzZ+YfJh+AG47n3c=
           "], 
           0.02899635065664409]}, 
         {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[
          0.7]}], {DiskBox[{0., 1.414213562373095}, 0.02899635065664409], 
           InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"cond\"\>", ",", "2"}], ")"}], 
            Offset[{2, 2}, {0.02899635065664409, 1.443209913029739}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{0., 0.7071067811865475}, 0.02899635065664409], InsetBox[
            RowBox[{"Term", "(", 
             RowBox[{"\<\"not\"\>", ",", "\<\"Not\"\>"}], ")"}], 
            Offset[{2, 2}, {0.02899635065664409, 0.7361031318431915}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{1.414213562373095, 2.1213203435596424}, 
            0.02899635065664409], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"cond\"\>", ",", "3"}], ")"}], 
            Offset[{2, 2}, {1.443209913029739, 2.1503166942162864}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{0.7071067811865475, 1.414213562373095}, 
            0.02899635065664409], InsetBox[
            RowBox[{"Term", "(", 
             RowBox[{"\<\"numOp\"\>", ",", "\<\"Greater\"\>"}], ")"}], 
            Offset[{2, 2}, {0.7361031318431915, 1.443209913029739}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{1.414213562373095, 1.414213562373095}, 
            0.02899635065664409], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], 
            Offset[{2, 2}, {1.443209913029739, 1.443209913029739}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{1.414213562373095, 0.7071067811865475}, 
            0.02899635065664409], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"expression\"\>", ",", "6"}], ")"}], 
            Offset[{2, 2}, {1.443209913029739, 0.7361031318431915}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{0.7071067811865475, 0.}, 0.02899635065664409], InsetBox[
            RowBox[{"Term", "(", 
             RowBox[{"\<\"techInd\"\>", ",", "\<\"SMA\"\>"}], ")"}], 
            Offset[{2, 2}, {0.7361031318431915, 0.02899635065664409}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{1.414213562373095, 0.}, 0.02899635065664409], InsetBox[
            RowBox[{"Term", "(", 
             RowBox[{"\<\"observable\"\>", ",", "\<\"High\"\>"}], ")"}], 
            Offset[{2, 2}, {1.443209913029739, 0.02899635065664409}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{2.1213203435596424, 0.}, 0.02899635065664409], InsetBox[
            RowBox[{"Term", "(", 
             RowBox[{"\<\"window\"\>", ",", "\<\"40\"\>"}], ")"}], 
            Offset[{2, 2}, {2.1503166942162864, 0.02899635065664409}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{2.82842712474619, 1.414213562373095}, 
            0.02899635065664409], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], 
            Offset[{2, 2}, {2.857423475402834, 1.443209913029739}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{2.82842712474619, 0.7071067811865475}, 
            0.02899635065664409], InsetBox[
            RowBox[{"NonTerm", "(", 
             RowBox[{"\<\"expression\"\>", ",", "8"}], ")"}], 
            Offset[{2, 2}, {2.857423475402834, 0.7361031318431915}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}, {
           DiskBox[{2.82842712474619, 0.}, 0.02899635065664409], InsetBox[
            RowBox[{"Term", "(", 
             RowBox[{"\<\"observable\"\>", ",", "\<\"High\"\>"}], ")"}], 
            Offset[{2, 2}, {2.857423475402834, 0.02899635065664409}], 
            ImageScaled[{0, 0}],
            BaseStyle->"Graphics"]}}}],
       MouseAppearanceTag["NetworkGraphics"]],
      AllowKernelInitialization->False]],
    DefaultBaseStyle->{
     "NetworkGraphics", FrontEnd`GraphicsHighlightColor -> Hue[0.8, 1., 0.6]},
    
    FormatType->TraditionalForm,
    FrameTicks->None], ",", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"1", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"cond\"\>", ",", "2"}], "]"}]}], ",", 
     RowBox[{"2", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\<\"not\"\>", ",", "\<\"Not\"\>"}], "]"}]}], ",", 
     RowBox[{"3", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"cond\"\>", ",", "3"}], "]"}]}], ",", 
     RowBox[{"4", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\<\"numOp\"\>", ",", "\<\"Greater\"\>"}], "]"}]}], ",", 
     RowBox[{"5", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"numQuant\"\>", ",", "5"}], "]"}]}], ",", 
     RowBox[{"6", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"expression\"\>", ",", "6"}], "]"}]}], ",", 
     RowBox[{"7", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\<\"techInd\"\>", ",", "\<\"SMA\"\>"}], "]"}]}], ",", 
     RowBox[{"8", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\<\"observable\"\>", ",", "\<\"High\"\>"}], "]"}]}], ",", 
     RowBox[{"9", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\<\"window\"\>", ",", "\<\"40\"\>"}], "]"}]}], ",", 
     RowBox[{"10", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"numQuant\"\>", ",", "5"}], "]"}]}], ",", 
     RowBox[{"11", "\[Rule]", 
      RowBox[{"NonTerm", "[", 
       RowBox[{"\<\"expression\"\>", ",", "8"}], "]"}]}], ",", 
     RowBox[{"12", "\[Rule]", 
      RowBox[{"Term", "[", 
       RowBox[{"\<\"observable\"\>", ",", "\<\"High\"\>"}], "]"}]}]}], 
    "}"}]}], "}"}]], "Output",
 CellChangeTimes->{{3.790545423707356*^9, 3.790545439519074*^9}, {
  3.790631196267308*^9, 3.790631200695508*^9}, {3.7906312774123583`*^9, 
  3.7906312850520773`*^9}, {3.7906313854619493`*^9, 3.790631401294446*^9}, {
  3.790631900881379*^9, 3.790631957920331*^9}, {3.790632012074144*^9, 
  3.790632041484824*^9}, {3.790797311287427*^9, 3.790797360809066*^9}},
 CellLabel->
  "Out[982]=",ExpressionUUID->"4e7f818a-3719-41e2-9761-51a49c743f7b"]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"SynthesizeTree", "[", 
   RowBox[{"g", ",", "l", ",", "grammar"}], "]"}], " ", "//", " ", 
  "FullForm"}]], "Input",
 CellLabel->
  "In[983]:=",ExpressionUUID->"083d2d44-6b70-4ebd-9563-a4f9ea356324"],

Cell[BoxData[
 TagBox[
  StyleBox[
   RowBox[{"LessEqual", "[", 
    RowBox[{
     RowBox[{"SMA", "[", 
      RowBox[{"\"\<High\>\"", ",", "40"}], "]"}], ",", "\"\<High\>\""}], "]"}],
   ShowSpecialCharacters->False,
   ShowStringCharacters->True,
   NumberMarks->True],
  FullForm]], "Output",
 CellChangeTimes->{{3.790545427566152*^9, 3.790545440662861*^9}, {
  3.790797312898264*^9, 3.790797362118257*^9}},
 CellLabel->
  "Out[983]//FullForm=",ExpressionUUID->"c59a34d0-e042-4f9e-92a1-\
281b25737d92"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"GenerateInitialPopulation", "[", 
    RowBox[{
    "size_", ",", "maxDepth_", ",", "trainingDates_", ",", "transactionCost_",
      ",", "bloatControl_"}], "]"}], ":=", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"seeds", ",", "population"}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"population", " ", "=", " ", 
       RowBox[{"ProgressTable", "[", 
        RowBox[{
         RowBox[{"GenerateRandomFunction", "[", 
          RowBox[{"grammar", ",", "terminalSet", ",", "maxDepth"}], "]"}], 
         ",", "size", ",", 
         RowBox[{
         "\"\<Label\>\"", "\[Rule]", 
          "\"\<Generating initial population\>\""}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"EvaluatePopulation", "[", 
       RowBox[{
       "population", ",", "trainingDates", ",", "transactionCost", ",", 
        "bloatControl"}], "]"}]}]}], "\[IndentingNewLine]", "]"}]}], 
  ";"}]], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.790630056725808*^9, 3.790630106650391*^9}, {
  3.790632054938004*^9, 3.790632080686009*^9}, {3.7906362301061487`*^9, 
  3.790636239959219*^9}, {3.790800357254984*^9, 3.790800361092722*^9}},
 CellLabel->"In[55]:=",ExpressionUUID->"5ae22612-1927-4987-adb0-0f1df11de72e"],

Cell[BoxData[
 RowBox[{
  RowBox[{"population", " ", "=", " ", 
   RowBox[{"GenerateInitialPopulation", "[", 
    RowBox[{"10", ",", "trainingDates", ",", "0.0025"}], "]"}]}], 
  ";"}]], "Input",
 CellChangeTimes->{{3.7906301344312363`*^9, 3.790630149994769*^9}},
 CellLabel->
  "In[152]:=",ExpressionUUID->"4d67144c-ff94-4f38-ae83-a623a9b7df0c"]
}, Closed]],

Cell[CellGroupData[{

Cell["Selection", "Section",
 CellChangeTimes->{{3.7904700983986893`*^9, 
  3.790470099645873*^9}},ExpressionUUID->"b5eb2d33-a765-462a-a382-\
9a8f162fe893"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"ProportionateSelectionIndexes", "[", 
     RowBox[{"population_", ",", "n_"}], "]"}], ":=", 
    RowBox[{"RandomSample", "[", 
     RowBox[{
      RowBox[{
       RowBox[{"Reverse", "[", 
        RowBox[{"Range", "[", "population", "]"}], "]"}], "->", 
       RowBox[{"Range", "[", "population", "]"}]}], ",", "n"}], "]"}]}], 
   ";"}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ProportionateRankedSelection", "[", 
    RowBox[{"evaluatedGenome_", ",", "n_"}], "]"}], ":=", " ", 
   RowBox[{"Part", "[", 
    RowBox[{
     RowBox[{"Reverse", "@", 
      RowBox[{"SortBy", "[", 
       RowBox[{"evaluatedGenome", ",", 
        RowBox[{"Key", "[", "\"\<Score\>\"", "]"}]}], "]"}]}], ",", 
     RowBox[{"ProportionateSelectionIndexes", "[", 
      RowBox[{
       RowBox[{"Length", "[", "evaluatedGenome", "]"}], ",", "n"}], "]"}]}], 
    "]"}]}], ";"}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.784324415464973*^9, 3.7843244870640163`*^9}, {
   3.784324545012617*^9, 3.784324551407508*^9}, {3.784324689942568*^9, 
   3.7843246996464663`*^9}, {3.784383338439673*^9, 3.784383384580194*^9}, {
   3.7843835319289513`*^9, 3.784383537583535*^9}, {3.784383627136422*^9, 
   3.784383680007265*^9}, {3.7843837903725348`*^9, 3.7843838591169033`*^9}, {
   3.784383899108395*^9, 3.7843839193211737`*^9}, {3.784495117366159*^9, 
   3.7844951235361853`*^9}, {3.7847373781884937`*^9, 3.784737378482913*^9}, {
   3.789935842735297*^9, 3.789935846517482*^9}, {3.789947735540329*^9, 
   3.789947737415945*^9}, 3.7904701213589487`*^9, 3.7906307165009003`*^9, 
   3.790800098521867*^9},
 CellLabel->"In[56]:=",ExpressionUUID->"2e167ae8-e18f-45c6-bf61-bdd497c5b695"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"selected", " ", "=", " ", 
  RowBox[{"ProportionateRankedSelection", "[", 
   RowBox[{"population", ",", "4"}], "]"}]}]], "Input",
 CellChangeTimes->{{3.790630511180498*^9, 3.790630531396584*^9}},
 CellLabel->
  "In[357]:=",ExpressionUUID->"9ede90a1-6349-40ac-8c26-36035f9a6450"],

Cell[BoxData[
 RowBox[{"{", 
  RowBox[{
   RowBox[{"\[LeftAssociation]", 
    RowBox[{
     RowBox[{"\<\"Genome\"\>", "\[Rule]", 
      RowBox[{"{", 
       RowBox[{
        GraphicsBox[
         NamespaceBox["NetworkGraphics",
          DynamicModuleBox[{Typeset`graph = HoldComplete[
            
            Graph[{1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 
             18, 19, 20, 21, 22, 23, 24, 25, 
             26}, {{{1, 2}, {1, 3}, {1, 4}, {3, 5}, {3, 6}, {3, 7}, {7, 8}, {
              8, 9}, {8, 10}, {6, 11}, {6, 12}, {12, 13}, {12, 14}, {4, 15}, {
              4, 16}, {4, 17}, {16, 18}, {16, 19}, {19, 20}, {19, 21}, {19, 
              22}, {17, 23}, {23, 24}, {23, 25}, {23, 26}}, Null}, {
             VertexLabels -> {
               6 -> $CellContext`NonTerm["numQuant", 4], 
                21 -> $CellContext`Term["observable", "Open"], 
                18 -> $CellContext`Term["factor", "0.7"], 
                23 -> $CellContext`NonTerm["expression", 6], 
                24 -> $CellContext`Term["techInd", "SMA"], 
                22 -> $CellContext`Term["window", "40"], 
                3 -> $CellContext`NonTerm["cond", 3], 
                20 -> $CellContext`Term["techInd", "EMA"], 
                11 -> $CellContext`Term["factor", "0.7"], 
                5 -> $CellContext`Term["numOp", "GreaterEqual"], 
                8 -> $CellContext`NonTerm["expression", 7], 
                7 -> $CellContext`NonTerm["numQuant", 5], 
                14 -> $CellContext`Term["observable", "Open"], 
                10 -> $CellContext`Term["observable", "Close"], 
                25 -> $CellContext`Term["observable", "Open"], 
                9 -> $CellContext`Term["lag", "2"], 
                4 -> $CellContext`NonTerm["cond", 3], 
                26 -> $CellContext`Term["window", "20"], 
                17 -> $CellContext`NonTerm["numQuant", 5], 
                16 -> $CellContext`NonTerm["numQuant", 4], 
                12 -> $CellContext`NonTerm["expression", 7], 
                13 -> $CellContext`Term["lag", "1"], 
                2 -> $CellContext`Term["logicOp", "Or"], 
                15 -> $CellContext`Term["numOp", "Greater"], 
                1 -> $CellContext`NonTerm["cond", 1], 
                19 -> $CellContext`NonTerm["expression", 6]}}]]}, 
           TagBox[GraphicsGroupBox[{
              {Hue[0.6, 0.7, 0.5], Opacity[0.7], Arrowheads[
               0.020299059226009324`], ArrowBox[CompressedData["
1:eJxTTMoPSmVmYGCQBGImKLab4sPleJDRwXB9YILrByaHU21VAhkZd+wh9B97
dHnvSvctNpM+4JRffL1TqPQrvwNMHl09AxRA1H/CkIeIP7LHJQ/hMzjA5NHt
E38azePnx4pT/klAQUo8FxdOeQmwflG4PLp7jMD0JXsDFHGEPMScN3B5dPfC
+OjyMD56OKHLw8IZJo9uH8w9uOSNoO6AyaOHx1+ptB1ha9jh9qHLQ8zjgcuj
hxeMj+ofhHqY+aju48FQj0seEh4CcHl0+yD+E8IpD+Pjkv8Hdp84XB4Aip43
EA==
                "], 0.048054365328262516`]}, 
              {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[
               0.7]}], {
                DiskBox[{2.219362335645683, 2.3673198246887286}, 
                 0.048054365328262516], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"cond\"\>", ",", "1"}], ")"}], 
                 Offset[{2, 2}, {2.2674167009739454, 2.415374190016991}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{0.44387246712913664, 1.7754898685165466}, 
                 0.048054365328262516], InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"logicOp\"\>", ",", "\<\"Or\"\>"}], ")"}], 
                 Offset[{2, 2}, {0.49192683245739915, 1.8235442338448091}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{1.0357024233013188, 1.7754898685165466}, 
                 0.048054365328262516], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"cond\"\>", ",", "3"}], ")"}], 
                 Offset[{2, 2}, {1.0837567886295814, 1.8235442338448091}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{3.9948522041622296, 1.7754898685165466}, 
                 0.048054365328262516], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"cond\"\>", ",", "3"}], ")"}], 
                 Offset[{2, 2}, {4.042906569490492, 1.8235442338448091}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{0., 1.1836599123443643}, 0.048054365328262516], 
                InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"numOp\"\>", ",", "\<\"GreaterEqual\"\>"}], 
                  ")"}], 
                 Offset[{2, 2}, {0.048054365328262516, 1.2317142776726269}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{0.5918299561721821, 1.1836599123443643}, 
                 0.048054365328262516], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"numQuant\"\>", ",", "4"}], ")"}], 
                 Offset[{2, 2}, {0.6398843215004446, 1.2317142776726269}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{2.0714048466026376, 1.1836599123443643}, 
                 0.048054365328262516], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], 
                 Offset[{2, 2}, {2.1194592119309, 1.2317142776726269}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{2.0714048466026376, 0.591829956172182}, 
                 0.048054365328262516], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"expression\"\>", ",", "7"}], ")"}], 
                 Offset[{2, 2}, {2.1194592119309, 0.6398843215004446}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{1.7754898685165466, 0.}, 0.048054365328262516], 
                InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"lag\"\>", ",", "\<\"2\"\>"}], ")"}], 
                 Offset[{2, 2}, {1.8235442338448091, 0.048054365328262516}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{2.3673198246887286, 0.}, 0.048054365328262516], 
                InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"observable\"\>", ",", "\<\"Close\"\>"}], ")"}],
                  Offset[{2, 2}, {2.415374190016991, 0.048054365328262516}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{0.29591497808609113, 0.591829956172182}, 
                 0.048054365328262516], InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"factor\"\>", ",", "\<\"0.7\"\>"}], ")"}], 
                 Offset[{2, 2}, {0.34396934341435365, 0.6398843215004446}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{0.8877449342582733, 0.591829956172182}, 
                 0.048054365328262516], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"expression\"\>", ",", "7"}], ")"}], 
                 Offset[{2, 2}, {0.9357992995865358, 0.6398843215004446}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{0.5918299561721821, 0.}, 0.048054365328262516], 
                InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"lag\"\>", ",", "\<\"1\"\>"}], ")"}], 
                 Offset[{2, 2}, {0.6398843215004446, 0.048054365328262516}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{1.1836599123443645, 0.}, 0.048054365328262516], 
                InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"observable\"\>", ",", "\<\"Open\"\>"}], ")"}], 
                 Offset[{2, 2}, {1.231714277672627, 0.048054365328262516}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{2.6632348027748196, 1.1836599123443643}, 
                 0.048054365328262516], InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"numOp\"\>", ",", "\<\"Greater\"\>"}], ")"}], 
                 Offset[{2, 2}, {2.711289168103082, 1.2317142776726269}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{3.255064758947002, 1.1836599123443643}, 
                 0.048054365328262516], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"numQuant\"\>", ",", "4"}], ")"}], 
                 Offset[{2, 2}, {3.3031191242752644, 1.2317142776726269}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{5.32646960554964, 1.1836599123443643}, 
                 0.048054365328262516], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], Offset[{2, 2},
                  {5.3745239708779025, 1.2317142776726269}], ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{2.9591497808609106, 0.591829956172182}, 
                 0.048054365328262516], InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"factor\"\>", ",", "\<\"0.7\"\>"}], ")"}], 
                 Offset[{2, 2}, {3.007204146189173, 0.6398843215004446}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{3.550979737033093, 0.591829956172182}, 
                 0.048054365328262516], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"expression\"\>", ",", "6"}], ")"}], 
                 Offset[{2, 2}, {3.5990341023613555, 0.6398843215004446}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{2.9591497808609106, 0.}, 0.048054365328262516], 
                InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"techInd\"\>", ",", "\<\"EMA\"\>"}], ")"}], 
                 Offset[{2, 2}, {3.007204146189173, 0.048054365328262516}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{3.550979737033093, 0.}, 0.048054365328262516], 
                InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"observable\"\>", ",", "\<\"Open\"\>"}], ")"}], 
                 Offset[{2, 2}, {3.5990341023613555, 0.048054365328262516}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{4.142809693205275, 0.}, 0.048054365328262516], 
                InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"window\"\>", ",", "\<\"40\"\>"}], ")"}], 
                 Offset[{2, 2}, {4.1908640585335375, 0.048054365328262516}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{5.32646960554964, 0.591829956172182}, 
                 0.048054365328262516], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"expression\"\>", ",", "6"}], ")"}], 
                 Offset[{2, 2}, {5.3745239708779025, 0.6398843215004446}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{4.734639649377458, 0.}, 0.048054365328262516], 
                InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"techInd\"\>", ",", "\<\"SMA\"\>"}], ")"}], 
                 Offset[{2, 2}, {4.78269401470572, 0.048054365328262516}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{5.32646960554964, 0.}, 0.048054365328262516], 
                InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"observable\"\>", ",", "\<\"Open\"\>"}], ")"}], 
                 Offset[{2, 2}, {5.3745239708779025, 0.048054365328262516}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{5.918299561721822, 0.}, 0.048054365328262516], 
                InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"window\"\>", ",", "\<\"20\"\>"}], ")"}], 
                 Offset[{2, 2}, {5.9663539270500845, 0.048054365328262516}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}}}],
            MouseAppearanceTag["NetworkGraphics"]],
           AllowKernelInitialization->False]],
         DefaultBaseStyle->{
          "NetworkGraphics", FrontEnd`GraphicsHighlightColor -> 
           Hue[0.8, 1., 0.6]},
         FormatType->TraditionalForm,
         FrameTicks->None], ",", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"1", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"cond\"\>", ",", "1"}], "]"}]}], ",", 
          RowBox[{"2", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"logicOp\"\>", ",", "\<\"Or\"\>"}], "]"}]}], ",", 
          RowBox[{"3", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"cond\"\>", ",", "3"}], "]"}]}], ",", 
          RowBox[{"4", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"cond\"\>", ",", "3"}], "]"}]}], ",", 
          RowBox[{"5", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"numOp\"\>", ",", "\<\"GreaterEqual\"\>"}], "]"}]}], 
          ",", 
          RowBox[{"6", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"numQuant\"\>", ",", "4"}], "]"}]}], ",", 
          RowBox[{"7", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"numQuant\"\>", ",", "5"}], "]"}]}], ",", 
          RowBox[{"8", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"expression\"\>", ",", "7"}], "]"}]}], ",", 
          RowBox[{"9", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"lag\"\>", ",", "\<\"2\"\>"}], "]"}]}], ",", 
          RowBox[{"10", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"observable\"\>", ",", "\<\"Close\"\>"}], "]"}]}], 
          ",", 
          RowBox[{"11", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"factor\"\>", ",", "\<\"0.7\"\>"}], "]"}]}], ",", 
          RowBox[{"12", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"expression\"\>", ",", "7"}], "]"}]}], ",", 
          RowBox[{"13", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"lag\"\>", ",", "\<\"1\"\>"}], "]"}]}], ",", 
          RowBox[{"14", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"observable\"\>", ",", "\<\"Open\"\>"}], "]"}]}], ",", 
          RowBox[{"15", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"numOp\"\>", ",", "\<\"Greater\"\>"}], "]"}]}], ",", 
          RowBox[{"16", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"numQuant\"\>", ",", "4"}], "]"}]}], ",", 
          RowBox[{"17", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"numQuant\"\>", ",", "5"}], "]"}]}], ",", 
          RowBox[{"18", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"factor\"\>", ",", "\<\"0.7\"\>"}], "]"}]}], ",", 
          RowBox[{"19", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"expression\"\>", ",", "6"}], "]"}]}], ",", 
          RowBox[{"20", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"techInd\"\>", ",", "\<\"EMA\"\>"}], "]"}]}], ",", 
          RowBox[{"21", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"observable\"\>", ",", "\<\"Open\"\>"}], "]"}]}], ",", 
          RowBox[{"22", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"window\"\>", ",", "\<\"40\"\>"}], "]"}]}], ",", 
          RowBox[{"23", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"expression\"\>", ",", "6"}], "]"}]}], ",", 
          RowBox[{"24", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"techInd\"\>", ",", "\<\"SMA\"\>"}], "]"}]}], ",", 
          RowBox[{"25", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"observable\"\>", ",", "\<\"Open\"\>"}], "]"}]}], ",", 
          RowBox[{"26", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"window\"\>", ",", "\<\"20\"\>"}], "]"}]}]}], "}"}]}],
        "}"}]}], ",", 
     RowBox[{"\<\"Return\"\>", "\[Rule]", "5.324547464048747`"}]}], 
    "\[RightAssociation]"}], ",", 
   RowBox[{"\[LeftAssociation]", 
    RowBox[{
     RowBox[{"\<\"Genome\"\>", "\[Rule]", 
      RowBox[{"{", 
       RowBox[{
        GraphicsBox[
         NamespaceBox["NetworkGraphics",
          DynamicModuleBox[{Typeset`graph = HoldComplete[
            
            Graph[{1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 
             18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 
             34, 35, 36, 37, 38, 39, 40, 41, 42, 
             43}, {{{1, 2}, {1, 3}, {3, 4}, {3, 5}, {5, 6}, {5, 7}, {5, 8}, {
              7, 9}, {7, 10}, {7, 11}, {10, 12}, {10, 13}, {10, 14}, {13, 
              15}, {11, 16}, {11, 17}, {11, 18}, {17, 19}, {15, 20}, {18, 
              21}, {21, 22}, {21, 23}, {21, 24}, {19, 25}, {19, 26}, {19, 
              27}, {8, 28}, {8, 29}, {8, 30}, {14, 31}, {14, 32}, {32, 33}, {
              30, 34}, {30, 35}, {29, 36}, {29, 37}, {37, 38}, {37, 39}, {37, 
              40}, {35, 41}, {35, 42}, {35, 43}}, Null}, {
             VertexLabels -> {
               39 -> $CellContext`Term["observable", "Low"], 
                19 -> $CellContext`NonTerm["expression", 6], 
                23 -> $CellContext`Term["observable", "High"], 
                26 -> $CellContext`Term["observable", "High"], 
                31 -> $CellContext`Term["factor", "0.9"], 
                36 -> $CellContext`Term["factor", "1.3"], 
                43 -> $CellContext`Term["window", "40"], 
                34 -> $CellContext`Term["factor", "1.1"], 
                40 -> $CellContext`Term["window", "20"], 
                9 -> $CellContext`Term["logicOp", "Xor"], 
                22 -> $CellContext`Term["techInd", "EMA"], 
                17 -> $CellContext`NonTerm["numQuant", 5], 
                14 -> $CellContext`NonTerm["numQuant", 4], 
                5 -> $CellContext`NonTerm["cond", 1], 
                6 -> $CellContext`Term["logicOp", "Xor"], 
                37 -> $CellContext`NonTerm["expression", 6], 
                24 -> $CellContext`Term["window", "30"], 
                13 -> $CellContext`NonTerm["numQuant", 5], 
                32 -> $CellContext`NonTerm["expression", 8], 
                35 -> $CellContext`NonTerm["expression", 6], 
                42 -> $CellContext`Term["observable", "Open"], 
                33 -> $CellContext`Term["observable", "High"], 
                28 -> $CellContext`Term["numOp", "Greater"], 
                38 -> $CellContext`Term["techInd", "EMA"], 
                16 -> $CellContext`Term["numOp", "GreaterEqual"], 
                4 -> $CellContext`Term["not", "Not"], 
                15 -> $CellContext`NonTerm["expression", 8], 
                12 -> $CellContext`Term["numOp", "Less"], 
                21 -> $CellContext`NonTerm["expression", 6], 
                20 -> $CellContext`Term["observable", "Close"], 
                41 -> $CellContext`Term["techInd", "SMA"], 
                1 -> $CellContext`NonTerm["cond", 2], 
                7 -> $CellContext`NonTerm["cond", 1], 
                8 -> $CellContext`NonTerm["cond", 3], 
                18 -> $CellContext`NonTerm["numQuant", 5], 
                2 -> $CellContext`Term["not", "Not"], 
                10 -> $CellContext`NonTerm["cond", 3], 
                3 -> $CellContext`NonTerm["cond", 2], 
                27 -> $CellContext`Term["window", "50"], 
                11 -> $CellContext`NonTerm["cond", 3], 
                25 -> $CellContext`Term["techInd", "SMA"], 
                29 -> $CellContext`NonTerm["numQuant", 4], 
                30 -> $CellContext`NonTerm["numQuant", 4]}}]]}, 
           TagBox[GraphicsGroupBox[{
              {Hue[0.6, 0.7, 0.5], Opacity[0.7], Arrowheads[
               0.017876397329997875`], ArrowBox[CompressedData["
1:eJxTTMoPSmVmYGDQAmImKIYB5Q3N6UpfP9jD+Cpg/gN7dHkIfcHetMN19ub8
nzj4D+xxqddQK9lyTPgzVJzBAZ0PUfcSp/qDZ27lfXfmd9CZk8KYbcSKoR/V
nJ/26Oot/5m+CO/7jdO8RZPcQypzBRxwyZsf3nuQtV7KAZd9qP7+YI8uj10d
ujynA0we3T0Q93PD1aPLO70Sa1pwmh+nPCS8hOHy6P7Ru35Hfa+jGE55Y9+z
JYkJEjjlHdbPi/bbIweXR3cPjA/zH7p7VF//7i1hEcIpr5X45paEsghcHt08
GB+WftHdC+PD1KO7F8aHyaOrh4UPuvno6nHJw8ILJo9un7XlOr5Vc2VwysP4
uOQh8a0Al0dPb5B0/NUel7xdiZrpnzV/0eQR6dFAKNSPP5DdAZc8LH3C5NHj
C8aHyaOrh5kPK3fQ5WF8XPKw+IfJo/sH5n9c8jA+LnlIemSGmw8Ak+kziA==

                "], 0.05873337746304011]}, 
              {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[
               0.7]}], {
                DiskBox[{0., 1.0598472636729717}, 0.05873337746304011], 
                InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"cond\"\>", ",", "2"}], ")"}], 
                 Offset[{2, 2}, {0.05873337746304011, 1.1185806411360117}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{0., 0.5299236318364859}, 0.05873337746304011], 
                InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"not\"\>", ",", "\<\"Not\"\>"}], ")"}], 
                 Offset[{2, 2}, {0.05873337746304011, 0.588657009299526}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{0.2649618159182429, 1.5897708955094576}, 
                 0.05873337746304011], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"cond\"\>", ",", "2"}], ")"}], Offset[{2, 2}, 
                 {0.32369519338128305, 1.6485042729724977}], ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{0.5299236318364858, 1.0598472636729717}, 
                 0.05873337746304011], InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"not\"\>", ",", "\<\"Not\"\>"}], ")"}], 
                 Offset[{2, 2}, {0.5886570092995259, 1.1185806411360117}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{1.1923281716320933, 2.1196945273459433}, 
                 0.05873337746304011], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"cond\"\>", ",", "1"}], ")"}], 
                 Offset[{2, 2}, {1.2510615490951333, 2.1784279048089834}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{0.7948854477547288, 1.5897708955094576}, 
                 0.05873337746304011], InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"logicOp\"\>", ",", "\<\"Xor\"\>"}], ")"}], 
                 Offset[{2, 2}, {0.8536188252177689, 1.6485042729724977}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{3.908186784794083, 2.6496181591824293}, 
                 0.05873337746304011], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"cond\"\>", ",", "1"}], ")"}], 
                 Offset[{2, 2}, {3.9669201622571233, 2.7083515366454693}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{2.1196945273459433, 1.5897708955094576}, 
                 0.05873337746304011], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"cond\"\>", ",", "3"}], ")"}], 
                 Offset[{2, 2}, {2.1784279048089834, 1.6485042729724977}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{1.722251803468579, 2.1196945273459433}, 
                 0.05873337746304011], InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"logicOp\"\>", ",", "\<\"Xor\"\>"}], ")"}], 
                 Offset[{2, 2}, {1.780985180931619, 2.1784279048089834}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{4.106908146732765, 2.1196945273459433}, 
                 0.05873337746304011], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"cond\"\>", ",", "3"}], ")"}], 
                 Offset[{2, 2}, {4.165641524195806, 2.1784279048089834}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{6.624045397956073, 2.1196945273459433}, 
                 0.05873337746304011], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"cond\"\>", ",", "3"}], ")"}], 
                 Offset[{2, 2}, {6.682778775419114, 2.1784279048089834}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{3.444503606937158, 1.5897708955094576}, 
                 0.05873337746304011], InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"numOp\"\>", ",", "\<\"Less\"\>"}], ")"}], 
                 Offset[{2, 2}, {3.503236984400198, 1.6485042729724977}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{3.974427238773644, 1.5897708955094576}, 
                 0.05873337746304011], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], 
                 Offset[{2, 2}, {4.033160616236684, 1.6485042729724977}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{4.769312686528373, 1.5897708955094576}, 
                 0.05873337746304011], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"numQuant\"\>", ",", "4"}], ")"}], 
                 Offset[{2, 2}, {4.828046063991414, 1.6485042729724977}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{3.974427238773644, 1.0598472636729717}, 
                 0.05873337746304011], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"expression\"\>", ",", "8"}], ")"}], 
                 Offset[{2, 2}, {4.033160616236684, 1.1185806411360117}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{5.564198134283101, 1.5897708955094576}, 
                 0.05873337746304011], InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"numOp\"\>", ",", "\<\"GreaterEqual\"\>"}], 
                  ")"}], Offset[{2, 2}, \
{5.622931511746142, 1.6485042729724977}], ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{6.094121766119588, 1.5897708955094576}, 
                 0.05873337746304011], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], 
                 Offset[{2, 2}, {6.152855143582628, 1.6485042729724977}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{7.683892661629045, 1.5897708955094576}, 
                 0.05873337746304011], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], 
                 Offset[{2, 2}, {7.742626039092086, 1.6485042729724977}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{6.094121766119588, 1.0598472636729717}, 
                 0.05873337746304011], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"expression\"\>", ",", "6"}], ")"}], 
                 Offset[{2, 2}, {6.152855143582628, 1.1185806411360117}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{3.974427238773644, 0.5299236318364859}, 
                 0.05873337746304011], InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"observable\"\>", ",", "\<\"Close\"\>"}], ")"}],
                  Offset[{2, 2}, {4.033160616236684, 0.588657009299526}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{7.683892661629045, 1.0598472636729717}, 
                 0.05873337746304011], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"expression\"\>", ",", "6"}], ")"}], Offset[{2, 2},
                  {7.742626039092086, 1.1185806411360117}], ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{7.153969029792559, 0.5299236318364859}, 
                 0.05873337746304011], InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"techInd\"\>", ",", "\<\"EMA\"\>"}], ")"}], 
                 Offset[{2, 2}, {7.212702407255599, 0.588657009299526}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{7.683892661629045, 0.5299236318364859}, 
                 0.05873337746304011], InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"observable\"\>", ",", "\<\"High\"\>"}], ")"}], 
                 Offset[{2, 2}, {7.742626039092086, 0.588657009299526}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{8.21381629346553, 0.5299236318364859}, 
                 0.05873337746304011], InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"window\"\>", ",", "\<\"30\"\>"}], ")"}], 
                 Offset[{2, 2}, {8.272549670928571, 0.588657009299526}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{5.564198134283101, 0.5299236318364859}, 
                 0.05873337746304011], InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"techInd\"\>", ",", "\<\"SMA\"\>"}], ")"}], 
                 Offset[{2, 2}, {5.622931511746142, 0.588657009299526}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{6.094121766119588, 0.5299236318364859}, 
                 0.05873337746304011], InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"observable\"\>", ",", "\<\"High\"\>"}], ")"}], 
                 Offset[{2, 2}, {6.152855143582628, 0.588657009299526}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{6.624045397956073, 0.5299236318364859}, 
                 0.05873337746304011], InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"window\"\>", ",", "\<\"50\"\>"}], ")"}], 
                 Offset[{2, 2}, {6.682778775419114, 0.588657009299526}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{1.0598472636729717, 1.0598472636729717}, 
                 0.05873337746304011], InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"numOp\"\>", ",", "\<\"Greater\"\>"}], ")"}], 
                 Offset[{2, 2}, {1.1185806411360117, 1.1185806411360117}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{1.5897708955094576, 1.0598472636729717}, 
                 0.05873337746304011], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"numQuant\"\>", ",", "4"}], ")"}], 
                 Offset[{2, 2}, {1.6485042729724977, 1.1185806411360117}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{3.179541791018915, 1.0598472636729717}, 
                 0.05873337746304011], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"numQuant\"\>", ",", "4"}], ")"}], 
                 Offset[{2, 2}, {3.2382751684819553, 1.1185806411360117}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{4.504350870610129, 1.0598472636729717}, 
                 0.05873337746304011], InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"factor\"\>", ",", "\<\"0.9\"\>"}], ")"}], 
                 Offset[{2, 2}, {4.56308424807317, 1.1185806411360117}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{5.034274502446616, 1.0598472636729717}, 
                 0.05873337746304011], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"expression\"\>", ",", "8"}], ")"}], 
                 Offset[{2, 2}, {5.093007879909656, 1.1185806411360117}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{5.034274502446616, 0.5299236318364859}, 
                 0.05873337746304011], InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"observable\"\>", ",", "\<\"High\"\>"}], ")"}], 
                 Offset[{2, 2}, {5.093007879909656, 0.588657009299526}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{2.914579975100672, 0.5299236318364859}, 
                 0.05873337746304011], InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"factor\"\>", ",", "\<\"1.1\"\>"}], ")"}], 
                 Offset[{2, 2}, {2.973313352563712, 0.588657009299526}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{3.444503606937158, 0.5299236318364859}, 
                 0.05873337746304011], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"expression\"\>", ",", "6"}], ")"}], 
                 Offset[{2, 2}, {3.503236984400198, 0.588657009299526}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{1.3248090795912146, 0.5299236318364859}, 
                 0.05873337746304011], InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"factor\"\>", ",", "\<\"1.3\"\>"}], ")"}], 
                 Offset[{2, 2}, {1.3835424570542547, 0.588657009299526}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{1.8547327114277006, 0.5299236318364859}, 
                 0.05873337746304011], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"expression\"\>", ",", "6"}], ")"}], 
                 Offset[{2, 2}, {1.9134660888907407, 0.588657009299526}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{1.3248090795912146, 0.}, 0.05873337746304011], 
                InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"techInd\"\>", ",", "\<\"EMA\"\>"}], ")"}], 
                 Offset[{2, 2}, {1.3835424570542547, 0.05873337746304011}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{1.8547327114277006, 0.}, 0.05873337746304011], 
                InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"observable\"\>", ",", "\<\"Low\"\>"}], ")"}], 
                 Offset[{2, 2}, {1.9134660888907407, 0.05873337746304011}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{2.3846563432641865, 0.}, 0.05873337746304011], 
                InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"window\"\>", ",", "\<\"20\"\>"}], ")"}], 
                 Offset[{2, 2}, {2.4433897207272266, 0.05873337746304011}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{2.914579975100672, 0.}, 0.05873337746304011], 
                InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"techInd\"\>", ",", "\<\"SMA\"\>"}], ")"}], 
                 Offset[{2, 2}, {2.973313352563712, 0.05873337746304011}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{3.444503606937158, 0.}, 0.05873337746304011], 
                InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"observable\"\>", ",", "\<\"Open\"\>"}], ")"}], 
                 Offset[{2, 2}, {3.503236984400198, 0.05873337746304011}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{3.974427238773644, 0.}, 0.05873337746304011], 
                InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"window\"\>", ",", "\<\"40\"\>"}], ")"}], 
                 Offset[{2, 2}, {4.033160616236684, 0.05873337746304011}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}}}],
            MouseAppearanceTag["NetworkGraphics"]],
           AllowKernelInitialization->False]],
         DefaultBaseStyle->{
          "NetworkGraphics", FrontEnd`GraphicsHighlightColor -> 
           Hue[0.8, 1., 0.6]},
         FormatType->TraditionalForm,
         FrameTicks->None], ",", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"1", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"cond\"\>", ",", "2"}], "]"}]}], ",", 
          RowBox[{"2", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"not\"\>", ",", "\<\"Not\"\>"}], "]"}]}], ",", 
          RowBox[{"3", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"cond\"\>", ",", "2"}], "]"}]}], ",", 
          RowBox[{"4", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"not\"\>", ",", "\<\"Not\"\>"}], "]"}]}], ",", 
          RowBox[{"5", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"cond\"\>", ",", "1"}], "]"}]}], ",", 
          RowBox[{"6", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"logicOp\"\>", ",", "\<\"Xor\"\>"}], "]"}]}], ",", 
          RowBox[{"7", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"cond\"\>", ",", "1"}], "]"}]}], ",", 
          RowBox[{"8", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"cond\"\>", ",", "3"}], "]"}]}], ",", 
          RowBox[{"9", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"logicOp\"\>", ",", "\<\"Xor\"\>"}], "]"}]}], ",", 
          RowBox[{"10", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"cond\"\>", ",", "3"}], "]"}]}], ",", 
          RowBox[{"11", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"cond\"\>", ",", "3"}], "]"}]}], ",", 
          RowBox[{"12", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"numOp\"\>", ",", "\<\"Less\"\>"}], "]"}]}], ",", 
          RowBox[{"13", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"numQuant\"\>", ",", "5"}], "]"}]}], ",", 
          RowBox[{"14", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"numQuant\"\>", ",", "4"}], "]"}]}], ",", 
          RowBox[{"15", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"expression\"\>", ",", "8"}], "]"}]}], ",", 
          RowBox[{"16", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"numOp\"\>", ",", "\<\"GreaterEqual\"\>"}], "]"}]}], 
          ",", 
          RowBox[{"17", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"numQuant\"\>", ",", "5"}], "]"}]}], ",", 
          RowBox[{"18", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"numQuant\"\>", ",", "5"}], "]"}]}], ",", 
          RowBox[{"19", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"expression\"\>", ",", "6"}], "]"}]}], ",", 
          RowBox[{"20", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"observable\"\>", ",", "\<\"Close\"\>"}], "]"}]}], 
          ",", 
          RowBox[{"21", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"expression\"\>", ",", "6"}], "]"}]}], ",", 
          RowBox[{"22", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"techInd\"\>", ",", "\<\"EMA\"\>"}], "]"}]}], ",", 
          RowBox[{"23", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"observable\"\>", ",", "\<\"High\"\>"}], "]"}]}], ",", 
          RowBox[{"24", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"window\"\>", ",", "\<\"30\"\>"}], "]"}]}], ",", 
          RowBox[{"25", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"techInd\"\>", ",", "\<\"SMA\"\>"}], "]"}]}], ",", 
          RowBox[{"26", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"observable\"\>", ",", "\<\"High\"\>"}], "]"}]}], ",", 
          RowBox[{"27", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"window\"\>", ",", "\<\"50\"\>"}], "]"}]}], ",", 
          RowBox[{"28", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"numOp\"\>", ",", "\<\"Greater\"\>"}], "]"}]}], ",", 
          RowBox[{"29", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"numQuant\"\>", ",", "4"}], "]"}]}], ",", 
          RowBox[{"30", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"numQuant\"\>", ",", "4"}], "]"}]}], ",", 
          RowBox[{"31", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"factor\"\>", ",", "\<\"0.9\"\>"}], "]"}]}], ",", 
          RowBox[{"32", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"expression\"\>", ",", "8"}], "]"}]}], ",", 
          RowBox[{"33", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"observable\"\>", ",", "\<\"High\"\>"}], "]"}]}], ",", 
          RowBox[{"34", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"factor\"\>", ",", "\<\"1.1\"\>"}], "]"}]}], ",", 
          RowBox[{"35", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"expression\"\>", ",", "6"}], "]"}]}], ",", 
          RowBox[{"36", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"factor\"\>", ",", "\<\"1.3\"\>"}], "]"}]}], ",", 
          RowBox[{"37", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"expression\"\>", ",", "6"}], "]"}]}], ",", 
          RowBox[{"38", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"techInd\"\>", ",", "\<\"EMA\"\>"}], "]"}]}], ",", 
          RowBox[{"39", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"observable\"\>", ",", "\<\"Low\"\>"}], "]"}]}], ",", 
          
          RowBox[{"40", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"window\"\>", ",", "\<\"20\"\>"}], "]"}]}], ",", 
          RowBox[{"41", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"techInd\"\>", ",", "\<\"SMA\"\>"}], "]"}]}], ",", 
          RowBox[{"42", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"observable\"\>", ",", "\<\"Open\"\>"}], "]"}]}], ",", 
          RowBox[{"43", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"window\"\>", ",", "\<\"40\"\>"}], "]"}]}]}], "}"}]}],
        "}"}]}], ",", 
     RowBox[{"\<\"Return\"\>", "\[Rule]", 
      RowBox[{"-", "0.082430262350357`"}]}]}], "\[RightAssociation]"}], ",", 
   RowBox[{"\[LeftAssociation]", 
    RowBox[{
     RowBox[{"\<\"Genome\"\>", "\[Rule]", 
      RowBox[{"{", 
       RowBox[{
        GraphicsBox[
         NamespaceBox["NetworkGraphics",
          DynamicModuleBox[{Typeset`graph = HoldComplete[
            
            Graph[{1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 
             12}, {{{1, 2}, {1, 3}, {1, 4}, {4, 5}, {5, 6}, {5, 7}, {5, 8}, {
              3, 9}, {3, 10}, {10, 11}, {10, 12}}, Null}, {
             VertexLabels -> {
               6 -> $CellContext`Term["techInd", "EMA"], 
                3 -> $CellContext`NonTerm["numQuant", 4], 
                11 -> $CellContext`Term["lag", "2"], 
                5 -> $CellContext`NonTerm["expression", 6], 
                8 -> $CellContext`Term["window", "40"], 
                7 -> $CellContext`Term["observable", "Low"], 
                10 -> $CellContext`NonTerm["expression", 7], 
                9 -> $CellContext`Term["factor", "1.3"], 
                4 -> $CellContext`NonTerm["numQuant", 5], 
                12 -> $CellContext`Term["observable", "Open"], 
                2 -> $CellContext`Term["numOp", "LessEqual"], 
                1 -> $CellContext`NonTerm["cond", 3]}}]]}, 
           TagBox[GraphicsGroupBox[{
              {Hue[0.6, 0.7, 0.5], Opacity[0.7], Arrowheads[Medium], 
               ArrowBox[CompressedData["
1:eJxTTMoPSmVmYGDgBmImKH5R2vPbS/GbfV7ESpsfMxgcGKAAJo4uD+E/s8cv
z+aAKo+u/hqa+DM0cz6giaObx+aAXf4ZDn9gqsclnzQ5f9fcldxweezueWaP
X/4bXB4ApV6gpA==
                "], 0.03343507762641268]}, 
              {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[
               0.7]}], {
                DiskBox[{1.3831281496162493, 2.074692224424374}, 
                 0.03343507762641268], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"cond\"\>", ",", "3"}], ")"}], 
                 Offset[{2, 2}, {1.416563227242662, 2.1081273020507867}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{0., 1.3831281496162493}, 0.03343507762641268], 
                InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"numOp\"\>", ",", "\<\"LessEqual\"\>"}], ")"}], 
                 Offset[{2, 2}, {0.03343507762641268, 1.416563227242662}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{0.6915640748081247, 1.3831281496162493}, 
                 0.03343507762641268], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"numQuant\"\>", ",", "4"}], ")"}], 
                 Offset[{2, 2}, {0.7249991524345374, 1.416563227242662}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{2.7662562992324986, 1.3831281496162493}, 
                 0.03343507762641268], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"numQuant\"\>", ",", "5"}], ")"}], 
                 Offset[{2, 2}, {2.7996913768589113, 1.416563227242662}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{2.7662562992324986, 0.6915640748081247}, 
                 0.03343507762641268], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"expression\"\>", ",", "6"}], ")"}], 
                 Offset[{2, 2}, {2.7996913768589113, 0.7249991524345374}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{2.074692224424374, 0.}, 0.03343507762641268], 
                InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"techInd\"\>", ",", "\<\"EMA\"\>"}], ")"}], 
                 Offset[{2, 2}, {2.1081273020507867, 0.03343507762641268}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{2.7662562992324986, 0.}, 0.03343507762641268], 
                InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"observable\"\>", ",", "\<\"Low\"\>"}], ")"}], 
                 Offset[{2, 2}, {2.7996913768589113, 0.03343507762641268}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{3.4578203740406233, 0.}, 0.03343507762641268], 
                InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"window\"\>", ",", "\<\"40\"\>"}], ")"}], 
                 Offset[{2, 2}, {3.491255451667036, 0.03343507762641268}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{0.3457820374040623, 0.6915640748081247}, 
                 0.03343507762641268], InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"factor\"\>", ",", "\<\"1.3\"\>"}], ")"}], 
                 Offset[{2, 2}, {0.379217115030475, 0.7249991524345374}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{1.037346112212187, 0.6915640748081247}, 
                 0.03343507762641268], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"expression\"\>", ",", "7"}], ")"}], 
                 Offset[{2, 2}, {1.0707811898385997, 0.7249991524345374}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{0.6915640748081247, 0.}, 0.03343507762641268], 
                InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"lag\"\>", ",", "\<\"2\"\>"}], ")"}], 
                 Offset[{2, 2}, {0.7249991524345374, 0.03343507762641268}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{1.3831281496162493, 0.}, 0.03343507762641268], 
                InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"observable\"\>", ",", "\<\"Open\"\>"}], ")"}], 
                 Offset[{2, 2}, {1.416563227242662, 0.03343507762641268}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}}}],
            MouseAppearanceTag["NetworkGraphics"]],
           AllowKernelInitialization->False]],
         DefaultBaseStyle->{
          "NetworkGraphics", FrontEnd`GraphicsHighlightColor -> 
           Hue[0.8, 1., 0.6]},
         FormatType->TraditionalForm,
         FrameTicks->None], ",", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"1", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"cond\"\>", ",", "3"}], "]"}]}], ",", 
          RowBox[{"2", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"numOp\"\>", ",", "\<\"LessEqual\"\>"}], "]"}]}], ",", 
          RowBox[{"3", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"numQuant\"\>", ",", "4"}], "]"}]}], ",", 
          RowBox[{"4", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"numQuant\"\>", ",", "5"}], "]"}]}], ",", 
          RowBox[{"5", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"expression\"\>", ",", "6"}], "]"}]}], ",", 
          RowBox[{"6", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"techInd\"\>", ",", "\<\"EMA\"\>"}], "]"}]}], ",", 
          RowBox[{"7", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"observable\"\>", ",", "\<\"Low\"\>"}], "]"}]}], ",", 
          
          RowBox[{"8", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"window\"\>", ",", "\<\"40\"\>"}], "]"}]}], ",", 
          RowBox[{"9", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"factor\"\>", ",", "\<\"1.3\"\>"}], "]"}]}], ",", 
          RowBox[{"10", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"expression\"\>", ",", "7"}], "]"}]}], ",", 
          RowBox[{"11", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"lag\"\>", ",", "\<\"2\"\>"}], "]"}]}], ",", 
          RowBox[{"12", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"observable\"\>", ",", "\<\"Open\"\>"}], "]"}]}]}], 
         "}"}]}], "}"}]}], ",", 
     RowBox[{"\<\"Return\"\>", "\[Rule]", "5.324547464048747`"}]}], 
    "\[RightAssociation]"}], ",", 
   RowBox[{"\[LeftAssociation]", 
    RowBox[{
     RowBox[{"\<\"Genome\"\>", "\[Rule]", 
      RowBox[{"{", 
       RowBox[{
        GraphicsBox[
         NamespaceBox["NetworkGraphics",
          DynamicModuleBox[{Typeset`graph = HoldComplete[
            
            Graph[{1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 
             13}, {{{1, 2}, {1, 3}, {1, 4}, {3, 5}, {3, 6}, {4, 7}, {4, 8}, {
              6, 9}, {6, 10}, {8, 11}, {8, 12}, {8, 13}}, Null}, {
             VertexLabels -> {
               6 -> $CellContext`NonTerm["expression", 7], 
                3 -> $CellContext`NonTerm["numQuant", 4], 
                11 -> $CellContext`Term["techInd", "SMA"], 
                5 -> $CellContext`Term["factor", "0.7"], 
                8 -> $CellContext`NonTerm["expression", 6], 
                7 -> $CellContext`Term["factor", "1.3"], 
                10 -> $CellContext`Term["observable", "Close"], 
                9 -> $CellContext`Term["lag", "1"], 
                4 -> $CellContext`NonTerm["numQuant", 4], 
                12 -> $CellContext`Term["observable", "Low"], 
                13 -> $CellContext`Term["window", "10"], 
                2 -> $CellContext`Term["numOp", "Less"], 
                1 -> $CellContext`NonTerm["cond", 3]}}]]}, 
           TagBox[GraphicsGroupBox[{
              {Hue[0.6, 0.7, 0.5], Opacity[0.7], Arrowheads[Medium], 
               ArrowBox[CompressedData["
1:eJxTTMoPSmVmYGDgAWImKK6d8Hhjw/Qv9u7hof55yxgdGKBgy8lCkckd3+3R
5TeDxZ/b45KH8FkcYPLo6iH86/bboOLo8hBzPsLl0c2D2YNLHmIeO1we3TyY
fTB/Ypf/DpfHbh4inNDlYXxc8go2fTe3Z/HC5QHph6ZV
                "], 
                0.034906053126889394`]}, 
              {Hue[0.6, 0.2, 0.8], EdgeForm[{GrayLevel[0], Opacity[
               0.7]}], {
                DiskBox[{1.2869879673753808, 2.2062650869292244}, 
                 0.034906053126889394], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"cond\"\>", ",", "3"}], ")"}], 
                 Offset[{2, 2}, {1.3218940205022702, 2.241171140056114}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{0., 1.4708433912861496}, 0.034906053126889394], 
                InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"numOp\"\>", ",", "\<\"Less\"\>"}], ")"}], 
                 Offset[{2, 2}, {0.034906053126889394, 1.505749444413039}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{0.7354216956430747, 1.4708433912861496}, 
                 0.034906053126889394], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"numQuant\"\>", ",", "4"}], ")"}], 
                 Offset[{2, 2}, {0.7703277487699641, 1.505749444413039}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{2.5739759347507616, 1.4708433912861496}, 
                 0.034906053126889394], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"numQuant\"\>", ",", "4"}], ")"}], 
                 Offset[{2, 2}, {2.608881987877651, 1.505749444413039}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{0.36771084782153735, 0.735421695643075}, 
                 0.034906053126889394], InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"factor\"\>", ",", "\<\"0.7\"\>"}], ")"}], 
                 Offset[{2, 2}, {0.4026169009484267, 0.7703277487699645}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{1.1031325434646122, 0.735421695643075}, 
                 0.034906053126889394], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"expression\"\>", ",", "7"}], ")"}], 
                 Offset[{2, 2}, {1.1380385965915016, 0.7703277487699645}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{2.2062650869292244, 0.735421695643075}, 
                 0.034906053126889394], InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"factor\"\>", ",", "\<\"1.3\"\>"}], ")"}], 
                 Offset[{2, 2}, {2.241171140056114, 0.7703277487699645}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{2.9416867825722988, 0.735421695643075}, 
                 0.034906053126889394], InsetBox[
                 RowBox[{"NonTerm", "(", 
                  RowBox[{"\<\"expression\"\>", ",", "6"}], ")"}], 
                 Offset[{2, 2}, {2.976592835699188, 0.7703277487699645}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{0.7354216956430747, 0.}, 0.034906053126889394], 
                InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"lag\"\>", ",", "\<\"1\"\>"}], ")"}], 
                 Offset[{2, 2}, {0.7703277487699641, 0.034906053126889394}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{1.4708433912861494, 0.}, 0.034906053126889394], 
                InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"observable\"\>", ",", "\<\"Close\"\>"}], ")"}],
                  Offset[{2, 2}, {1.5057494444130388, 0.034906053126889394}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{2.2062650869292244, 0.}, 0.034906053126889394], 
                InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"techInd\"\>", ",", "\<\"SMA\"\>"}], ")"}], 
                 Offset[{2, 2}, {2.241171140056114, 0.034906053126889394}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{2.9416867825722988, 0.}, 0.034906053126889394], 
                InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"observable\"\>", ",", "\<\"Low\"\>"}], ")"}], 
                 Offset[{2, 2}, {2.976592835699188, 0.034906053126889394}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}, {
                DiskBox[{3.6771084782153736, 0.}, 0.034906053126889394], 
                InsetBox[
                 RowBox[{"Term", "(", 
                  RowBox[{"\<\"window\"\>", ",", "\<\"10\"\>"}], ")"}], 
                 Offset[{2, 2}, {3.712014531342263, 0.034906053126889394}], 
                 ImageScaled[{0, 0}],
                 BaseStyle->"Graphics"]}}}],
            MouseAppearanceTag["NetworkGraphics"]],
           AllowKernelInitialization->False]],
         DefaultBaseStyle->{
          "NetworkGraphics", FrontEnd`GraphicsHighlightColor -> 
           Hue[0.8, 1., 0.6]},
         FormatType->TraditionalForm,
         FrameTicks->None], ",", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"1", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"cond\"\>", ",", "3"}], "]"}]}], ",", 
          RowBox[{"2", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"numOp\"\>", ",", "\<\"Less\"\>"}], "]"}]}], ",", 
          RowBox[{"3", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"numQuant\"\>", ",", "4"}], "]"}]}], ",", 
          RowBox[{"4", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"numQuant\"\>", ",", "4"}], "]"}]}], ",", 
          RowBox[{"5", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"factor\"\>", ",", "\<\"0.7\"\>"}], "]"}]}], ",", 
          RowBox[{"6", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"expression\"\>", ",", "7"}], "]"}]}], ",", 
          RowBox[{"7", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"factor\"\>", ",", "\<\"1.3\"\>"}], "]"}]}], ",", 
          RowBox[{"8", "\[Rule]", 
           RowBox[{"NonTerm", "[", 
            RowBox[{"\<\"expression\"\>", ",", "6"}], "]"}]}], ",", 
          RowBox[{"9", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"lag\"\>", ",", "\<\"1\"\>"}], "]"}]}], ",", 
          RowBox[{"10", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"observable\"\>", ",", "\<\"Close\"\>"}], "]"}]}], 
          ",", 
          RowBox[{"11", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"techInd\"\>", ",", "\<\"SMA\"\>"}], "]"}]}], ",", 
          RowBox[{"12", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"observable\"\>", ",", "\<\"Low\"\>"}], "]"}]}], ",", 
          
          RowBox[{"13", "\[Rule]", 
           RowBox[{"Term", "[", 
            RowBox[{"\<\"window\"\>", ",", "\<\"10\"\>"}], "]"}]}]}], "}"}]}],
        "}"}]}], ",", 
     RowBox[{"\<\"Return\"\>", "\[Rule]", 
      RowBox[{"-", "5.3295474744654525`"}]}]}], "\[RightAssociation]"}]}], 
  "}"}]], "Output",
 CellChangeTimes->{
  3.790630532168192*^9, {3.7906307185862703`*^9, 3.790630724264604*^9}},
 CellLabel->
  "Out[357]=",ExpressionUUID->"ae9eaff6-d49a-4a28-92c2-f4dcf6e0481b"]
}, Open  ]]
}, Closed]],

Cell[CellGroupData[{

Cell["Main algorithm", "Section",
 CellChangeTimes->{{3.790470132244419*^9, 
  3.790470134476201*^9}},ExpressionUUID->"021b0e13-2bbb-4b09-8d76-\
618b4b133104"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"Generation", "[", 
    RowBox[{
    "population_", ",", "survivors_", ",", "mutationProb_", ",", "elitism_", 
     ",", "trainingDates_", ",", "transactionCost_", ",", "bloatControl_"}], 
    "]"}], ":=", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "evaluated", ",", "fittest", ",", "newGeneration", ",", "mutated", ",", 
       "childrenPerCouple", ",", "elite"}], "}"}], ",", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"fittest", " ", "=", " ", 
       RowBox[{"ProportionateRankedSelection", "[", 
        RowBox[{"population", ",", "survivors"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"childrenPerCouple", " ", "=", " ", 
       FractionBox[
        RowBox[{"2", " ", 
         RowBox[{"Length", "[", "population", "]"}]}], "survivors"]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"newGeneration", " ", "=", " ", 
       RowBox[{"PopulationCrossover", "[", 
        RowBox[{
         RowBox[{"fittest", "[", 
          RowBox[{"[", 
           RowBox[{"All", ",", "\"\<Genome\>\""}], "]"}], "]"}], ",", 
         "childrenPerCouple"}], "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"mutated", " ", "=", " ", 
       RowBox[{"PopulationMutate", "[", 
        RowBox[{"newGeneration", ",", "mutationProb", ",", "terminalSet"}], 
        "]"}]}], ";", "\[IndentingNewLine]", 
      RowBox[{"evaluated", " ", "=", " ", 
       RowBox[{"SortBy", "[", 
        RowBox[{
         RowBox[{"EvaluatePopulation", "[", 
          RowBox[{
          "mutated", ",", "trainingDates", ",", "0.0025", ",", 
           "bloatControl"}], "]"}], ",", 
         RowBox[{"Key", "[", "\"\<Score\>\"", "]"}]}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"elite", " ", "=", " ", 
       RowBox[{"Take", "[", 
        RowBox[{
         RowBox[{"Reverse", "@", 
          RowBox[{"SortBy", "[", 
           RowBox[{"population", ",", 
            RowBox[{"Key", "[", "\"\<Score\>\"", "]"}]}], "]"}]}], ",", 
         "elitism"}], "]"}]}], ";", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{"Reverse", "@", 
       RowBox[{"SortBy", "[", 
        RowBox[{
         RowBox[{"Join", "[", 
          RowBox[{"elite", ",", 
           RowBox[{"Drop", "[", 
            RowBox[{"evaluated", ",", "elitism"}], "]"}]}], "]"}], ",", 
         RowBox[{"Key", "[", "\"\<Score\>\"", "]"}]}], "]"}]}]}]}], 
    "\[IndentingNewLine]", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"EvolvePopulation", "[", 
    RowBox[{
    "population_", ",", "survivors_", ",", "mutationProb_", ",", "elitism_", 
     ",", "trainingDates_", ",", "transactionCost_", ",", "bloatControl_", 
     ",", "generations_"}], "]"}], ":=", "\[IndentingNewLine]", 
   RowBox[{"ProgressNestList", "[", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{
      RowBox[{"Generation", "[", 
       RowBox[{
       "#", ",", "survivors", ",", "mutationProb", ",", "elitism", ",", 
        "trainingDates", ",", "transactionCost", ",", "bloatControl"}], "]"}],
       "&"}], ",", "\[IndentingNewLine]", "population", ",", "generations", 
     ",", "\[IndentingNewLine]", 
     RowBox[{"\"\<Label\>\"", "\[Rule]", "\"\<Generation\>\""}]}], 
    "\[IndentingNewLine]", "]"}]}], ";"}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->{{3.7906302653332*^9, 3.790630287980571*^9}, {
  3.790630684842208*^9, 3.790630708209437*^9}, {3.790630750362063*^9, 
  3.7906307516017942`*^9}, {3.7906361351966047`*^9, 3.790636142152199*^9}, {
  3.790636188824139*^9, 3.7906362180638943`*^9}, {3.790800098533895*^9, 
  3.7908000985394773`*^9}, {3.790800367869225*^9, 3.7908003846146383`*^9}},
 CellLabel->"In[58]:=",ExpressionUUID->"ee04ca27-df27-4792-8426-4156493d5a0c"],

Cell[BoxData[
 RowBox[{
  RowBox[{"population", " ", "=", " ", 
   RowBox[{"GenerateInitialPopulation", "[", 
    RowBox[{
    "200", ",", "100", ",", "trainingDates", ",", "0.0025", ",", "0.005"}], 
    "]"}]}], ";"}]], "Input",
 CellChangeTimes->{
  3.790630803798911*^9, {3.790632104969265*^9, 3.7906321055819187`*^9}, 
   3.790636974506274*^9, {3.790637025729435*^9, 3.790637025806122*^9}, {
   3.790637232783042*^9, 3.790637233098884*^9}, {3.7906378178138533`*^9, 
   3.7906378179922733`*^9}, 3.790638039684031*^9, {3.790639333096068*^9, 
   3.790639360821355*^9}, {3.790800392204193*^9, 3.7908003924349318`*^9}, 
   3.790801195438675*^9, {3.790801534757194*^9, 3.790801544977735*^9}},
 CellLabel->
  "In[140]:=",ExpressionUUID->"3023c9d4-5084-4a29-954b-44cee577437b"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"evolved", " ", "=", " ", 
   RowBox[{"EvolvePopulation", "[", 
    RowBox[{
    "population", ",", "50", ",", "0.5", ",", "2", ",", "trainingDates", ",", 
     "0.0025", ",", "0.005", ",", "30"}], "]"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.7906393560424232`*^9, 3.790639364229409*^9}, {
   3.790639909012381*^9, 3.790639909130987*^9}, {3.79068949362009*^9, 
   3.790689493949458*^9}, {3.790689549527102*^9, 3.790689553844131*^9}, {
   3.790689623503652*^9, 3.790689626142321*^9}, {3.790778371846219*^9, 
   3.790778372010107*^9}, {3.790784314285063*^9, 3.7907843377110243`*^9}, {
   3.790785017725141*^9, 3.790785041013948*^9}, {3.790785443145664*^9, 
   3.7907854432823267`*^9}, {3.790797491971438*^9, 3.7907974920490093`*^9}, {
   3.79079904621716*^9, 3.790799046280437*^9}, {3.79079908531497*^9, 
   3.790799085407794*^9}, {3.790800425902978*^9, 3.7908004320677977`*^9}, 
   3.7908011939940042`*^9, {3.790801280308297*^9, 3.790801280419606*^9}, 
   3.7908015388914547`*^9},
 CellLabel->
  "In[141]:=",ExpressionUUID->"21ce7511-69fc-41d4-80be-4aaa76c7aa2e"],

Cell[BoxData["$Aborted"], "Output",
 CellChangeTimes->{3.790801588025424*^9},
 CellLabel->
  "Out[141]=",ExpressionUUID->"41b1f24b-e043-4ae5-b31d-9c22619ea175"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"best", " ", "=", " ", 
   RowBox[{"First", "[", 
    RowBox[{"evolved", "[", 
     RowBox[{"[", 
      RowBox[{"-", "1"}], "]"}], "]"}], "]"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.790637628048027*^9, 3.790637635270234*^9}, {
   3.79063978135037*^9, 3.790639781833729*^9}, 3.790785113400729*^9, {
   3.7907851861379843`*^9, 3.790785202097587*^9}, {3.790799936637137*^9, 
   3.790799937152008*^9}, {3.7908011593401203`*^9, 3.7908011600535297`*^9}},
 CellLabel->
  "In[131]:=",ExpressionUUID->"671d8b46-0711-49f4-8d39-8a16ac3db8d8"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"FullForm", "@", 
  RowBox[{"SynthesizeTree", "[", 
   RowBox[{
    RowBox[{"First", "[", 
     RowBox[{"best", "[", "\"\<Genome\>\"", "]"}], "]"}], ",", 
    RowBox[{"Last", "[", 
     RowBox[{"best", "[", "\"\<Genome\>\"", "]"}], "]"}], ",", "grammar"}], 
   "]"}]}]], "Input",
 CellChangeTimes->{{3.790637457886895*^9, 3.7906374735922737`*^9}, {
  3.7906375388706627`*^9, 3.79063754063867*^9}, {3.790637647324058*^9, 
  3.7906376489009438`*^9}, {3.7906896497768803`*^9, 3.790689651729837*^9}},
 CellLabel->
  "In[134]:=",ExpressionUUID->"2ca8213c-5b4c-4696-b6ee-cf81b045f2cf"],

Cell[BoxData[
 TagBox[
  StyleBox[
   RowBox[{"Greater", "[", 
    RowBox[{"\"\<Open\>\"", ",", "\"\<Open\>\""}], "]"}],
   ShowSpecialCharacters->False,
   ShowStringCharacters->True,
   NumberMarks->True],
  FullForm]], "Output",
 CellChangeTimes->{
  3.79063754110843*^9, 3.7906376509221973`*^9, 3.790689478949759*^9, {
   3.790689647462811*^9, 3.79068965200389*^9}, 3.7907784705708933`*^9, 
   3.790784323265704*^9, 3.790784413824123*^9, 3.790785037154229*^9, 
   3.790785114888838*^9, {3.790785187645151*^9, 3.7907852048472424`*^9}, 
   3.790797477322027*^9, 3.790797577192751*^9, 3.7907990645617323`*^9, {
   3.7907999125735407`*^9, 3.790799938492895*^9}, 3.790801167336289*^9, {
   3.790801301419454*^9, 3.790801339126768*^9}},
 CellLabel->
  "Out[134]//FullForm=",ExpressionUUID->"6d042d85-a9e3-433b-a0e9-\
64bbd9276d43"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"evaluatedOnValidation", " ", "=", " ", 
   RowBox[{"ProgressTable", "[", 
    RowBox[{
     RowBox[{"Reverse", "@", 
      RowBox[{"SortBy", "[", 
       RowBox[{
        RowBox[{"EvaluatePopulation", "[", 
         RowBox[{
          RowBox[{
           RowBox[{"evolved", "[", 
            RowBox[{"[", "i", "]"}], "]"}], "[", 
           RowBox[{"[", 
            RowBox[{"All", ",", "\"\<Genome\>\""}], "]"}], "]"}], ",", 
          "validationDates", ",", "0.0025"}], "]"}], ",", 
        RowBox[{"Key", "[", "\"\<Score\>\"", "]"}]}], "]"}]}], ",", 
     RowBox[{"{", 
      RowBox[{"i", ",", "1", ",", 
       RowBox[{"Length", "[", "evolved", "]"}]}], "}"}]}], "]"}]}], 
  ";"}]], "Input",
 CellChangeTimes->{{3.790689691037037*^9, 3.790689849290127*^9}, {
   3.790799946375887*^9, 3.790799965839573*^9}, 3.7908000985442057`*^9, {
   3.7908012942928047`*^9, 3.79080129637271*^9}},
 CellLabel->
  "In[136]:=",ExpressionUUID->"1d6004eb-75f5-44eb-8b36-8639e1a8f02e"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{"trainingScoreVsIter", " ", "=", " ", 
   RowBox[{"Table", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"k", ",", 
       RowBox[{"Mean", "[", 
        RowBox[{
         RowBox[{"evolved", "[", 
          RowBox[{"[", "k", "]"}], "]"}], "[", 
         RowBox[{"[", 
          RowBox[{"All", ",", "\"\<Score\>\""}], "]"}], "]"}], "]"}]}], "}"}],
      ",", 
     RowBox[{"{", 
      RowBox[{"k", ",", "1", ",", 
       RowBox[{"Length", "[", "evolved", "]"}]}], "}"}]}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"validationScoreVsIter", " ", "=", " ", 
    RowBox[{"Table", "[", 
     RowBox[{
      RowBox[{"{", 
       RowBox[{"k", ",", 
        RowBox[{"Mean", "[", 
         RowBox[{
          RowBox[{"evaluatedOnValidation", "[", 
           RowBox[{"[", "k", "]"}], "]"}], "[", 
          RowBox[{"[", 
           RowBox[{"All", ",", "\"\<Score\>\""}], "]"}], "]"}], "]"}]}], 
       "}"}], ",", 
      RowBox[{"{", 
       RowBox[{"k", ",", "1", ",", 
        RowBox[{"Length", "[", "evaluatedOnValidation", "]"}]}], "}"}]}], 
     "]"}]}], ";"}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{"ListLinePlot", "[", "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"{", 
    RowBox[{"trainingScoreVsIter", ",", "validationScoreVsIter"}], "}"}], ",",
    "\[IndentingNewLine]", 
   RowBox[{"PlotTheme", "\[Rule]", "\"\<Monochrome\>\""}], ",", 
   "\[IndentingNewLine]", 
   RowBox[{"FrameLabel", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{
      RowBox[{"Style", "[", 
       RowBox[{"\"\<k\>\"", ",", "15"}], "]"}], ",", " ", 
      RowBox[{"Style", "[", 
       RowBox[{"\"\<Average Score\>\"", ",", "15"}], "]"}]}], "}"}]}], ",", 
   " ", "\[IndentingNewLine]", 
   RowBox[{"BaseStyle", "\[Rule]", 
    RowBox[{"FontSize", "\[Rule]", "13"}]}], ",", "\[IndentingNewLine]", 
   RowBox[{"PlotRangePadding", "\[Rule]", "Automatic"}], ",", 
   "\[IndentingNewLine]", 
   RowBox[{"GridLines", "\[Rule]", "Automatic"}], ",", "\[IndentingNewLine]", 
   
   RowBox[{"Joined", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{"True", ",", "True"}], "}"}]}], ",", "\[IndentingNewLine]", 
   RowBox[{"PlotStyle", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{
      InterpretationBox[
       ButtonBox[
        TooltipBox[
         GraphicsBox[{
           {GrayLevel[0], RectangleBox[{0, 0}]}, 
           {GrayLevel[0], RectangleBox[{1, -1}]}, 
           {RGBColor[0.689993, 0.089999, 0.119999], 
            RectangleBox[{0, -1}, {2, 1}]}},
          AspectRatio->1,
          DefaultBaseStyle->"ColorSwatchGraphics",
          Frame->True,
          
          FrameStyle->RGBColor[
           0.4599953333333333, 0.059999333333333335`, 0.07999933333333334],
          FrameTicks->None,
          
          ImageSize->
           Dynamic[{
            Automatic, 
             1.35 (CurrentValue["FontCapHeight"]/AbsoluteCurrentValue[
              Magnification])}],
          PlotRangePadding->None],
         StyleBox[
          RowBox[{"RGBColor", "[", 
            RowBox[{"0.689993`", ",", "0.089999`", ",", "0.119999`"}], "]"}], 
          NumberMarks -> False]],
        Appearance->None,
        BaseStyle->{},
        BaselinePosition->Baseline,
        ButtonFunction:>With[{Typeset`box$ = EvaluationBox[]}, 
          If[
           Not[
            AbsoluteCurrentValue["Deployed"]], 
           SelectionMove[Typeset`box$, All, Expression]; 
           FrontEnd`Private`$ColorSelectorInitialAlpha = 1; 
           FrontEnd`Private`$ColorSelectorInitialColor = 
            RGBColor[0.689993, 0.089999, 0.119999]; 
           FrontEnd`Private`$ColorSelectorUseMakeBoxes = True; 
           MathLink`CallFrontEnd[
             FrontEnd`AttachCell[Typeset`box$, 
              FrontEndResource["RGBColorValueSelector"], {
              0, {Left, Bottom}}, {Left, Top}, 
              "ClosingActions" -> {
               "SelectionDeparture", "ParentChanged", "EvaluatorQuit"}]]]],
        DefaultBaseStyle->{},
        Evaluator->Automatic,
        Method->"Preemptive"],
       RGBColor[0.689993, 0.089999, 0.119999],
       Editable->False,
       Selectable->False], ",", 
      InterpretationBox[
       ButtonBox[
        TooltipBox[
         GraphicsBox[{
           {GrayLevel[0], RectangleBox[{0, 0}]}, 
           {GrayLevel[0], RectangleBox[{1, -1}]}, 
           {RGBColor[0.09, 0.3, 0.], RectangleBox[{0, -1}, {2, 1}]}},
          AspectRatio->1,
          DefaultBaseStyle->"ColorSwatchGraphics",
          Frame->True,
          FrameStyle->RGBColor[0.06, 0.2, 0.],
          FrameTicks->None,
          
          ImageSize->
           Dynamic[{
            Automatic, 
             1.35 (CurrentValue["FontCapHeight"]/AbsoluteCurrentValue[
              Magnification])}],
          PlotRangePadding->None],
         StyleBox[
          RowBox[{"RGBColor", "[", 
            RowBox[{"0.09`", ",", "0.3`", ",", "0.`"}], "]"}], NumberMarks -> 
          False]],
        Appearance->None,
        BaseStyle->{},
        BaselinePosition->Baseline,
        ButtonFunction:>With[{Typeset`box$ = EvaluationBox[]}, 
          If[
           Not[
            AbsoluteCurrentValue["Deployed"]], 
           SelectionMove[Typeset`box$, All, Expression]; 
           FrontEnd`Private`$ColorSelectorInitialAlpha = 1; 
           FrontEnd`Private`$ColorSelectorInitialColor = 
            RGBColor[0.09, 0.3, 0.]; 
           FrontEnd`Private`$ColorSelectorUseMakeBoxes = True; 
           MathLink`CallFrontEnd[
             FrontEnd`AttachCell[Typeset`box$, 
              FrontEndResource["RGBColorValueSelector"], {
              0, {Left, Bottom}}, {Left, Top}, 
              "ClosingActions" -> {
               "SelectionDeparture", "ParentChanged", "EvaluatorQuit"}]]]],
        DefaultBaseStyle->{},
        Evaluator->Automatic,
        Method->"Preemptive"],
       RGBColor[0.09, 0.3, 0.],
       Editable->False,
       Selectable->False]}], "}"}]}], ",", "\[IndentingNewLine]", 
   RowBox[{"Frame", "\[Rule]", "True"}], ",", "\[IndentingNewLine]", 
   RowBox[{"ImageSize", "\[Rule]", "500"}], ",", "\[IndentingNewLine]", 
   RowBox[{"PlotLegends", "\[Rule]", 
    RowBox[{"{", 
     RowBox[{"\"\<Training set\>\"", ",", "\"\<Validation set\>\""}], 
     "}"}]}]}], "\[IndentingNewLine]", "]"}]}], "Input",
 CellChangeTimes->{{3.790637370649713*^9, 3.7906373922451077`*^9}, {
   3.790639918052516*^9, 3.7906399184756927`*^9}, {3.79068987140318*^9, 
   3.790689947106833*^9}, {3.790797637589457*^9, 3.790797648037363*^9}, {
   3.790799947937199*^9, 3.790799948025762*^9}, {3.7908000985538883`*^9, 
   3.7908000985585546`*^9}, 3.7908013057175217`*^9},
 CellLabel->
  "In[137]:=",ExpressionUUID->"edcdb7a1-7063-45bf-8b32-354bf19f3c96"],

Cell[BoxData[
 TemplateBox[{GraphicsBox[{{}, {{{}, {}, {
        Hue[0.67, 0.6, 0.6], 
        Directive[
         PointSize[
          NCache[
           Rational[1, 60], 0.016666666666666666`]], 
         CapForm["Butt"], 
         AbsoluteThickness[1.6], 
         AbsoluteDashing[{}], FontSize -> 13, 
         RGBColor[0.689993, 0.089999, 0.119999]], 
        LineBox[CompressedData["
1:eJxTTMoPSmViYGCQB2IQDQEf7PkFLoW78LMdgAo47P7yZaFq/vv9EC6HQ9nx
o/ubHryG8gUcHvIF7p236weUL+JQeEnkm3TWVyhfwsFfuLX39KE3UL6MQ+uk
3V2JMi+hfAWHzcuOui96cQLKV3J4prOk/JLDaShfxUGC88qJ2Av3oHw1hyOv
Dpl92fQZytdw4FjZfE3n3CMoX8tBfvMut6N8l6F8HYdltVdMBMweQvl6Dgzu
DzsWbLoC5Rs49G9NKNdadxfKN3SQWpO6IdrsKZRv5OCctWZv5sQvUL6xQ1LU
jl21x2D2mzgseaxVFFT0C8o3dWitF13+NRYWXmYOLRdj62pmwMLH3OHmE7cI
xjCYfguHPetuL89b8BzKt3TwVfbTkZSAhZ+Vw50tzxfN1oDpt3Y4uvyEgNLJ
n1C+jUPHVZlH6+R+Q/m2Du/VrGeyTnoF5ds5nOex0tj8+SOUb+/w6sD3Nc3V
X/cDAJvhog4=
         "]]}, {
        Hue[0.9060679774997897, 0.6, 0.6], 
        Directive[
         PointSize[
          NCache[
           Rational[1, 60], 0.016666666666666666`]], 
         CapForm["Butt"], 
         AbsoluteThickness[1.6], 
         AbsoluteDashing[{6, 2}], FontSize -> 13, 
         RGBColor[0.09, 0.3, 0.]], 
        LineBox[CompressedData["
1:eJxTTMoPSmViYGCQB2IQDQEf7BkYtu3oUmE4ABVw2Pja2bhF9Mt+CJfDoZqh
+K3UnZdQvoDDLZ30Bw2XYPIiDmKrRY1kA2B8CQe/IqYQoc+PoHwZhwhlHoZJ
Vh+hfAWHZdZqN2p1rkL5Sg4x0hs0TP0vQfkqDvL8Zl8ad96F8tUcDMVWd28Q
egrlazjE8yarzun6AOVrObDc2G1488QtKF/H4bHx7oeutx5C+XoOtTfmz1lj
dBzKN3Aoe1ZiLakLc5+hw/YbqjcutMLsM3JYwrF/tefTT1C+scMty7LtfjLv
oXwTB4stJsLm179D+aYO8Zt+nF+y8QeUb+ZwrO/BzmJ9WHiYOyhPuVdhyg8z
z8LhbpxhNYcILDwsHZ5ULFq4dQlM3sqBb/02XX5umPnWDi+yl9g/loHJ2zic
/eG77O5WmPm2Dkufu6RNdoDx7RxOyut9knF4DOXbO5yxWisqXvp1PwBq4JeN

         "]]}}, {{
        Directive[
         PointSize[
          NCache[
           Rational[1, 60], 0.016666666666666666`]], 
         CapForm["Butt"], 
         AbsoluteThickness[1.6], 
         AbsoluteDashing[{}], FontSize -> 13, 
         RGBColor[0.689993, 0.089999, 0.119999]], 
        GeometricTransformationBox[
         InsetBox[
          BoxData[
           FormBox[
            StyleBox[
             GraphicsBox[{
               DiskBox[{0, 0}, 
                Offset[{2.75, 2.75}]]}], 
             GraphicsBoxOptions -> {DefaultBaseStyle -> Directive[
                 PointSize[
                  Rational[1, 60]], 
                 CapForm["Butt"], 
                 AbsoluteThickness[1.6], 
                 AbsoluteDashing[{}], FontSize -> 13, 
                 RGBColor[0.689993, 0.089999, 0.119999]]}, StripOnInput -> 
             False], TraditionalForm]], {0., 0.}], CompressedData["
1:eJxTTMoPSmVmYGCQB2JGIGZigIEP9vwCl8Jd+NkOQAUcdn/5slA1//1+CJfD
oez40f1ND15D+QIOD/kC987b9QPKF3EovCTyTTrrK5Qv4eAv3Np7+tAbKF/G
oXXS7q5EmZdQvoLD5mVH3Re9OAHlKzk801lSfsnhNJSv4iDBeeVE7IV7UL6a
w5FXh8y+bPoM5Ws4cKxsvqZz7hGUr+Ugv3mX21G+y1C+jsOy2ismAmYPoXw9
Bwb3hx0LNl2B8g0c+rcmlGutuwvlGzpIrUndEG32FMo3cnDOWrM3c+IXKN/Y
ISlqx67aYzD7TRyWPNYqCir6BeWbOrTWiy7/GgsLLzOHlouxdTUzYOFj7nDz
iVsEYxhMv4XDnnW3l+cteA7lWzr4KvvpSErAws/K4c6W54tma8D0WzscXX5C
QOnkTyjfxqHjqsyjdXK/oXxbh/dq1jNZJ72C8u0czvNYaWz+/BHKt3d4deD7
mubqr/sBpwWiEA==
         "]]}, {
        Directive[
         PointSize[
          NCache[
           Rational[1, 60], 0.016666666666666666`]], 
         CapForm["Butt"], 
         AbsoluteThickness[1.6], 
         AbsoluteDashing[{6, 2}], FontSize -> 13, 
         RGBColor[0.09, 0.3, 0.]], 
        GeometricTransformationBox[
         InsetBox[
          BoxData[
           FormBox[
            StyleBox[
             GraphicsBox[{{
                GrayLevel[1], 
                PolygonBox[{
                  Offset[{0., 2.975}], 
                  Offset[{-2.5764255762587047`, -1.4875}], 
                  Offset[{2.5764255762587047`, -1.4875}]}]}, 
               AbsoluteThickness[1], 
               Dashing[{}], 
               JoinedCurveBox[
                Line[{
                  Offset[{0., 2.975}], 
                  Offset[{-2.5764255762587047`, -1.4875}], 
                  Offset[{2.5764255762587047`, -1.4875}], 
                  Offset[{0., 2.975}]}], CurveClosed -> True]}], 
             GraphicsBoxOptions -> {DefaultBaseStyle -> Directive[
                 PointSize[
                  Rational[1, 60]], 
                 CapForm["Butt"], 
                 AbsoluteThickness[1.6], 
                 AbsoluteDashing[{6, 2}], FontSize -> 13, 
                 RGBColor[0.09, 0.3, 0.]]}, StripOnInput -> False], 
            TraditionalForm]], {0., 0.}], CompressedData["
1:eJxTTMoPSmVmYGCQB2JGIGZigIEP9gwM23Z0qTAcgAo4bHztbNwi+mU/hMvh
UM1Q/FbqzksoX8Dhlk76g4ZLMHkRB7HVokayATC+hINfEVOI0OdHUL6MQ4Qy
D8Mkq49QvoLDMmu1G7U6V6F8JYcY6Q0apv6XoHwVB3l+sy+NO+9C+WoOhmKr
uzcIPYXyNRzieZNV53R9gPK1HFhu7Da8eeIWlK/j8Nh490PXWw+hfD2H2hvz
56wxOg7lGziUPSuxltSFuc/QYfsN1RsXWmH2GTks4di/2vPpJyjf2OGWZdl2
P5n3UL6Jg8UWE2Hz69+hfFOH+E0/zi/Z+APKN3M41vdgZ7E+LDzMHZSn3Ksw
5YeZZ+FwN86wmkMEFh6WDk8qFi3cugQmb+XAt36bLj83zHxrhxfZS+wfy8Dk
bRzO/vBddncrzHxbh6XPXdImO8D4dg4n5fU+yTg8hvLtHc5YrRUVL/26HwB2
BJeP
         "]]}}, {{
        Directive[
         PointSize[
          NCache[
           Rational[1, 60], 0.016666666666666666`]], 
         CapForm["Butt"], 
         AbsoluteThickness[1.6], 
         AbsoluteDashing[{}], FontSize -> 13, 
         RGBColor[0.689993, 0.089999, 0.119999]]}, {
        Directive[
         PointSize[
          NCache[
           Rational[1, 60], 0.016666666666666666`]], 
         CapForm["Butt"], 
         AbsoluteThickness[1.6], 
         AbsoluteDashing[{6, 2}], FontSize -> 13, 
         RGBColor[0.09, 0.3, 0.]]}, {}, {}, {}}, {{
        Directive[
         PointSize[
          NCache[
           Rational[1, 60], 0.016666666666666666`]], 
         CapForm["Butt"], 
         AbsoluteThickness[1.6], 
         AbsoluteDashing[{}], FontSize -> 13, 
         RGBColor[0.689993, 0.089999, 0.119999]]}, {
        Directive[
         PointSize[
          NCache[
           Rational[1, 60], 0.016666666666666666`]], 
         CapForm["Butt"], 
         AbsoluteThickness[1.6], 
         AbsoluteDashing[{6, 2}], FontSize -> 13, 
         RGBColor[0.09, 0.3, 0.]]}, {}, {}, {}}}, {{}, {}}}, {
    DisplayFunction -> Identity, DisplayFunction -> Identity, AspectRatio -> 
     NCache[GoldenRatio^(-1), 0.6180339887498948], Axes -> {True, True}, 
     AxesLabel -> {None, None}, AxesOrigin -> {0, 0}, AxesStyle -> 
     GrayLevel[0], BaseStyle -> (FontSize -> 13), DisplayFunction :> Identity,
      Frame -> {{True, True}, {True, True}}, FrameLabel -> {{
        FormBox[
         StyleBox["\"Average Score\"", 15, StripOnInput -> False], 
         TraditionalForm], None}, {
        FormBox[
         StyleBox["\"k\"", 15, StripOnInput -> False], TraditionalForm], 
        None}}, FrameStyle -> GrayLevel[0], 
     FrameTicks -> {{Automatic, Automatic}, {Automatic, Automatic}}, 
     FrameTicksStyle -> GrayLevel[0], GridLines -> {Automatic, Automatic}, 
     GridLinesStyle -> Directive[
       GrayLevel[0], 
       AbsoluteThickness[1], 
       AbsoluteDashing[{1, 2}]], ImageSize -> 500, 
     LabelStyle -> {FontFamily -> "Helvetica", 
       GrayLevel[0]}, 
     Method -> {
      "OptimizePlotMarkers" -> True, 
       "CoordinatesToolOptions" -> {"DisplayFunction" -> ({
           (Identity[#]& )[
            Part[#, 1]], 
           (Identity[#]& )[
            Part[#, 2]]}& ), "CopiedValueFunction" -> ({
           (Identity[#]& )[
            Part[#, 1]], 
           (Identity[#]& )[
            Part[#, 2]]}& )}}, 
     PlotRange -> {{0, 31.}, {-2.7574545727711732`, 0}}, PlotRangeClipping -> 
     True, PlotRangePadding -> {{
        Scaled[0.02], 
        Scaled[0.02]}, {
        Scaled[0.05], 
        Scaled[0.02]}}, Ticks -> {Automatic, Automatic}, TicksStyle -> 
     GrayLevel[0]}],FormBox[
    FormBox[
     TemplateBox[{"\"Training set\"", "\"Validation set\""}, "LineLegend", 
      DisplayFunction -> (FormBox[
        StyleBox[
         StyleBox[
          PaneBox[
           TagBox[
            GridBox[{{
               TagBox[
                GridBox[{{
                   GraphicsBox[{{
                    Directive[
                    EdgeForm[
                    Directive[
                    Opacity[0.3], 
                    GrayLevel[0]]], 
                    PointSize[0.5], 
                    CapForm["Butt"], 
                    AbsoluteThickness[1.6], 
                    AbsoluteDashing[{}], FontSize -> 13, 
                    RGBColor[0.689993, 0.089999, 0.119999]], {
                    LineBox[{{0, 10}, {40, 10}}]}}, {
                    Directive[
                    EdgeForm[
                    Directive[
                    Opacity[0.3], 
                    GrayLevel[0]]], 
                    PointSize[0.5], 
                    CapForm["Butt"], 
                    AbsoluteThickness[1.6], 
                    AbsoluteDashing[{}], FontSize -> 13, 
                    RGBColor[0.689993, 0.089999, 0.119999]], {
                    InsetBox[
                    GraphicsBox[{
                    DiskBox[{0, 0}, 
                    Offset[{2.75, 2.75}]]}, {DefaultBaseStyle -> {"Graphics", {
                    AbsolutePointSize[6]}, 
                    Directive[
                    EdgeForm[
                    Directive[
                    Opacity[0.3], 
                    GrayLevel[0]]], 
                    PointSize[0.5], 
                    CapForm["Butt"], 
                    AbsoluteThickness[1.6], 
                    AbsoluteDashing[{}], FontSize -> 13, 
                    RGBColor[0.689993, 0.089999, 0.119999]]}}], 
                    NCache[
                    Scaled[{
                    Rational[1, 2], 
                    Rational[1, 2]}], 
                    Scaled[{0.5, 0.5}]], Automatic, 
                    Scaled[1]]}}}, AspectRatio -> Full, ImageSize -> {40, 10},
                     PlotRangePadding -> None, ImagePadding -> Automatic, 
                    BaselinePosition -> (Scaled[0.1] -> Baseline)], #}, {
                   GraphicsBox[{{
                    Directive[
                    EdgeForm[
                    Directive[
                    Opacity[0.3], 
                    GrayLevel[0]]], 
                    PointSize[0.5], 
                    CapForm["Butt"], 
                    AbsoluteThickness[1.6], 
                    AbsoluteDashing[{6, 2}], FontSize -> 13, 
                    RGBColor[0.09, 0.3, 0.]], {
                    LineBox[{{0, 10}, {40, 10}}]}}, {
                    Directive[
                    EdgeForm[
                    Directive[
                    Opacity[0.3], 
                    GrayLevel[0]]], 
                    PointSize[0.5], 
                    CapForm["Butt"], 
                    AbsoluteThickness[1.6], 
                    AbsoluteDashing[{6, 2}], FontSize -> 13, 
                    RGBColor[0.09, 0.3, 0.]], {
                    InsetBox[
                    GraphicsBox[{{
                    GrayLevel[1], 
                    PolygonBox[{
                    Offset[{0., 2.975}], 
                    Offset[{-2.5764255762587047`, -1.4875}], 
                    Offset[{2.5764255762587047`, -1.4875}]}]}, 
                    AbsoluteThickness[1], 
                    Dashing[{}], 
                    JoinedCurveBox[
                    Line[{
                    Offset[{0., 2.975}], 
                    Offset[{-2.5764255762587047`, -1.4875}], 
                    Offset[{2.5764255762587047`, -1.4875}], 
                    Offset[{0., 2.975}]}], CurveClosed -> True]}, {
                    DefaultBaseStyle -> {"Graphics", {
                    AbsolutePointSize[6]}, 
                    Directive[
                    EdgeForm[
                    Directive[
                    Opacity[0.3], 
                    GrayLevel[0]]], 
                    PointSize[0.5], 
                    CapForm["Butt"], 
                    AbsoluteThickness[1.6], 
                    AbsoluteDashing[{6, 2}], FontSize -> 13, 
                    RGBColor[0.09, 0.3, 0.]]}}], 
                    NCache[
                    Scaled[{
                    Rational[1, 2], 
                    Rational[1, 2]}], 
                    Scaled[{0.5, 0.5}]], Automatic, 
                    Scaled[1]]}}}, AspectRatio -> Full, ImageSize -> {40, 10},
                     PlotRangePadding -> None, ImagePadding -> Automatic, 
                    BaselinePosition -> (Scaled[0.1] -> Baseline)], #2}}, 
                 GridBoxAlignment -> {
                  "Columns" -> {Center, Left}, "Rows" -> {{Baseline}}}, 
                 AutoDelete -> False, 
                 GridBoxDividers -> {
                  "Columns" -> {{False}}, "Rows" -> {{False}}}, 
                 GridBoxItemSize -> {"Columns" -> {{All}}, "Rows" -> {{All}}},
                  GridBoxSpacings -> {
                  "Columns" -> {{0.5}}, "Rows" -> {{0.8}}}], "Grid"]}}, 
             GridBoxAlignment -> {"Columns" -> {{Left}}, "Rows" -> {{Top}}}, 
             AutoDelete -> False, 
             GridBoxItemSize -> {
              "Columns" -> {{Automatic}}, "Rows" -> {{Automatic}}}, 
             GridBoxSpacings -> {"Columns" -> {{1}}, "Rows" -> {{0}}}], 
            "Grid"], Alignment -> Left, AppearanceElements -> None, 
           ImageMargins -> {{5, 5}, {5, 5}}, ImageSizeAction -> 
           "ResizeToFit"], LineIndent -> 0, StripOnInput -> False], {
         FontFamily -> "Helvetica", 
          GrayLevel[0]}, Background -> Automatic, StripOnInput -> False], 
        TraditionalForm]& ), 
      InterpretationFunction :> (RowBox[{"LineLegend", "[", 
         RowBox[{
           RowBox[{"{", 
             RowBox[{
               RowBox[{"Directive", "[", 
                 RowBox[{
                   RowBox[{"PointSize", "[", 
                    FractionBox["1", "60"], "]"}], ",", 
                   RowBox[{"CapForm", "[", "\"Butt\"", "]"}], ",", 
                   RowBox[{"AbsoluteThickness", "[", "1.6`", "]"}], ",", 
                   RowBox[{"AbsoluteDashing", "[", 
                    RowBox[{"{", "}"}], "]"}], ",", 
                   RowBox[{"FontSize", "\[Rule]", "13"}], ",", 
                   InterpretationBox[
                    ButtonBox[
                    TooltipBox[
                    GraphicsBox[{{
                    GrayLevel[0], 
                    RectangleBox[{0, 0}]}, {
                    GrayLevel[0], 
                    RectangleBox[{1, -1}]}, {
                    RGBColor[0.689993, 0.089999, 0.119999], 
                    RectangleBox[{0, -1}, {2, 1}]}}, DefaultBaseStyle -> 
                    "ColorSwatchGraphics", AspectRatio -> 1, Frame -> True, 
                    FrameStyle -> 
                    RGBColor[
                    0.4599953333333333, 0.059999333333333335`, 
                    0.07999933333333334], FrameTicks -> None, 
                    PlotRangePadding -> None, ImageSize -> 
                    Dynamic[{
                    Automatic, 1.35 CurrentValue["FontCapHeight"]/
                    AbsoluteCurrentValue[Magnification]}]], 
                    StyleBox[
                    RowBox[{"RGBColor", "[", 
                    RowBox[{"0.689993`", ",", "0.089999`", ",", "0.119999`"}],
                     "]"}], NumberMarks -> False]], Appearance -> None, 
                    BaseStyle -> {}, BaselinePosition -> Baseline, 
                    DefaultBaseStyle -> {}, ButtonFunction :> 
                    With[{Typeset`box$ = EvaluationBox[]}, 
                    If[
                    Not[
                    AbsoluteCurrentValue["Deployed"]], 
                    SelectionMove[Typeset`box$, All, Expression]; 
                    FrontEnd`Private`$ColorSelectorInitialAlpha = 1; 
                    FrontEnd`Private`$ColorSelectorInitialColor = 
                    RGBColor[0.689993, 0.089999, 0.119999]; 
                    FrontEnd`Private`$ColorSelectorUseMakeBoxes = True; 
                    MathLink`CallFrontEnd[
                    FrontEnd`AttachCell[Typeset`box$, 
                    FrontEndResource["RGBColorValueSelector"], {
                    0, {Left, Bottom}}, {Left, Top}, 
                    "ClosingActions" -> {
                    "SelectionDeparture", "ParentChanged", 
                    "EvaluatorQuit"}]]]], BaseStyle -> Inherited, Evaluator -> 
                    Automatic, Method -> "Preemptive"], 
                    RGBColor[0.689993, 0.089999, 0.119999], Editable -> False,
                     Selectable -> False]}], "]"}], ",", 
               RowBox[{"Directive", "[", 
                 RowBox[{
                   RowBox[{"PointSize", "[", 
                    FractionBox["1", "60"], "]"}], ",", 
                   RowBox[{"CapForm", "[", "\"Butt\"", "]"}], ",", 
                   RowBox[{"AbsoluteThickness", "[", "1.6`", "]"}], ",", 
                   RowBox[{"AbsoluteDashing", "[", 
                    RowBox[{"{", 
                    RowBox[{"6", ",", "2"}], "}"}], "]"}], ",", 
                   RowBox[{"FontSize", "\[Rule]", "13"}], ",", 
                   InterpretationBox[
                    ButtonBox[
                    TooltipBox[
                    GraphicsBox[{{
                    GrayLevel[0], 
                    RectangleBox[{0, 0}]}, {
                    GrayLevel[0], 
                    RectangleBox[{1, -1}]}, {
                    RGBColor[0.09, 0.3, 0.], 
                    RectangleBox[{0, -1}, {2, 1}]}}, DefaultBaseStyle -> 
                    "ColorSwatchGraphics", AspectRatio -> 1, Frame -> True, 
                    FrameStyle -> RGBColor[0.06, 0.2, 0.], FrameTicks -> None,
                     PlotRangePadding -> None, ImageSize -> 
                    Dynamic[{
                    Automatic, 1.35 CurrentValue["FontCapHeight"]/
                    AbsoluteCurrentValue[Magnification]}]], 
                    StyleBox[
                    RowBox[{"RGBColor", "[", 
                    RowBox[{"0.09`", ",", "0.3`", ",", "0.`"}], "]"}], 
                    NumberMarks -> False]], Appearance -> None, 
                    BaseStyle -> {}, BaselinePosition -> Baseline, 
                    DefaultBaseStyle -> {}, ButtonFunction :> 
                    With[{Typeset`box$ = EvaluationBox[]}, 
                    If[
                    Not[
                    AbsoluteCurrentValue["Deployed"]], 
                    SelectionMove[Typeset`box$, All, Expression]; 
                    FrontEnd`Private`$ColorSelectorInitialAlpha = 1; 
                    FrontEnd`Private`$ColorSelectorInitialColor = 
                    RGBColor[0.09, 0.3, 0.]; 
                    FrontEnd`Private`$ColorSelectorUseMakeBoxes = True; 
                    MathLink`CallFrontEnd[
                    FrontEnd`AttachCell[Typeset`box$, 
                    FrontEndResource["RGBColorValueSelector"], {
                    0, {Left, Bottom}}, {Left, Top}, 
                    "ClosingActions" -> {
                    "SelectionDeparture", "ParentChanged", 
                    "EvaluatorQuit"}]]]], BaseStyle -> Inherited, Evaluator -> 
                    Automatic, Method -> "Preemptive"], 
                    RGBColor[0.09, 0.3, 0.], Editable -> False, Selectable -> 
                    False]}], "]"}]}], "}"}], ",", 
           RowBox[{"{", 
             RowBox[{#, ",", #2}], "}"}], ",", 
           RowBox[{"LegendMarkers", "\[Rule]", 
             RowBox[{"{", 
               RowBox[{
                 RowBox[{"{", 
                   RowBox[{
                    GraphicsBox[{
                    DiskBox[{0, 0}, 
                    Offset[{2.75, 2.75}]]}], ",", "Automatic"}], "}"}], ",", 
                 RowBox[{"{", 
                   RowBox[{
                    GraphicsBox[{{
                    GrayLevel[1], 
                    PolygonBox[{
                    Offset[{0., 2.975}], 
                    Offset[{-2.5764255762587047`, -1.4875}], 
                    Offset[{2.5764255762587047`, -1.4875}]}]}, 
                    AbsoluteThickness[1], 
                    Dashing[{}], 
                    JoinedCurveBox[
                    Line[{
                    Offset[{0., 2.975}], 
                    Offset[{-2.5764255762587047`, -1.4875}], 
                    Offset[{2.5764255762587047`, -1.4875}], 
                    Offset[{0., 2.975}]}], CurveClosed -> True]}], ",", 
                    "Automatic"}], "}"}]}], "}"}]}], ",", 
           RowBox[{"Joined", "\[Rule]", 
             RowBox[{"{", 
               RowBox[{"True", ",", "True"}], "}"}]}], ",", 
           RowBox[{"LabelStyle", "\[Rule]", 
             RowBox[{"{", 
               RowBox[{
                 RowBox[{"FontFamily", "\[Rule]", "\"Helvetica\""}], ",", 
                 InterpretationBox[
                  ButtonBox[
                   TooltipBox[
                    GraphicsBox[{{
                    GrayLevel[0], 
                    RectangleBox[{0, 0}]}, {
                    GrayLevel[0], 
                    RectangleBox[{1, -1}]}, {
                    GrayLevel[0], 
                    RectangleBox[{0, -1}, {2, 1}]}}, DefaultBaseStyle -> 
                    "ColorSwatchGraphics", AspectRatio -> 1, Frame -> True, 
                    FrameStyle -> GrayLevel[0.], FrameTicks -> None, 
                    PlotRangePadding -> None, ImageSize -> 
                    Dynamic[{
                    Automatic, 1.35 CurrentValue["FontCapHeight"]/
                    AbsoluteCurrentValue[Magnification]}]], 
                    StyleBox[
                    RowBox[{"GrayLevel", "[", "0", "]"}], NumberMarks -> 
                    False]], Appearance -> None, BaseStyle -> {}, 
                   BaselinePosition -> Baseline, DefaultBaseStyle -> {}, 
                   ButtonFunction :> With[{Typeset`box$ = EvaluationBox[]}, 
                    If[
                    Not[
                    AbsoluteCurrentValue["Deployed"]], 
                    SelectionMove[Typeset`box$, All, Expression]; 
                    FrontEnd`Private`$ColorSelectorInitialAlpha = 1; 
                    FrontEnd`Private`$ColorSelectorInitialColor = 
                    GrayLevel[0]; 
                    FrontEnd`Private`$ColorSelectorUseMakeBoxes = True; 
                    MathLink`CallFrontEnd[
                    FrontEnd`AttachCell[Typeset`box$, 
                    FrontEndResource["GrayLevelColorValueSelector"], {
                    0, {Left, Bottom}}, {Left, Top}, 
                    "ClosingActions" -> {
                    "SelectionDeparture", "ParentChanged", 
                    "EvaluatorQuit"}]]]], BaseStyle -> Inherited, Evaluator -> 
                   Automatic, Method -> "Preemptive"], 
                  GrayLevel[0], Editable -> False, Selectable -> False]}], 
               "}"}]}], ",", 
           RowBox[{"LegendLayout", "\[Rule]", "\"Column\""}]}], "]"}]& ), 
      Editable -> True], TraditionalForm], TraditionalForm]},
  "Legended",
  DisplayFunction->(GridBox[{{
      TagBox[
       ItemBox[
        PaneBox[
         TagBox[#, "SkipImageSizeLevel"], Alignment -> {Center, Baseline}, 
         BaselinePosition -> Baseline], DefaultBaseStyle -> "Labeled"], 
       "SkipImageSizeLevel"], 
      ItemBox[#2, DefaultBaseStyle -> "LabeledLabel"]}}, 
    GridBoxAlignment -> {"Columns" -> {{Center}}, "Rows" -> {{Center}}}, 
    AutoDelete -> False, GridBoxItemSize -> Automatic, 
    BaselinePosition -> {1, 1}]& ),
  Editable->True,
  InterpretationFunction->(RowBox[{"Legended", "[", 
     RowBox[{#, ",", 
       RowBox[{"Placed", "[", 
         RowBox[{#2, ",", "After"}], "]"}]}], "]"}]& )]], "Output",
 CellChangeTimes->{{3.7906373714156227`*^9, 3.790637392548645*^9}, 
   3.790639454625758*^9, 3.7906396968532953`*^9, 3.790639852053637*^9, {
   3.790639902342709*^9, 3.7906399281536417`*^9}, 3.790689481961375*^9, 
   3.790689656774166*^9, {3.790689893549388*^9, 3.7906899488759623`*^9}, {
   3.790778502546673*^9, 3.7907785028224707`*^9}, {3.790797624702594*^9, 
   3.790797648909802*^9}, 3.790799074702483*^9, {3.7907999588176737`*^9, 
   3.790799959099599*^9}, 3.7908000137295628`*^9, 3.790801400068606*^9},
 CellLabel->
  "Out[139]=",ExpressionUUID->"d136f809-8787-4e2e-b9d6-5c2989cc426d"]
}, Open  ]],

Cell[CellGroupData[{

Cell["Interactive", "Subsection",
 CellChangeTimes->{{3.790801639344388*^9, 
  3.790801641048555*^9}},ExpressionUUID->"d9ea769f-d6f8-4556-8319-\
0349d1e8ee1c"],

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{"GetSeconds", "[", "time_", "]"}], " ", ":=", " ", 
   RowBox[{"IntegerString", "[", 
    RowBox[{
     RowBox[{"Round", "[", 
      RowBox[{"Mod", "[", 
       RowBox[{"time", ",", " ", "60"}], "]"}], "]"}], ",", " ", "10", ",", 
     " ", "2"}], "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"GetMinutes", "[", "time_", "]"}], ":=", " ", 
   RowBox[{"IntegerString", "[", 
    RowBox[{
     RowBox[{"Mod", "[", 
      RowBox[{
       RowBox[{"Floor", "[", 
        RowBox[{"time", "/", "60"}], "]"}], ",", " ", "60"}], "]"}], ",", " ",
      "10", ",", " ", "2"}], "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{"GetHours", "[", "time_", "]"}], " ", ":=", " ", 
   RowBox[{"IntegerString", "[", 
    RowBox[{
     RowBox[{"Floor", "[", 
      RowBox[{"time", "/", "3600"}], "]"}], ",", " ", "10", ",", " ", "2"}], 
    "]"}]}], ";"}], "\n", 
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"ClockFormat", "[", "time_", "]"}], " ", ":=", " ", 
    RowBox[{"StringJoin", "[", 
     RowBox[{
      RowBox[{"GetHours", "[", "time", "]"}], ",", " ", "\"\<:\>\"", ",", " ", 
      RowBox[{"GetMinutes", "[", "time", "]"}], ",", " ", "\"\<:\>\"", ",", 
      " ", 
      RowBox[{"GetSeconds", "[", "time", "]"}]}], "]"}]}], ";"}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ProgressEvolveIndicator", "[", 
    RowBox[{
    "indexProgress_", ",", "totalSize_", ",", "startTime_", ",", 
     "fittestIndPlot_", ",", "scorePlot_"}], "]"}], ":=", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{
      "progressString", ",", "remainingTime", ",", "remainingTimeString", ",",
        "indicator", ",", "ellapsedTimeString"}], "}"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"progressString", " ", "=", " ", 
       RowBox[{"Row", "[", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"Style", "[", 
           RowBox[{"\"\<Progress: \>\"", ",", "Bold"}], "]"}], ",", 
          RowBox[{"ToString", "[", "indexProgress", "]"}], ",", "\"\</\>\"", 
          ",", 
          RowBox[{"ToString", "[", "totalSize", "]"}]}], "}"}], "]"}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"ellapsedTimeString", " ", "=", " ", 
       RowBox[{"Row", "[", 
        RowBox[{"{", 
         RowBox[{
          RowBox[{"Style", "[", 
           RowBox[{"\"\<Ellapsed time: \>\"", ",", "Bold"}], "]"}], ",", 
          RowBox[{"ClockFormat", "[", 
           RowBox[{
            RowBox[{"AbsoluteTime", "[", "]"}], "-", "startTime"}], "]"}]}], 
         "}"}], "]"}]}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"If", "[", 
       RowBox[{
        RowBox[{"indexProgress", " ", "\[NotEqual]", " ", "0"}], ",", 
        "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"remainingTime", " ", "=", " ", 
          RowBox[{
           FractionBox[
            RowBox[{
             RowBox[{"AbsoluteTime", "[", "]"}], "-", "startTime"}], 
            "indexProgress"], 
           RowBox[{"(", 
            RowBox[{"totalSize", "-", "indexProgress"}], ")"}]}]}], ";", 
         "\[IndentingNewLine]", 
         RowBox[{"remainingTimeString", " ", "=", " ", 
          RowBox[{"Row", "[", 
           RowBox[{"{", 
            RowBox[{
             RowBox[{"Style", "[", 
              RowBox[{"\"\<Remaining: \>\"", ",", "Bold"}], "]"}], ",", 
             RowBox[{"ClockFormat", "[", "remainingTime", "]"}]}], "}"}], 
           "]"}]}], ";"}], "\[IndentingNewLine]", ",", "\[IndentingNewLine]", 
        
        RowBox[{
         RowBox[{"remainingTimeString", " ", "=", " ", 
          RowBox[{"Row", "[", 
           RowBox[{"{", 
            RowBox[{
             RowBox[{"Style", "[", 
              RowBox[{"\"\<Remaining: \>\"", ",", " ", "Bold"}], "]"}], ",", 
             "\"\<Unknown\>\""}], "}"}], "]"}]}], ";"}]}], 
       "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{"indicator", " ", "=", " ", 
       RowBox[{"Panel", "[", "\[IndentingNewLine]", 
        RowBox[{"Column", "[", "\[IndentingNewLine]", 
         RowBox[{"{", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"Style", "[", 
            RowBox[{"\"\<Generation\>\"", ",", "Bold"}], "]"}], ",", 
           "\[IndentingNewLine]", 
           RowBox[{"ProgressIndicator", "[", 
            RowBox[{"indexProgress", ",", 
             RowBox[{"{", 
              RowBox[{"1", ",", "totalSize"}], "}"}]}], "]"}], ",", 
           "\[IndentingNewLine]", "progressString", ",", 
           "\[IndentingNewLine]", "ellapsedTimeString", ",", 
           "\[IndentingNewLine]", "remainingTimeString", ",", 
           "\[IndentingNewLine]", 
           RowBox[{"Style", "[", 
            RowBox[{"\"\<Fittest individual: \>\"", ",", " ", "Bold"}], "]"}],
            ",", "\[IndentingNewLine]", 
           RowBox[{"Row", "[", 
            RowBox[{"{", 
             RowBox[{"fittestIndPlot", ",", "scorePlot"}], "}"}], "]"}]}], 
          "\[IndentingNewLine]", "}"}], "\[IndentingNewLine]", "]"}], 
        "\[IndentingNewLine]", "]"}]}], ";", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{"Return", "[", "indicator", "]"}], ";"}]}], 
    "\[IndentingNewLine]", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{
   RowBox[{"ProgressEvolvePopulation", "[", 
    RowBox[{
    "population_", ",", "survivors_", ",", "mutationProb_", ",", "elitism_", 
     ",", "trainingDates_", ",", "transactionCost_", ",", "bloatControl_", 
     ",", "generations_"}], "]"}], ":=", 
   RowBox[{"Block", "[", 
    RowBox[{
     RowBox[{"{", 
      RowBox[{"scorePlot", ",", "fittestIndPlot", ",", 
       RowBox[{"currentGeneration", " ", "=", " ", "population"}], ",", 
       RowBox[{"startTime", " ", "=", " ", 
        RowBox[{"AbsoluteTime", "[", "]"}]}], ",", 
       RowBox[{"indexProgress", " ", "=", " ", "0"}], ",", 
       RowBox[{"scoreVsK", "=", 
        RowBox[{"{", "}"}]}], ",", 
       RowBox[{"allGenerations", "=", 
        RowBox[{"{", "population", "}"}]}]}], "}"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"Monitor", "[", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"Do", "[", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{
           RowBox[{"AppendTo", "[", 
            RowBox[{"scoreVsK", ",", 
             RowBox[{"Mean", "[", 
              RowBox[{"currentGeneration", "[", 
               RowBox[{"[", 
                RowBox[{"All", ",", "\"\<Score\>\""}], "]"}], "]"}], "]"}]}], 
            "]"}], ";", "\[IndentingNewLine]", 
           RowBox[{"scorePlot", " ", "=", " ", 
            RowBox[{"ListLinePlot", "[", "\[IndentingNewLine]", 
             RowBox[{"scoreVsK", ",", "\[IndentingNewLine]", 
              RowBox[{"PlotTheme", "\[Rule]", "\"\<Monochrome\>\""}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{"FrameLabel", "\[Rule]", 
               RowBox[{"{", 
                RowBox[{
                 RowBox[{"Style", "[", 
                  RowBox[{"\"\<Generation\>\"", ",", "15"}], "]"}], ",", " ", 
                 
                 RowBox[{"Style", "[", 
                  RowBox[{"\"\<Average Score\>\"", ",", "15"}], "]"}]}], 
                "}"}]}], ",", " ", "\[IndentingNewLine]", 
              RowBox[{"BaseStyle", "\[Rule]", 
               RowBox[{"FontSize", "\[Rule]", "13"}]}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{"PlotRangePadding", "\[Rule]", "Automatic"}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{"GridLines", "\[Rule]", 
               RowBox[{"{", 
                RowBox[{
                 RowBox[{"{", "}"}], ",", 
                 RowBox[{"{", "0", "}"}]}], "}"}]}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{"Joined", "\[Rule]", 
               RowBox[{"{", 
                RowBox[{"True", ",", "False"}], "}"}]}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{"PlotStyle", "\[Rule]", 
               InterpretationBox[
                ButtonBox[
                 TooltipBox[
                  GraphicsBox[{
                    {GrayLevel[0], RectangleBox[{0, 0}]}, 
                    {GrayLevel[0], RectangleBox[{1, -1}]}, 
                    {RGBColor[0.689993, 0.089999, 0.119999], 
                    RectangleBox[{0, -1}, {2, 1}]}},
                   AspectRatio->1,
                   DefaultBaseStyle->"ColorSwatchGraphics",
                   Frame->True,
                   
                   FrameStyle->RGBColor[
                    0.4599953333333333, 0.059999333333333335`, 
                    0.07999933333333334],
                   FrameTicks->None,
                   
                   ImageSize->
                    Dynamic[{
                    Automatic, 
                    1.35 (CurrentValue["FontCapHeight"]/AbsoluteCurrentValue[
                    Magnification])}],
                   PlotRangePadding->None],
                  StyleBox[
                   RowBox[{"RGBColor", "[", 
                    RowBox[{"0.689993`", ",", "0.089999`", ",", "0.119999`"}],
                     "]"}], NumberMarks -> False]],
                 Appearance->None,
                 BaseStyle->{},
                 BaselinePosition->Baseline,
                 ButtonFunction:>With[{Typeset`box$ = EvaluationBox[]}, 
                   If[
                    Not[
                    AbsoluteCurrentValue["Deployed"]], 
                    SelectionMove[Typeset`box$, All, Expression]; 
                    FrontEnd`Private`$ColorSelectorInitialAlpha = 1; 
                    FrontEnd`Private`$ColorSelectorInitialColor = 
                    RGBColor[0.689993, 0.089999, 0.119999]; 
                    FrontEnd`Private`$ColorSelectorUseMakeBoxes = True; 
                    MathLink`CallFrontEnd[
                    FrontEnd`AttachCell[Typeset`box$, 
                    FrontEndResource["RGBColorValueSelector"], {
                    0, {Left, Bottom}}, {Left, Top}, 
                    "ClosingActions" -> {
                    "SelectionDeparture", "ParentChanged", 
                    "EvaluatorQuit"}]]]],
                 DefaultBaseStyle->{},
                 Evaluator->Automatic,
                 Method->"Preemptive"],
                RGBColor[0.689993, 0.089999, 0.119999],
                Editable->False,
                Selectable->False]}], ",", "\[IndentingNewLine]", 
              RowBox[{"PlotLabel", "\[Rule]", "\"\<Score\>\""}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{"Frame", "\[Rule]", "True"}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{"ImageSize", "\[Rule]", "500"}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{"PlotRange", "\[Rule]", "All"}]}], 
             "\[IndentingNewLine]", "]"}]}], ";", "\[IndentingNewLine]", 
           RowBox[{"fittestIndPlot", " ", "=", " ", 
            RowBox[{"TreeForm", "[", 
             RowBox[{
              RowBox[{"SynthesizeTree", "[", 
               RowBox[{
                RowBox[{"First", "[", 
                 RowBox[{
                  RowBox[{"First", "[", "currentGeneration", "]"}], "[", 
                  "\"\<Genome\>\"", "]"}], "]"}], ",", 
                RowBox[{"Last", "[", 
                 RowBox[{
                  RowBox[{"First", "[", "currentGeneration", "]"}], "[", 
                  "\"\<Genome\>\"", "]"}], "]"}], ",", "grammar"}], "]"}], 
              ",", 
              RowBox[{"ImageSize", "\[Rule]", "400"}]}], "]"}]}], ";", 
           "\[IndentingNewLine]", "\[IndentingNewLine]", 
           RowBox[{"currentGeneration", " ", "=", " ", 
            RowBox[{"Generation", "[", 
             RowBox[{
             "currentGeneration", ",", "survivors", ",", "mutationProb", ",", 
              "elitism", ",", "trainingDates", ",", "transactionCost", ",", 
              "bloatControl"}], "]"}]}], ";", "\[IndentingNewLine]", 
           RowBox[{"AppendTo", "[", 
            RowBox[{"allGenerations", ",", "currentGeneration"}], "]"}], ";", 
           "\[IndentingNewLine]", 
           RowBox[{"indexProgress", "++"}], ";"}], "\[IndentingNewLine]", ",",
           "generations"}], "\[IndentingNewLine]", "]"}], ",", 
        "\[IndentingNewLine]", 
        RowBox[{"ProgressEvolveIndicator", "[", 
         RowBox[{
         "indexProgress", ",", "generations", ",", "startTime", ",", 
          "fittestIndPlot", ",", "scorePlot"}], "]"}]}], 
       "\[IndentingNewLine]", "]"}], ";", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{"Return", "[", "allGenerations", "]"}], ";"}]}], 
    "\[IndentingNewLine]", "]"}]}], ";"}]}], "Input",
 InitializationCell->True,
 CellChangeTimes->CompressedData["
1:eJxTTMoPSmViYGCQBGIQnbVWpuOH2RvHgId6YNrt9IcJIJp1c8lEEP3O//Ec
sHxq3FwQrdJ/8QKIvpP+7TKInjBh4W0QPel28mMQfXzuwedg+YfRb0H0zR9L
v4HoJ2nOjD+BdMI0b1YQncL5UQZEa36PUgbROl4NaiD6EPtlLRBd8/QWmF7p
W24IovcYXzEF0Ud6vluCaLmffFYgOsOE1wVEz+Lg8ADRARan/ED0OyH5QBAt
8Vw/DUTP5Y/IAtFmTXz5IJrrtngBiP71Z2EliDa/9KgKRDuHuU0B0SsCjoNp
VSXvRSDa90wFmN5Ue+g6iHZbtf8miF7AE30PRLv8dH0Aor1eXtrx2eKNo/G2
RTtBNNsPpvREO6D8rahcEM1WF1kBosWvL+4E0SkORX0gOufNzEkgGgAVntgn

  "],
 CellLabel->"In[60]:=",ExpressionUUID->"4598be94-1193-4602-913e-fcd90b5d38b9"]
}, Open  ]]
}, Closed]],

Cell[CellGroupData[{

Cell["Experiments", "Section",
 CellChangeTimes->{{3.790803286672008*^9, 
  3.79080328794413*^9}},ExpressionUUID->"a1b19167-87ca-486c-a4e2-\
613bb3a34a5b"],

Cell[BoxData[
 RowBox[{
  RowBox[{"population", " ", "=", " ", 
   RowBox[{"GenerateInitialPopulation", "[", 
    RowBox[{
    "200", ",", "100", ",", "trainingDates", ",", "0.0", ",", "0.0001"}], 
    "]"}]}], ";"}]], "Input",
 CellLabel->"In[75]:=",ExpressionUUID->"8637fe27-4667-4a35-a425-dbc5a174e218"],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{
  RowBox[{"evolved", " ", "=", " ", 
   RowBox[{"ProgressEvolvePopulation", "[", 
    RowBox[{
    "population", ",", "50", ",", "0.5", ",", "2", ",", "trainingDates", ",", 
     "0.0", ",", "0.0001", ",", "30"}], "]"}]}], ";"}]], "Input",
 CellLabel->"In[76]:=",ExpressionUUID->"2c267121-59d5-417d-b422-85b83b1f96f0"],

Cell[BoxData["$Aborted"], "Output",
 CellChangeTimes->{3.790803694048779*^9},
 CellLabel->"Out[76]=",ExpressionUUID->"3ad11fef-f28a-402f-bbc4-fca809536ef9"]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"best", " ", "=", " ", 
   RowBox[{"First", "[", 
    RowBox[{"evolved", "[", 
     RowBox[{"[", 
      RowBox[{"-", "1"}], "]"}], "]"}], "]"}]}], ";"}]], "Input",ExpressionUUI\
D->"6cb0f264-e99e-4e29-a121-b5e9c1475ded"],

Cell[BoxData[
 RowBox[{"FullForm", "@", 
  RowBox[{"SynthesizeTree", "[", 
   RowBox[{
    RowBox[{"First", "[", 
     RowBox[{"best", "[", "\"\<Genome\>\"", "]"}], "]"}], ",", 
    RowBox[{"Last", "[", 
     RowBox[{"best", "[", "\"\<Genome\>\"", "]"}], "]"}], ",", "grammar"}], 
   "]"}]}]], "Input",ExpressionUUID->"3fef345a-b116-47b1-b746-7ef6e9831892"],

Cell[BoxData[
 RowBox[{"best", "[", "\"\<Genome\>\"", "]"}]], "Input",ExpressionUUID->"95d85cbb-aa7e-4d00-b012-3a3bffe1fb71"]
}, Open  ]]
}, Open  ]]
},
WindowSize->{1862, 1016},
WindowMargins->{{Automatic, 0}, {0, Automatic}},
FrontEndVersion->"12.0 for Linux x86 (64-bit) (April 8, 2019)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[CellGroupData[{
Cell[422, 15, 199, 3, 99, "Title",ExpressionUUID->"231a28b8-24e8-4850-bed2-97e28e2feb38"],
Cell[624, 20, 439, 10, 50, "Input",ExpressionUUID->"142d95eb-353b-4049-a24d-671362ea0652",
 InitializationCell->True],
Cell[CellGroupData[{
Cell[1088, 34, 177, 3, 68, "Section",ExpressionUUID->"082e424d-3c6e-4a29-ab66-8f49caa9d4f7"],
Cell[CellGroupData[{
Cell[1290, 41, 226, 3, 55, "Subsection",ExpressionUUID->"b7222f7a-e6c8-4478-a4dc-40f00af64404"],
Cell[1519, 46, 11303, 263, 748, "Input",ExpressionUUID->"2596c319-046c-4a6c-a461-990c8cd0bff1",
 InitializationCell->True],
Cell[CellGroupData[{
Cell[12847, 313, 201, 4, 31, "Input",ExpressionUUID->"effdc811-5ed1-4747-a52b-de866aec4d5c"],
Cell[13051, 319, 3324, 114, 163, "Output",ExpressionUUID->"e39b8d9b-d591-4ff2-9df0-992f6f1ae4b5"]
}, Open  ]],
Cell[16390, 436, 2375, 58, 186, "Input",ExpressionUUID->"dbcee70f-0ecd-408e-9a7c-2a6b3a243902",
 InitializationCell->True],
Cell[CellGroupData[{
Cell[18790, 498, 196, 4, 31, "Input",ExpressionUUID->"407eac81-0c5d-4ce8-a328-cbba96d15565"],
Cell[18989, 504, 5594, 107, 468, "Output",ExpressionUUID->"a30814f3-ec89-4bc8-a2d6-a1df53b63b0c"]
}, Open  ]]
}, Open  ]],
Cell[CellGroupData[{
Cell[24632, 617, 180, 3, 55, "Subsection",ExpressionUUID->"feb899df-d67b-4dea-bf41-d439169cadf8"],
Cell[24815, 622, 170, 3, 36, "Text",ExpressionUUID->"b273e77e-9253-49d7-9c51-15476533a67f"],
Cell[24988, 627, 1536, 32, 71, "Input",ExpressionUUID->"48a50991-ced2-49a9-8324-4b430a7ed712",
 InitializationCell->True],
Cell[CellGroupData[{
Cell[26549, 663, 348, 7, 31, "Input",ExpressionUUID->"1e66c574-3eb2-486e-9734-ed6239db7fdd"],
Cell[26900, 672, 309, 6, 35, "Output",ExpressionUUID->"9453bbe9-fd99-43f4-99e4-0aa66e2c5c97"]
}, Open  ]],
Cell[27224, 681, 177, 3, 36, "Text",ExpressionUUID->"b98958a0-7bd8-449e-827b-76a5e5542a90"],
Cell[27404, 686, 2001, 45, 140, "Input",ExpressionUUID->"26a985c5-ad62-4a7e-84cd-f01450dbbee4",
 InitializationCell->True],
Cell[CellGroupData[{
Cell[29430, 735, 408, 9, 31, "Input",ExpressionUUID->"b7ff66d6-6c24-449c-ae02-c8a2c91f5538"],
Cell[29841, 746, 448, 13, 50, "Output",ExpressionUUID->"97c81dcb-f7e6-45d7-b90f-e38fb1186942"]
}, Open  ]],
Cell[30304, 762, 224, 5, 36, "Text",ExpressionUUID->"468bfd98-d3f2-49d0-84f7-9bc08eb51f7b"],
Cell[30531, 769, 3443, 78, 278, "Input",ExpressionUUID->"0e439146-86f7-4090-951a-3a17c2091f94",
 InitializationCell->True],
Cell[CellGroupData[{
Cell[33999, 851, 367, 9, 31, "Input",ExpressionUUID->"e567a967-12f2-49a3-98cc-692f7bf0d6ee"],
Cell[34369, 862, 264, 6, 35, "Output",ExpressionUUID->"52fde800-d02f-4666-b9fa-ae1c94f3f4d5"]
}, Open  ]],
Cell[CellGroupData[{
Cell[34670, 873, 671, 18, 31, "Input",ExpressionUUID->"0affb693-e8c1-4476-a5e8-70594106ba9a"],
Cell[35344, 893, 267, 6, 35, "Output",ExpressionUUID->"d93f9302-6cec-46e2-9fad-dfcad5cfa837"]
}, Open  ]],
Cell[35626, 902, 275, 8, 36, "Text",ExpressionUUID->"01c8388a-e994-46ee-a645-d3e79ad70cd8"],
Cell[35904, 912, 3242, 67, 301, "Input",ExpressionUUID->"36f28f7a-cd07-459e-8029-00f9b517a1ee",
 InitializationCell->True],
Cell[CellGroupData[{
Cell[39171, 983, 158, 3, 31, "Input",ExpressionUUID->"f9577640-e46a-48fb-bbc4-2baa1b2e99b7"],
Cell[39332, 988, 270, 7, 35, "Output",ExpressionUUID->"21ec6823-3f66-43bf-a139-501bf4c04d36"]
}, Open  ]],
Cell[CellGroupData[{
Cell[39639, 1000, 933, 25, 101, "Input",ExpressionUUID->"5d9b7b03-bf38-4ea4-90d6-aaa4a2215e32"],
Cell[40575, 1027, 186, 3, 35, "Output",ExpressionUUID->"1c9d680e-2f01-4b88-8452-6d9f619b1712"]
}, Open  ]],
Cell[40776, 1033, 184, 3, 36, "Text",ExpressionUUID->"7d818255-aa55-4d33-b1e6-8a996aeb1a51"],
Cell[40963, 1038, 4751, 103, 439, "Input",ExpressionUUID->"eb1b2b68-d657-4bb4-87c4-41912d2b4be6",
 InitializationCell->True],
Cell[CellGroupData[{
Cell[45739, 1145, 766, 20, 31, "Input",ExpressionUUID->"bf9a6269-49c0-4b2f-a2ed-8647fe8e3022"],
Cell[46508, 1167, 624, 17, 35, "Output",ExpressionUUID->"3df290a8-e5a4-48a0-8f8f-07a427c473dc"]
}, Open  ]],
Cell[CellGroupData[{
Cell[47169, 1189, 663, 17, 31, "Input",ExpressionUUID->"2d5e1caa-3d96-4ca0-9ef5-4f3aced052ba"],
Cell[47835, 1208, 674, 18, 35, "Output",ExpressionUUID->"4d4e9940-74a8-4243-a544-383347b56da1"]
}, Open  ]],
Cell[48524, 1229, 173, 3, 36, "Text",ExpressionUUID->"9f2aede4-4bbc-451a-9960-7adf2b0186f9"],
Cell[48700, 1234, 4447, 92, 462, "Input",ExpressionUUID->"7ab65703-bb69-4f34-8664-807662f2a19e",
 InitializationCell->True],
Cell[CellGroupData[{
Cell[53172, 1330, 4354, 98, 124, "Input",ExpressionUUID->"d422a228-1249-4f3c-9929-cb45137abfd3"],
Cell[57529, 1430, 8545, 174, 231, "Output",ExpressionUUID->"43303d48-f3fe-4864-880f-8e614ed412c0"]
}, Open  ]],
Cell[CellGroupData[{
Cell[66111, 1609, 303, 6, 31, "Input",ExpressionUUID->"32448206-7dfc-4813-9eed-06133cc5405a"],
Cell[66417, 1617, 935, 23, 50, "Output",ExpressionUUID->"33bdff35-b314-4b85-923a-698a4817974e"]
}, Open  ]],
Cell[CellGroupData[{
Cell[67389, 1645, 5152, 116, 147, "Input",ExpressionUUID->"b4317d5f-dfa0-4326-a688-fb99011c98a0"],
Cell[72544, 1763, 10461, 210, 144, "Output",ExpressionUUID->"cca4017f-8477-4f1a-9043-77e0318a793a"]
}, Open  ]],
Cell[CellGroupData[{
Cell[83042, 1978, 391, 8, 31, "Input",ExpressionUUID->"888fe5d3-d03d-481c-9fb7-de8fab3b9e8a"],
Cell[83436, 1988, 1099, 28, 50, "Output",ExpressionUUID->"461ee74d-68cd-4def-b65a-1f30c2d7e534"]
}, Open  ]]
}, Closed]]
}, Open  ]],
Cell[CellGroupData[{
Cell[84596, 2023, 166, 3, 68, "Section",ExpressionUUID->"b7490d6f-4c75-440d-9324-b62f58f03dc2"],
Cell[84765, 2028, 174, 3, 36, "Text",ExpressionUUID->"04e26849-ad0e-4cb7-b9c7-ab645edda6fc"],
Cell[84942, 2033, 15505, 346, 1520, "Input",ExpressionUUID->"f631ef19-1d41-4fd9-be26-8ef5eea1ab3f",
 InitializationCell->True],
Cell[CellGroupData[{
Cell[100472, 2383, 177, 3, 31, "Input",ExpressionUUID->"5d759315-b71a-4268-8979-a61ce94b5f9c"],
Cell[100652, 2388, 8558, 176, 315, "Output",ExpressionUUID->"8bd5988f-4b3a-4eaf-b946-971911a143e5"]
}, Open  ]],
Cell[CellGroupData[{
Cell[109247, 2569, 418, 9, 31, "Input",ExpressionUUID->"5e2c98fc-7eaa-4ff9-b894-346660be4288"],
Cell[109668, 2580, 6071, 125, 517, "Output",ExpressionUUID->"7a3dfa1e-95d9-4aa2-8e6b-a04a13686a81"]
}, Open  ]],
Cell[CellGroupData[{
Cell[115776, 2710, 296, 6, 31, "Input",ExpressionUUID->"890deaf9-277f-4132-b2d7-551af28a4f02"],
Cell[116075, 2718, 7311, 156, 377, "Output",ExpressionUUID->"96cf8cd0-fe5b-4f6d-b9f4-6c7f9aa5b418"]
}, Open  ]],
Cell[CellGroupData[{
Cell[123423, 2879, 510, 11, 31, "Input",ExpressionUUID->"c219c2b1-4841-4d3d-8cd3-e43e89d98e50"],
Cell[123936, 2892, 11474, 239, 530, "Output",ExpressionUUID->"785d828e-3bfe-4563-974e-bd469a598482"]
}, Open  ]],
Cell[CellGroupData[{
Cell[135447, 3136, 383, 9, 31, "Input",ExpressionUUID->"14206010-6697-44a9-849b-cbff9c629a63"],
Cell[135833, 3147, 654, 20, 50, "Output",ExpressionUUID->"51399ae5-0569-467d-9b55-723df5c62aeb"]
}, Open  ]]
}, Closed]],
Cell[CellGroupData[{
Cell[136536, 3173, 154, 3, 54, "Section",ExpressionUUID->"494e3a47-7a8e-4178-99aa-8aba6c8a5063"],
Cell[136693, 3178, 240, 6, 36, "Text",ExpressionUUID->"85321852-572a-401c-8acb-bad0fc91985c"],
Cell[136936, 3186, 5519, 131, 462, "Input",ExpressionUUID->"3adbcaa5-4ee8-47d8-95e8-cf3d90c2376b",
 InitializationCell->True],
Cell[CellGroupData[{
Cell[142480, 3321, 381, 9, 31, "Input",ExpressionUUID->"ed9c5530-1be9-42a3-8668-b5927b1ee27a"],
Cell[142864, 3332, 11767, 243, 270, "Output",ExpressionUUID->"fbc899ce-a0df-4414-917c-487aabde9478"]
}, Open  ]],
Cell[CellGroupData[{
Cell[154668, 3580, 371, 8, 31, "Input",ExpressionUUID->"b419ca0e-3884-44b4-83f9-f19462c0db42"],
Cell[155042, 3590, 827, 22, 50, "Output",ExpressionUUID->"dc00a929-ff37-4aff-9a2a-192e615f8a5b"]
}, Open  ]]
}, Closed]],
Cell[CellGroupData[{
Cell[155918, 3618, 153, 3, 54, "Section",ExpressionUUID->"2de844f5-b328-4128-981c-36589e6bf85d"],
Cell[156074, 3623, 4476, 110, 508, "Input",ExpressionUUID->"312ef10a-a074-4597-b6a0-f711298c9fb9",
 InitializationCell->True],
Cell[CellGroupData[{
Cell[160575, 3737, 362, 8, 31, "Input",ExpressionUUID->"a82a72d0-25c5-486e-8bea-974d20c28ac8"],
Cell[160940, 3747, 11313, 236, 124, "Output",ExpressionUUID->"2f29cb10-efad-4d8a-b628-20b254ba4d64"]
}, Open  ]],
Cell[CellGroupData[{
Cell[172290, 3988, 282, 6, 31, "Input",ExpressionUUID->"f7e83c78-fc42-4a1a-befb-ab0149dc66dc"],
Cell[172575, 3996, 315, 8, 35, "Output",ExpressionUUID->"6349a885-0a94-4b14-82b9-00c7ad1675e0"]
}, Open  ]]
}, Closed]],
Cell[CellGroupData[{
Cell[172939, 4010, 161, 3, 54, "Section",ExpressionUUID->"dc03ccae-1210-4d2a-b9c5-1264261085e5"],
Cell[CellGroupData[{
Cell[173125, 4017, 167, 3, 55, "Subsection",ExpressionUUID->"bf6bc8c3-13c3-4ca9-995f-a4edcf596f11"],
Cell[173295, 4022, 748, 19, 47, "Input",ExpressionUUID->"34b3163e-8242-463e-b6c1-c9113fa72a26",
 InitializationCell->True],
Cell[CellGroupData[{
Cell[174068, 4045, 286, 6, 47, "Input",ExpressionUUID->"1a57f338-2868-4173-b9ba-4694629fd163",
 InitializationCell->True],
Cell[174357, 4053, 1217, 20, 70, "Output",ExpressionUUID->"17485191-875c-4d94-b80d-73d73887b5d9"]
}, Open  ]],
Cell[175589, 4076, 540, 14, 47, "Input",ExpressionUUID->"1705bd13-18bb-404e-bfbe-a59d1e71a895",
 InitializationCell->True],
Cell[CellGroupData[{
Cell[176154, 4094, 898, 20, 71, "Input",ExpressionUUID->"3ed9ee7c-402c-464f-86f5-cc4f9cb875f4",
 InitializationCell->True],
Cell[177055, 4116, 1622, 26, 70, "Output",ExpressionUUID->"ba109d97-550c-4b58-a38a-1886c7b1e301"]
}, Open  ]],
Cell[178692, 4145, 5442, 136, 495, "Input",ExpressionUUID->"2bc15f53-9f9e-4bbb-bc1a-61ae98e23550",
 InitializationCell->True],
Cell[184137, 4283, 2961, 76, 209, "Input",ExpressionUUID->"b23233a9-6cd3-49e1-b111-27f957ae2d81",
 InitializationCell->True],
Cell[187101, 4361, 1222, 31, 186, "Input",ExpressionUUID->"75548f01-00a5-489f-9ef2-c54e9af0d979",
 InitializationCell->True]
}, Closed]],
Cell[CellGroupData[{
Cell[188360, 4397, 176, 3, 39, "Subsection",ExpressionUUID->"5a0581db-5369-456f-ba8a-15a102fa76fe"],
Cell[188539, 4402, 9352, 235, 853, "Input",ExpressionUUID->"b1e9e30c-246b-4d7c-8303-1e64f7008a2a",
 InitializationCell->True],
Cell[197894, 4639, 954, 27, 34, "Input",ExpressionUUID->"04291db9-7a4e-4267-b5e4-ae9f0839ce5f"],
Cell[198851, 4668, 344, 8, 31, "Input",ExpressionUUID->"6514ee92-65c3-4cc4-939e-9c548b2ea13a"],
Cell[CellGroupData[{
Cell[199220, 4680, 440, 12, 31, "Input",ExpressionUUID->"7615f13f-cdfd-4709-896d-dde01ad5ccc8"],
Cell[199663, 4694, 2909, 41, 151, "Output",ExpressionUUID->"6bc97f59-0901-43bb-a451-998c58fb00a2"]
}, Open  ]],
Cell[CellGroupData[{
Cell[202609, 4740, 614, 15, 31, "Input",ExpressionUUID->"a670fc4f-11ba-46b5-9c90-6d754220c382"],
Cell[203226, 4757, 4456, 68, 151, "Output",ExpressionUUID->"e06d7855-8885-41d6-af74-080ea66cdc36"]
}, Open  ]],
Cell[CellGroupData[{
Cell[207719, 4830, 484, 13, 31, "Input",ExpressionUUID->"f5dafcd2-8d13-484f-a894-fe7f35c416ed"],
Cell[208206, 4845, 285, 6, 35, "Output",ExpressionUUID->"176941d9-1bb2-4186-8d01-c7e8cfd666c4"]
}, Open  ]]
}, Closed]],
Cell[CellGroupData[{
Cell[208540, 4857, 171, 3, 39, "Subsection",ExpressionUUID->"932a4b92-5ea6-42cd-a335-141f44d792f5"],
Cell[208714, 4862, 3575, 81, 347, "Input",ExpressionUUID->"fd2de227-3560-4c20-8935-9f2472fd267a",
 InitializationCell->True],
Cell[212292, 4945, 400, 10, 31, "Input",ExpressionUUID->"a7386762-4404-4fdc-bd9e-130b7779d466"],
Cell[CellGroupData[{
Cell[212717, 4959, 279, 5, 31, "Input",ExpressionUUID->"e1f455cf-b69d-4494-8ff2-84b38849c0f5"],
Cell[212999, 4966, 28497, 554, 259, "Output",ExpressionUUID->"abed7852-dc34-4f30-9e66-131803ad67b2"]
}, Open  ]]
}, Open  ]]
}, Closed]],
Cell[CellGroupData[{
Cell[241557, 5527, 170, 3, 54, "Section",ExpressionUUID->"ba18f69f-6916-4ab5-9b7c-4291e64843c2"],
Cell[241730, 5532, 10898, 275, 1060, "Input",ExpressionUUID->"74feb33b-0d28-4497-82a7-826bf5115c1d",
 InitializationCell->True],
Cell[CellGroupData[{
Cell[252653, 5811, 405, 9, 31, "Input",ExpressionUUID->"e10f642c-c222-466b-b128-54e4041ea6eb"],
Cell[253061, 5822, 7673, 161, 104, "Output",ExpressionUUID->"4e7f818a-3719-41e2-9761-51a49c743f7b"]
}, Open  ]],
Cell[CellGroupData[{
Cell[260771, 5988, 234, 6, 31, "Input",ExpressionUUID->"083d2d44-6b70-4ebd-9563-a4f9ea356324"],
Cell[261008, 5996, 504, 15, 50, "Output",ExpressionUUID->"c59a34d0-e042-4f9e-92a1-281b25737d92"]
}, Open  ]],
Cell[261527, 6014, 1337, 31, 140, "Input",ExpressionUUID->"5ae22612-1927-4987-adb0-0f1df11de72e",
 InitializationCell->True],
Cell[262867, 6047, 346, 8, 31, "Input",ExpressionUUID->"4d67144c-ff94-4f38-ae83-a623a9b7df0c"]
}, Closed]],
Cell[CellGroupData[{
Cell[263250, 6060, 156, 3, 54, "Section",ExpressionUUID->"b5eb2d33-a765-462a-a382-9a8f162fe893"],
Cell[263409, 6065, 1763, 38, 94, "Input",ExpressionUUID->"2e167ae8-e18f-45c6-bf61-bdd497c5b695",
 InitializationCell->True],
Cell[CellGroupData[{
Cell[265197, 6107, 303, 6, 31, "Input",ExpressionUUID->"9ede90a1-6349-40ac-8c26-36035f9a6450"],
Cell[265503, 6115, 61838, 1203, 498, "Output",ExpressionUUID->"ae9eaff6-d49a-4a28-92c2-f4dcf6e0481b"]
}, Open  ]]
}, Closed]],
Cell[CellGroupData[{
Cell[327390, 7324, 159, 3, 54, "Section",ExpressionUUID->"021b0e13-2bbb-4b09-8d76-618b4b133104"],
Cell[327552, 7329, 3786, 86, 428, "Input",ExpressionUUID->"ee04ca27-df27-4792-8426-4156493d5a0c",
 InitializationCell->True],
Cell[331341, 7417, 773, 15, 31, "Input",ExpressionUUID->"3023c9d4-5084-4a29-954b-44cee577437b"],
Cell[CellGroupData[{
Cell[332139, 7436, 1099, 19, 31, "Input",ExpressionUUID->"21ce7511-69fc-41d4-80be-4aaa76c7aa2e"],
Cell[333241, 7457, 160, 3, 35, "Output",ExpressionUUID->"41b1f24b-e043-4ae5-b31d-9c22619ea175"]
}, Open  ]],
Cell[333416, 7463, 569, 12, 31, "Input",ExpressionUUID->"671d8b46-0711-49f4-8d39-8a16ac3db8d8"],
Cell[CellGroupData[{
Cell[334010, 7479, 602, 13, 31, "Input",ExpressionUUID->"2ca8213c-5b4c-4696-b6ee-cf81b045f2cf"],
Cell[334615, 7494, 829, 19, 50, "Output",ExpressionUUID->"6d042d85-a9e3-433b-a0e9-64bbd9276d43"]
}, Open  ]],
Cell[335459, 7516, 1005, 25, 31, "Input",ExpressionUUID->"1d6004eb-75f5-44eb-8b36-8639e1a8f02e"],
Cell[CellGroupData[{
Cell[336489, 7545, 6741, 172, 377, "Input",ExpressionUUID->"edcdb7a1-7063-45bf-8b32-354bf19f3c96"],
Cell[343233, 7719, 24200, 529, 340, "Output",ExpressionUUID->"d136f809-8787-4e2e-b9d6-5c2989cc426d"]
}, Open  ]],
Cell[CellGroupData[{
Cell[367470, 8253, 159, 3, 55, "Subsection",ExpressionUUID->"d9ea769f-d6f8-4556-8319-0349d1e8ee1c"],
Cell[367632, 8258, 13321, 303, 1528, "Input",ExpressionUUID->"4598be94-1193-4602-913e-fcd90b5d38b9",
 InitializationCell->True]
}, Open  ]]
}, Closed]],
Cell[CellGroupData[{
Cell[381002, 8567, 155, 3, 54, "Section",ExpressionUUID->"a1b19167-87ca-486c-a4e2-613bb3a34a5b"],
Cell[381160, 8572, 306, 7, 31, "Input",ExpressionUUID->"8637fe27-4667-4a35-a425-dbc5a174e218"],
Cell[CellGroupData[{
Cell[381491, 8583, 342, 7, 31, "Input",ExpressionUUID->"2c267121-59d5-417d-b422-85b83b1f96f0"],
Cell[381836, 8592, 156, 2, 35, "Output",ExpressionUUID->"3ad11fef-f28a-402f-bbc4-fca809536ef9"]
}, Open  ]],
Cell[382007, 8597, 254, 7, 31, "Input",ExpressionUUID->"6cb0f264-e99e-4e29-a121-b5e9c1475ded"],
Cell[382264, 8606, 357, 8, 31, "Input",ExpressionUUID->"3fef345a-b116-47b1-b746-7ef6e9831892"],
Cell[382624, 8616, 125, 1, 31, "Input",ExpressionUUID->"95d85cbb-aa7e-4d00-b012-3a3bffe1fb71"]
}, Open  ]]
}, Open  ]]
}
]
*)

